<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>World Conquest: Assets/Mirror/Core/NetworkBehaviour.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">World Conquest
   </div>
   <div id="projectbrief">Implementation of the Risk board game for our Software Engineering module.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_network_behaviour_8cs_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">NetworkBehaviour.cs</div></div>
</div><!--header-->
<div class="contents">
<a href="_network_behaviour_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="keyword">using </span>System;</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="keyword">using </span>System.Collections.Generic;</div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="keyword">using </span>System.ComponentModel;</div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="keyword">using </span>System.Runtime.CompilerServices;</div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="keyword">using </span>UnityEngine;</div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespace_mirror.html">Mirror</a></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span>{</div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span>    <span class="comment">// SyncMode decides if a component is synced to all observers, or only owner</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno"><a class="line" href="namespace_mirror.html#ac9acfe9461893a0d1ebc0eef63d1a6ff">   10</a></span>    <span class="keyword">public</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespace_mirror.html#ac9acfe9461893a0d1ebc0eef63d1a6ff">SyncMode</a> { <a class="code hl_enumvalue" href="namespace_mirror.html#ac9acfe9461893a0d1ebc0eef63d1a6ffa1b3b22fe46ee3a448828dea57f838bd7">Observers</a>, <a class="code hl_enumvalue" href="namespace_mirror.html#ac9acfe9461893a0d1ebc0eef63d1a6ffab6f4a2ec6356bbd56d49f2096bf9d3d3">Owner</a> }</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span> </div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span>    <span class="comment">// SyncDirection decides if a component is synced from:</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span>    <span class="comment">//   * server to all clients</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>    <span class="comment">//   * owner client, to server, to all other clients</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>    <span class="comment">//</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>    <span class="comment">// naming: &#39;ClientToServer&#39; etc. instead of &#39;ClientAuthority&#39;, because</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span>    <span class="comment">// that wouldn&#39;t be accurate. server&#39;s OnDeserialize can still validate</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>    <span class="comment">// client data before applying. it&#39;s really about direction, not authority.</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno"><a class="line" href="namespace_mirror.html#a3a4f3784dd23e16377d46532b14bae88">   19</a></span>    <span class="keyword">public</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespace_mirror.html#a3a4f3784dd23e16377d46532b14bae88">SyncDirection</a> { <a class="code hl_enumvalue" href="namespace_mirror.html#a3a4f3784dd23e16377d46532b14bae88ad45cd6e8a3495dca76440ed0d0decc02">ServerToClient</a>, <a class="code hl_enumvalue" href="namespace_mirror.html#a3a4f3784dd23e16377d46532b14bae88a953771c43fd61add517f07b32409c9e0">ClientToServer</a> }</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>    <span class="comment">// [RequireComponent(typeof(NetworkIdentity))] disabled to allow child NetworkBehaviours</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    [AddComponentMenu(<span class="stringliteral">&quot;&quot;</span>)]</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    [HelpURL(<span class="stringliteral">&quot;https://mirror-networking.gitbook.io/docs/guides/networkbehaviour&quot;</span>)]</div>
<div class="foldopen" id="foldopen00025" data-start="{" data-end="};">
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html">   25</a></span>    <span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">class </span><a class="code hl_class" href="class_mirror_1_1_network_behaviour.html">NetworkBehaviour</a> : MonoBehaviour</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span>    {</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Server Authority calls OnSerialize on the server and syncs it to clients.\n\nClient Authority calls OnSerialize on the owning client, syncs it to server, which then broadcasts it to all other clients.\n\nUse server authority for cheat safety.&quot;</span>)]</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a3e6dfe7de8eac46346abcc3153c6a0c8">   29</a></span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">HideInInspector</a>] <span class="keyword">public</span> <a class="code hl_enumeration" href="namespace_mirror.html#a3a4f3784dd23e16377d46532b14bae88">SyncDirection</a> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a3e6dfe7de8eac46346abcc3153c6a0c8">syncDirection</a> = <a class="code hl_enumeration" href="namespace_mirror.html#a3a4f3784dd23e16377d46532b14bae88">SyncDirection</a>.ServerToClient;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>        <span class="comment">// hidden because NetworkBehaviourInspector shows it only if has OnSerialize.</span></div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;By default synced data is sent from the server to all Observers of the object.\nChange this to Owner to only have the server update the client that has ownership authority for this object&quot;</span>)]</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#acf0616ac2f967bdd47bf0f579cefe8a7">   34</a></span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">HideInInspector</a>] <span class="keyword">public</span> <a class="code hl_enumeration" href="namespace_mirror.html#ac9acfe9461893a0d1ebc0eef63d1a6ff">SyncMode</a> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#acf0616ac2f967bdd47bf0f579cefe8a7">syncMode</a> = <a class="code hl_enumeration" href="namespace_mirror.html#ac9acfe9461893a0d1ebc0eef63d1a6ff">SyncMode</a>.Observers;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        <span class="comment">// hidden because NetworkBehaviourInspector shows it only if has OnSerialize.</span></div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>        <span class="comment">// [0,2] should be enough. anything &gt;2s is too laggy anyway.</span></div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>        <span class="comment">// NetworkServer &amp; NetworkClient broadcast() are behind a sendInterval timer now.</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>        <span class="comment">// it makes sense to keep every component&#39;s syncInterval setting at &#39;0&#39; by default.</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>        <span class="comment">// otherwise, the overlapping timers could introduce unexpected latency.</span></div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>        <span class="comment">// careful: default of &#39;0.1&#39; may</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Time in seconds until next change is synchronized to the client. &#39;0&#39; means send immediately if changed. &#39;0.5&#39; means only send changes every 500ms.\n(This is for state synchronization like SyncVars, SyncLists, OnSerialize. Not for Cmds, Rpcs, etc.)&quot;</span>)]</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Range</a>(0, 2)]</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a94dbe38f0930d3bbde326d0eed7b6f83">   46</a></span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">HideInInspector</a>] <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a94dbe38f0930d3bbde326d0eed7b6f83">syncInterval</a> = 0;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>        <span class="keyword">internal</span> <span class="keywordtype">double</span> lastSyncTime;</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span> </div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>        <span class="comment">// This is different from NetworkServer.active, which is true if the</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>        <span class="comment">// server itself is active rather than this object being active.</span></div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a6a65dec5ade34544074c2f997932e17a">   52</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a6a65dec5ade34544074c2f997932e17a">isServer</a> =&gt; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_property" href="class_mirror_1_1_network_identity.html#a45b20df7d45211189befe124e3836f3c">isServer</a>;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ab30e4e9deea5ea728bbf8910ba4aa0fc">   55</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ab30e4e9deea5ea728bbf8910ba4aa0fc">isClient</a> =&gt; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_property" href="class_mirror_1_1_network_identity.html#a0a3bb71dd8fc37492957fe1bdbb7955e">isClient</a>;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a09f7e5bb2181018bc28fa2c29ed09e8c">   58</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a09f7e5bb2181018bc28fa2c29ed09e8c">isLocalPlayer</a> =&gt; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_property" href="class_mirror_1_1_network_identity.html#a7224507781dad1ac9cb724242cf3a653">isLocalPlayer</a>;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a8ace9ae035053dab9538482ff74d62ec">   61</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a8ace9ae035053dab9538482ff74d62ec">isServerOnly</a> =&gt; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_property" href="class_mirror_1_1_network_identity.html#aa50d597abe0b493dcacbce7856b4f03a">isServerOnly</a>;</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span> </div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#abe78215943243c0ee91c2bd9a0057915">   64</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#abe78215943243c0ee91c2bd9a0057915">isClientOnly</a> =&gt; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_property" href="class_mirror_1_1_network_identity.html#ac5077f1ab1d5e360e1a4dd29b319f4d0">isClientOnly</a>;</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        <span class="comment">// for example: main player &amp; pets are owned. monsters &amp; npcs aren&#39;t.</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ae188c39e2bc2ec519d25f285444bc5fc">   68</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae188c39e2bc2ec519d25f285444bc5fc">isOwned</a> =&gt; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_property" href="class_mirror_1_1_network_identity.html#a91ce5068c8b40a1479fe0e6cd7ea9a17">isOwned</a>;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>        <span class="comment">// on the client: if Client-&gt;Server SyncDirection and owned</span></div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>        <span class="comment">// on the server: if Server-&gt;Client SyncDirection</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>        <span class="comment">// on the host:   if Server-&gt;Client SyncDirection (= server owns it), or if Client-&gt;Server and owned (=host client owns it)</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        <span class="comment">// in host mode:  always true because either server or client always has authority, and host is both.</span></div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>        <span class="comment">// for example, NetworkTransform:</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>        <span class="comment">//   client may modify position if ClientAuthority mode and owned</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        <span class="comment">//   server may modify position only if server authority</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        <span class="comment">// note that in original Mirror, hasAuthority only meant &#39;isOwned&#39;.</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        <span class="comment">// there was no syncDirection to check.</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        <span class="comment">// also note that this is a per-NetworkBehaviour flag.</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        <span class="comment">// another component may not be client authoritative, etc.</span></div>
<div class="foldopen" id="foldopen00085" data-start="{" data-end="};">
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a8dc212b0e1cdec022380a524a57b936a">   85</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a8dc212b0e1cdec022380a524a57b936a">authority</a></div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        {</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>            <span class="keyword">get</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>            {</div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>                <span class="comment">// host mode needs to be checked explicitly</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ab30e4e9deea5ea728bbf8910ba4aa0fc">isClient</a> &amp;&amp; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a6a65dec5ade34544074c2f997932e17a">isServer</a>) <span class="keywordflow">return</span> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a3e6dfe7de8eac46346abcc3153c6a0c8">syncDirection</a> == SyncDirection.ServerToClient || <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae188c39e2bc2ec519d25f285444bc5fc">isOwned</a>;</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span> </div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>                <span class="comment">// client-only</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ab30e4e9deea5ea728bbf8910ba4aa0fc">isClient</a>) <span class="keywordflow">return</span> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a3e6dfe7de8eac46346abcc3153c6a0c8">syncDirection</a> == SyncDirection.ClientToServer &amp;&amp; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae188c39e2bc2ec519d25f285444bc5fc">isOwned</a>;</div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span> </div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>                <span class="comment">// server-only</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>                <span class="keywordflow">return</span> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a3e6dfe7de8eac46346abcc3153c6a0c8">syncDirection</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a3a4f3784dd23e16377d46532b14bae88">SyncDirection</a>.ServerToClient;</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>            }</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>        }</div>
</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">  101</a></span>        <span class="keyword">public</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a> =&gt; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_property" href="class_mirror_1_1_network_identity.html#a3752b290380dc9ec029ddd86af8dc206">netId</a>;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        <span class="comment">// TODO change to NetworkConnectionToServer, but might cause some breaking</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#aa490124a374f6e82a780926b2d11fc23">  105</a></span>        <span class="keyword">public</span> <a class="code hl_class" href="class_mirror_1_1_network_connection.html">NetworkConnection</a> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#aa490124a374f6e82a780926b2d11fc23">connectionToServer</a> =&gt; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_property" href="class_mirror_1_1_network_identity.html#afddec2dc92f3f98b1755937d9fd1430e">connectionToServer</a>;</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#abb008e87f9af42274a51453cb2717bec">  108</a></span>        <span class="keyword">public</span> <a class="code hl_class" href="class_mirror_1_1_network_connection_to_client.html">NetworkConnectionToClient</a> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#abb008e87f9af42274a51453cb2717bec">connectionToClient</a> =&gt; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_property" href="class_mirror_1_1_network_identity.html#ab22c9e32ea015847c8d765d38b2620d4">connectionToClient</a>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span> </div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>        <span class="comment">// SyncLists, SyncSets, etc.</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">  111</a></span>        <span class="keyword">protected</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">readonly</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">List&lt;SyncObject&gt;</a> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a> = <span class="keyword">new</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">List&lt;SyncObject&gt;</a>();</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        <span class="comment">// NetworkBehaviourInspector needs to know if we have SyncObjects</span></div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>        <span class="keyword">internal</span> <span class="keywordtype">bool</span> HasSyncObjects() =&gt; syncObjects.Count &gt; 0;</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span> </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>        <span class="comment">// NetworkIdentity based values set from NetworkIdentity.Awake(),</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        <span class="comment">// which is way more simple and way faster than trying to figure out</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>        <span class="comment">// component index from in here by searching all NetworkComponents.</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">  121</a></span>        <span class="keyword">public</span> <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a> { <span class="keyword">get</span>; <span class="keyword">internal</span> <span class="keyword">set</span>; }</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ad6398cf02a70ce8bd887d94ab4ca3766">  124</a></span>        <span class="keyword">public</span> <span class="keywordtype">byte</span> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ad6398cf02a70ce8bd887d94ab4ca3766">ComponentIndex</a> { <span class="keyword">get</span>; <span class="keyword">internal</span> <span class="keyword">set</span>; }</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span> </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        <span class="comment">// to avoid fully serializing entities every time, we have two options:</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>        <span class="comment">// * run a delta compression algorithm</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>        <span class="comment">//   -&gt; for fixed size types this is as easy as varint(b-a) for all</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        <span class="comment">//   -&gt; for dynamically sized types like strings this is not easy.</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>        <span class="comment">//      algorithms need to detect inserts/deletions, i.e. Myers Diff.</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        <span class="comment">//      those are very cpu intensive and barely fast enough for large</span></div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>        <span class="comment">//      scale multiplayer games (in Unity)</span></div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        <span class="comment">// * or we use dirty bits as meta data about which fields have changed</span></div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        <span class="comment">//   -&gt; spares us from running delta algorithms</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>        <span class="comment">//   -&gt; still supports dynamically sized types</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        <span class="comment">// 64 bit mask, tracking up to 64 SyncVars.</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        <span class="comment">// protected since NB child classes read this field in the weaver generated SerializeSyncVars method</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a4bb1e7724acf59e001659f0fe0b90c8f">  139</a></span>        <span class="keyword">protected</span> ulong <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a4bb1e7724acf59e001659f0fe0b90c8f">syncVarDirtyBits</a>;</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        <span class="comment">// 64 bit mask, tracking up to 64 sync collections.</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        <span class="comment">// internal for tests, field for faster access (instead of property)</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>        <span class="comment">// TODO 64 SyncLists are too much. consider smaller mask later.</span></div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>        <span class="keyword">internal</span> ulong syncObjectDirtyBits;</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        <span class="comment">// Weaver replaces &#39;[SyncVar] int health&#39; with &#39;Networkhealth&#39; property.</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        <span class="comment">// setter calls the hook if value changed.</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        <span class="comment">// if we then modify the [SyncVar] from inside the setter,</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>        <span class="comment">// the setter would call the hook and we deadlock.</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>        <span class="comment">// hook guard prevents that.</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>        ulong syncVarHookGuard;</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>        <span class="comment">// USED BY WEAVER to set syncvars in host mode without deadlocking</span></div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a7893535938885576c5dcd4edd04e714e">  153</a></span>        <span class="keyword">protected</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a7893535938885576c5dcd4edd04e714e">GetSyncVarHookGuard</a>(ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>) =&gt;</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>            (syncVarHookGuard &amp; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>) != 0<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">UL</a>;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>        <span class="comment">// USED BY WEAVER to set syncvars in host mode without deadlocking</span></div>
<div class="foldopen" id="foldopen00157" data-start="{" data-end="}">
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a64f5bf824df6960393ff87eecfd4e024">  157</a></span>        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a64f5bf824df6960393ff87eecfd4e024">SetSyncVarHookGuard</a>(ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <span class="keywordtype">bool</span> value)</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>        {</div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>            <span class="comment">// set the bit</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>            <span class="keywordflow">if</span> (value)</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>                syncVarHookGuard |= <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>;</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>            <span class="comment">// clear the bit</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>                syncVarHookGuard &amp;= <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">~dirtyBit</a>;</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>        }</div>
</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span> </div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImpl</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImplOptions</a>.AggressiveInlining)]</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>        <span class="keywordtype">void</span> SetSyncObjectDirtyBit(ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>)</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>        {</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>            syncObjectDirtyBits |= <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>;</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        }</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>        <span class="comment">// these are masks, not bit numbers, ie. 110011b not &#39;2&#39; for 2nd bit.</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        [MethodImpl(MethodImplOptions.AggressiveInlining)]</div>
<div class="foldopen" id="foldopen00176" data-start="{" data-end="}">
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a1ab0ad06e8cb2e7833852077042c8550">  176</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a1ab0ad06e8cb2e7833852077042c8550">SetSyncVarDirtyBit</a>(ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>)</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>        {</div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>            <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a4bb1e7724acf59e001659f0fe0b90c8f">syncVarDirtyBits</a> |= <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>        }</div>
</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span> </div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>        <span class="comment">// previously one had to use SetSyncVarDirtyBit(1), which is confusing.</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>        <span class="comment">// simply reuse SetSyncVarDirtyBit for now.</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>        <span class="comment">// instead of adding another field.</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>        <span class="comment">// syncVarDirtyBits does trigger OnSerialize as well.</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>        <span class="comment">// it&#39;s important to set _all_ bits as dirty.</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>        <span class="comment">// for example, server needs to broadcast ClientToServer components.</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>        <span class="comment">// if we only set the first bit, only that SyncVar would be broadcast.</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImpl</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImplOptions</a>.AggressiveInlining)]</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#aa54c7efe36af763380824091dd7e6159">  191</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#aa54c7efe36af763380824091dd7e6159">SetDirty</a>() =&gt; <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a1ab0ad06e8cb2e7833852077042c8550">SetSyncVarDirtyBit</a>(ulong.MaxValue);</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span> </div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        <span class="comment">// true if syncInterval elapsed and any SyncVar or SyncObject is dirty</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>        <span class="comment">// OR both bitmasks. != 0 if either was dirty.</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImpl</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImplOptions</a>.AggressiveInlining)]</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a76bf9eb3b49700f653620bbf5b7aa826">  196</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a76bf9eb3b49700f653620bbf5b7aa826">IsDirty</a>() =&gt;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            <span class="comment">// check bits first. this is basically free.</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>            (<a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a4bb1e7724acf59e001659f0fe0b90c8f">syncVarDirtyBits</a> | syncObjectDirtyBits) != 0<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">UL</a> &amp;&amp;</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            <span class="comment">// only check time if bits were dirty. this is more expensive.</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            NetworkTime.localTime - lastSyncTime &gt;= <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a94dbe38f0930d3bbde326d0eed7b6f83">syncInterval</a>;</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        <span class="comment">// automatically invoked when an update is sent for this object, but can</span></div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        <span class="comment">// be called manually as well.</span></div>
<div class="foldopen" id="foldopen00205" data-start="{" data-end="}">
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a0915f57f9b3f057d544235740e920a2f">  205</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a0915f57f9b3f057d544235740e920a2f">ClearAllDirtyBits</a>()</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>        {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>            lastSyncTime = NetworkTime.localTime;</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>            <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a4bb1e7724acf59e001659f0fe0b90c8f">syncVarDirtyBits</a> = 0<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">L</a>;</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>            syncObjectDirtyBits = 0<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">L</a>;</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span> </div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>            <span class="comment">// clear all unsynchronized changes in syncobjects</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>            <span class="comment">// (Linq allocates, use for instead)</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a> = 0; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a> &lt; <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>.Count; ++<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a>)</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>            {</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>                <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>[<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a>].ClearChanges();</div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>            }</div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>        }</div>
</div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span> </div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        <span class="comment">// this gets called in the constructor by the weaver</span></div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>        <span class="comment">// for every SyncObject in the component (e.g. SyncLists).</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        <span class="comment">// We collect all of them and we synchronize them with OnSerialize/OnDeserialize</span></div>
<div class="foldopen" id="foldopen00222" data-start="{" data-end="}">
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a3c5d9ef0f604ec39acc7f03269d80656">  222</a></span>        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a3c5d9ef0f604ec39acc7f03269d80656">InitSyncObject</a>(<a class="code hl_class" href="class_mirror_1_1_sync_object.html">SyncObject</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncObject</a>)</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        {</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncObject</a> == <span class="keyword">null</span>)</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>            {</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogError(<span class="stringliteral">&quot;Uninitialized SyncObject. Manually call the constructor on your SyncList, SyncSet, SyncDictionary or SyncField&lt;T&gt;&quot;</span>);</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>            }</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span> </div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>            <span class="comment">// add it, remember the index in list (if Count=0, index=0 etc.)</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>            <span class="keywordtype">int</span> index = <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>.Count;</div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>            <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>.<a class="code hl_function" href="struct_mirror_1_1_grid2_d.html#a05b810f7466b59b26b243d83383d1274">Add</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncObject</a>);</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span> </div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>            <span class="comment">// OnDirty needs to set nth bit in our dirty mask</span></div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>            ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">nthBit</a> = 1<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">UL</a> &lt;&lt; index;</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>            syncObject.OnDirty = () =&gt; SetSyncObjectDirtyBit(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">nthBit</a>);</div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span> </div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>            <span class="comment">// who is allowed to modify SyncList/SyncSet/etc.:</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>            <span class="comment">//  on client: only if owned ClientToserver</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>            <span class="comment">//  on server: only if ServerToClient.</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>            <span class="comment">//             but also for initial state when spawning.</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>            <span class="comment">// need to set a lambda because &#39;isClient&#39; isn&#39;t available in</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>            <span class="comment">// InitSyncObject yet, which is called from the constructor.</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>            syncObject.IsWritable = () =&gt;</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>            {</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>                <span class="comment">// carefully check each mode separately to ensure correct results.</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>                <span class="comment">// fixes: https://github.com/MirrorNetworking/Mirror/issues/3342</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span> </div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>                <span class="comment">// normally we would check isServer / isClient here.</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>                <span class="comment">// users may add to SyncLists before the object was spawned.</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>                <span class="comment">// isServer / isClient would still be false.</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>                <span class="comment">// so we need to check NetworkServer/Client.active here instead.</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span> </div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>                <span class="comment">// host mode: any ServerToClient and any local client owned</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>                <span class="keywordflow">if</span> (NetworkServer.active &amp;&amp; NetworkClient.active)</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>                    <span class="keywordflow">return</span> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a3e6dfe7de8eac46346abcc3153c6a0c8">syncDirection</a> == SyncDirection.ServerToClient || <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae188c39e2bc2ec519d25f285444bc5fc">isOwned</a>;</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span> </div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>                <span class="comment">// server only: any ServerToClient</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>                <span class="keywordflow">if</span> (NetworkServer.active)</div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>                    <span class="keywordflow">return</span> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a3e6dfe7de8eac46346abcc3153c6a0c8">syncDirection</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a3a4f3784dd23e16377d46532b14bae88">SyncDirection</a>.ServerToClient;</div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span> </div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>                <span class="comment">// client only: only ClientToServer and owned</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>                <span class="keywordflow">if</span> (NetworkClient.active)</div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>                {</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>                    <span class="comment">// spawned: only ClientToServer and owned</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                    <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a> != 0) <span class="keywordflow">return</span> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a3e6dfe7de8eac46346abcc3153c6a0c8">syncDirection</a> == SyncDirection.ClientToServer &amp;&amp; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae188c39e2bc2ec519d25f285444bc5fc">isOwned</a>;</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span> </div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>                    <span class="comment">// not spawned (character selection previews, etc.): always allow</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                    <span class="comment">// fixes https://github.com/MirrorNetworking/Mirror/issues/3343</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>                    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>                }</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span> </div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>                <span class="comment">// undefined behaviour should throw to make it very obvious</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> Exception(<span class="stringliteral">&quot;InitSyncObject: IsWritable: neither NetworkServer nor NetworkClient are active.&quot;</span>);</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>            };</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span> </div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>            <span class="comment">// when do we record changes:</span></div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span>            <span class="comment">//  on client: only if owned ClientToServer</span></div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>            <span class="comment">//  on server: only if we have observers.</span></div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>            <span class="comment">//    prevents ever growing .changes lists:</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>            <span class="comment">//      if a monster has no observers but we keep modifing a SyncObject,</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>            <span class="comment">//      then the changes would never be flushed and keep growing,</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>            <span class="comment">//      because OnSerialize isn&#39;t called without observers.</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>            syncObject.IsRecording = () =&gt;</div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>            {</div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>                <span class="comment">// carefully check each mode separately to ensure correct results.</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>                <span class="comment">// fixes: https://github.com/MirrorNetworking/Mirror/issues/3342</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span> </div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>                <span class="comment">// host mode: only if observed</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a6a65dec5ade34544074c2f997932e17a">isServer</a> &amp;&amp; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ab30e4e9deea5ea728bbf8910ba4aa0fc">isClient</a>) <span class="keywordflow">return</span> netIdentity.observers.Count &gt; 0;</div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>                <span class="comment">// server only: only if observed</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a6a65dec5ade34544074c2f997932e17a">isServer</a>) <span class="keywordflow">return</span> netIdentity.observers.Count &gt; 0;</div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span> </div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>                <span class="comment">// client only: only ClientToServer and owned</span></div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ab30e4e9deea5ea728bbf8910ba4aa0fc">isClient</a>) <span class="keywordflow">return</span> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#a3e6dfe7de8eac46346abcc3153c6a0c8">syncDirection</a> == SyncDirection.ClientToServer &amp;&amp; <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae188c39e2bc2ec519d25f285444bc5fc">isOwned</a>;</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span> </div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>                <span class="comment">// users may add to SyncLists before the object was spawned.</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>                <span class="comment">// isServer / isClient would still be false.</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>                <span class="comment">// in that case, allow modifying but don&#39;t record changes yet.</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>                <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>            };</div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        }</div>
</div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span> </div>
<div class="foldopen" id="foldopen00305" data-start="{" data-end="}">
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a097af64f99e7b7b5cadcd745ef154399">  305</a></span>        <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a097af64f99e7b7b5cadcd745ef154399">OnValidate</a>()</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        {</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>            <span class="comment">// we now allow child NetworkBehaviours.</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>            <span class="comment">// we can not [RequireComponent(typeof(NetworkIdentity))] anymore.</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>            <span class="comment">// instead, we need to ensure a NetworkIdentity is somewhere in the</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>            <span class="comment">// parents.</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>            <span class="comment">// only run this in Editor. don&#39;t add more runtime overhead.</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>            <span class="comment">// GetComponentInParent(includeInactive) is needed because Prefabs are not</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>            <span class="comment">// considered active, so this check requires to scan inactive.</span></div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span><span class="preprocessor">#if UNITY_EDITOR</span></div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span><span class="preprocessor">#if UNITY_2021_3_OR_NEWER </span><span class="comment">// 2021 has GetComponentInParent(bool includeInactive = false)</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GetComponent&lt;NetworkIdentity&gt;</a>() == <span class="keyword">null</span> &amp;&amp;</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GetComponentInParent&lt;NetworkIdentity&gt;</a>(<span class="keyword">true</span>) == <span class="keyword">null</span>)</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>            {</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogError(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;{GetType()} on {name} requires a NetworkIdentity. Please add a NetworkIdentity component to {name} or it&#39;s parents.&quot;</span>, <span class="keyword">this</span>);</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>            }</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span><span class="preprocessor">#elif UNITY_2020_3_OR_NEWER </span><span class="comment">// 2020 only has GetComponentsInParent(bool includeInactive = false), we can use this too</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>            <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a>[] <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">parentsIds</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GetComponentsInParent&lt;NetworkIdentity&gt;</a>(<span class="keyword">true</span>);</div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            <span class="keywordtype">int</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">parentIdsCount</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">parentsIds</a> != <span class="keyword">null</span> ? parentsIds.Length : 0;</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GetComponent&lt;NetworkIdentity&gt;</a>() == <span class="keyword">null</span> &amp;&amp; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">parentIdsCount</a> == 0)</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>            {</div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogError(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;{GetType()} on {name} requires a NetworkIdentity. Please add a NetworkIdentity component to {name} or it&#39;s parents.&quot;</span>, <span class="keyword">this</span>);</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>            }</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>        }</div>
</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>        <span class="comment">// pass full function name to avoid ClassA.Func &lt;-&gt; ClassB.Func collisions</span></div>
<div class="foldopen" id="foldopen00334" data-start="{" data-end="}">
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a13320ea9c100ddd1a0c7b31682bc197e">  334</a></span>        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a13320ea9c100ddd1a0c7b31682bc197e">SendCommandInternal</a>(<span class="keywordtype">string</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">functionFullName</a>, <span class="keywordtype">int</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">functionHashCode</a>, <a class="code hl_class" href="class_mirror_1_1_network_writer.html">NetworkWriter</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>, <span class="keywordtype">int</span> channelId, <span class="keywordtype">bool</span> requiresAuthority = <span class="keyword">true</span>)</div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>        {</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            <span class="comment">// this was in Weaver before</span></div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>            <span class="comment">// NOTE: we could remove this later to allow calling Cmds on Server</span></div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>            <span class="comment">//       to avoid Wrapper functions. a lot of people requested this.</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>            <span class="keywordflow">if</span> (!NetworkClient.active)</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>            {</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogError(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;Command {functionFullName} called on {name} without an active client.&quot;</span>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>);</div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>            }</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>            <span class="comment">// previously we used NetworkClient.readyConnection.</span></div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>            <span class="comment">// now we check .ready separately.</span></div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>            <span class="keywordflow">if</span> (!NetworkClient.ready)</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>            {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>                <span class="comment">// Unreliable Cmds from NetworkTransform may be generated,</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>                <span class="comment">// or client may have been set NotReady intentionally, so</span></div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>                <span class="comment">// only warn if on the reliable channel.</span></div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>                <span class="keywordflow">if</span> (channelId == Channels.Reliable)</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span>                    <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogWarning(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;Command {functionFullName} called on {name} while NetworkClient is not ready.\nThis may be ignored if client intentionally set NotReady.&quot;</span>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>);</div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>            }</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span> </div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>            <span class="comment">// local players can always send commands, regardless of authority,</span></div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>            <span class="comment">// other objects must have authority.</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>            <span class="keywordflow">if</span> (!(!requiresAuthority || <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a09f7e5bb2181018bc28fa2c29ed09e8c">isLocalPlayer</a> || <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae188c39e2bc2ec519d25f285444bc5fc">isOwned</a>))</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>            {</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogWarning(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;Command {functionFullName} called on {name} without authority.&quot;</span>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>);</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>            }</div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span> </div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>            <span class="comment">// IMPORTANT: can&#39;t use .connectionToServer here because calling</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>            <span class="comment">// a command on other objects is allowed if requireAuthority is</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>            <span class="comment">// false. other objects don&#39;t have a .connectionToServer.</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>            <span class="comment">// =&gt; so we always need to use NetworkClient.connection instead.</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>            <span class="comment">// =&gt; see also: https://github.com/vis2k/Mirror/issues/2629</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>            <span class="keywordflow">if</span> (NetworkClient.connection == <span class="keyword">null</span>)</div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>            {</div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogError(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;Command {functionFullName} called on {name} with no client running.&quot;</span>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>);</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>            }</div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span> </div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            <span class="comment">// construct the message</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>            <a class="code hl_struct" href="struct_mirror_1_1_command_message.html">CommandMessage</a> message = <span class="keyword">new</span> <a class="code hl_struct" href="struct_mirror_1_1_command_message.html">CommandMessage</a></div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>            {</div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>                <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a> = <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a>,</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>                componentIndex = <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ad6398cf02a70ce8bd887d94ab4ca3766">ComponentIndex</a>,</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>                <span class="comment">// type+func so Inventory.RpcUse != Equipment.RpcUse</span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>                functionHash = (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ushort</a>)<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">functionHashCode</a>,</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>                <span class="comment">// segment to avoid reader allocations</span></div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>                payload = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>.ToArraySegment()</div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>            };</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span> </div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>            <span class="comment">// IMPORTANT: can&#39;t use .connectionToServer here because calling</span></div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>            <span class="comment">// a command on other objects is allowed if requireAuthority is</span></div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>            <span class="comment">// false. other objects don&#39;t have a .connectionToServer.</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>            <span class="comment">// =&gt; so we always need to use NetworkClient.connection instead.</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>            <span class="comment">// =&gt; see also: https://github.com/vis2k/Mirror/issues/2629</span></div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>            <span class="comment">// This bypasses the null check in NetworkClient.Send but we have</span></div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>            <span class="comment">// a null check above with a detailed error log.</span></div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>            NetworkClient.connection.Send(message, channelId);</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>        }</div>
</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span> </div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        <span class="comment">// pass full function name to avoid ClassA.Func &lt;-&gt; ClassB.Func collisions</span></div>
<div class="foldopen" id="foldopen00398" data-start="{" data-end="}">
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ae3b05fd1b0d85bc30073aeb8910d4b68">  398</a></span>        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ae3b05fd1b0d85bc30073aeb8910d4b68">SendRPCInternal</a>(<span class="keywordtype">string</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">functionFullName</a>, <span class="keywordtype">int</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">functionHashCode</a>, <a class="code hl_class" href="class_mirror_1_1_network_writer.html">NetworkWriter</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>, <span class="keywordtype">int</span> channelId, <span class="keywordtype">bool</span> includeOwner)</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>        {</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span>            <span class="comment">// this was in Weaver before</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>            <span class="keywordflow">if</span> (!NetworkServer.active)</div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>            {</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogError(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;RPC Function {functionFullName} called without an active server.&quot;</span>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>);</div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>            }</div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span> </div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>            <span class="comment">// This cannot use NetworkServer.active, as that is not specific to this object.</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span>            <span class="keywordflow">if</span> (!<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a6a65dec5ade34544074c2f997932e17a">isServer</a>)</div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>            {</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogWarning(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;ClientRpc {functionFullName} called on un-spawned object: {name}&quot;</span>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>);</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>            }</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span> </div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>            <span class="comment">// construct the message</span></div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>            <a class="code hl_struct" href="struct_mirror_1_1_rpc_message.html">RpcMessage</a> message = <span class="keyword">new</span> <a class="code hl_struct" href="struct_mirror_1_1_rpc_message.html">RpcMessage</a></div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>            {</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>                <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a> = <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a>,</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>                componentIndex = <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ad6398cf02a70ce8bd887d94ab4ca3766">ComponentIndex</a>,</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>                <span class="comment">// type+func so Inventory.RpcUse != Equipment.RpcUse</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>                functionHash = (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ushort</a>)<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">functionHashCode</a>,</div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>                <span class="comment">// segment to avoid reader allocations</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>                payload = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>.ToArraySegment()</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>            };</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span> </div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>            <span class="comment">// serialize it to each ready observer&#39;s connection&#39;s rpc buffer.</span></div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>            <span class="comment">// send them all at once, instead of sending one message per rpc.</span></div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>            <span class="comment">// NetworkServer.SendToReadyObservers(netIdentity, message, includeOwner, channelId);</span></div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span> </div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            <span class="comment">// safety check used to be in SendToReadyObservers. keep it for now.</span></div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_variable" href="class_mirror_1_1_network_identity.html#a32967ba9a8a00ebe0e39b897030f422e">observers</a> == <span class="keyword">null</span> || <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_variable" href="class_mirror_1_1_network_identity.html#a32967ba9a8a00ebe0e39b897030f422e">observers</a>.Count == 0)</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span> </div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>            <span class="comment">// serialize the message only once</span></div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>            <span class="keyword">using</span> (<a class="code hl_class" href="class_mirror_1_1_network_writer_pooled.html">NetworkWriterPooled</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">serialized</a> = NetworkWriterPool.Get())</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>            {</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">serialized</a>.Write(message);</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span> </div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>                <span class="comment">// send to every observer.</span></div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>                <span class="comment">// batching buffers this automatically.</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>                <span class="keywordflow">foreach</span> (<a class="code hl_class" href="class_mirror_1_1_network_connection_to_client.html">NetworkConnectionToClient</a> conn <span class="keywordflow">in</span> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_variable" href="class_mirror_1_1_network_identity.html#a32967ba9a8a00ebe0e39b897030f422e">observers</a>.Values)</div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>                {</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>                    <span class="keywordtype">bool</span> isOwner = conn == <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">netIdentity</a>.<a class="code hl_property" href="class_mirror_1_1_network_identity.html#ab22c9e32ea015847c8d765d38b2620d4">connectionToClient</a>;</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span>                    <span class="keywordflow">if</span> ((!isOwner || includeOwner) &amp;&amp; conn.<a class="code hl_variable" href="class_mirror_1_1_network_connection.html#a94362bc21882fa2d34df1235d706b1f7">isReady</a>)</div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>                    {</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span>                        conn.Send(message, channelId);</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>                    }</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>                }</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>            }</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        }</div>
</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span> </div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>        <span class="comment">// pass full function name to avoid ClassA.Func &lt;-&gt; ClassB.Func collisions</span></div>
<div class="foldopen" id="foldopen00452" data-start="{" data-end="}">
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#af21027522544fbe6f98d2b665389ddfb">  452</a></span>        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#af21027522544fbe6f98d2b665389ddfb">SendTargetRPCInternal</a>(<a class="code hl_class" href="class_mirror_1_1_network_connection.html">NetworkConnection</a> conn, <span class="keywordtype">string</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">functionFullName</a>, <span class="keywordtype">int</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">functionHashCode</a>, <a class="code hl_class" href="class_mirror_1_1_network_writer.html">NetworkWriter</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>, <span class="keywordtype">int</span> channelId)</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        {</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>            <span class="keywordflow">if</span> (!NetworkServer.active)</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>            {</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogError(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;TargetRPC {functionFullName} was called on {name} when server not active.&quot;</span>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>);</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>            }</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span> </div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            <span class="keywordflow">if</span> (!<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a6a65dec5ade34544074c2f997932e17a">isServer</a>)</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>            {</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogWarning(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;TargetRpc {functionFullName} called on {name} but that object has not been spawned or has been unspawned.&quot;</span>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>);</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>            }</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span> </div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>            <span class="comment">// connection parameter is optional. assign if null.</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>            <span class="keywordflow">if</span> (conn <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">is</a> <span class="keyword">null</span>)</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>            {</div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>                conn = <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#abb008e87f9af42274a51453cb2717bec">connectionToClient</a>;</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>            }</div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span> </div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>            <span class="comment">// if still null</span></div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>            <span class="keywordflow">if</span> (conn <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">is</a> <span class="keyword">null</span>)</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>            {</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogError(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;TargetRPC {functionFullName} can&#39;t be sent because it was given a null connection. Make sure {name} is owned by a connection, or if you pass a connection manually then make sure it&#39;s not null. For example, TargetRpcs can be called on Player/Pet which are owned by a connection. However, they can not be called on Monsters/Npcs which don&#39;t have an owner connection.&quot;</span>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>);</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>            }</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span> </div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>            <span class="comment">// TODO change conn type to NetworkConnectionToClient to begin with.</span></div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>            <span class="keywordflow">if</span> (!(conn <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">is</a> <a class="code hl_class" href="class_mirror_1_1_network_connection_to_client.html">NetworkConnectionToClient</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">connToClient</a>))</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>            {</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogError(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;TargetRPC {functionFullName} called on {name} requires a NetworkConnectionToClient but was given {conn.GetType().Name}&quot;</span>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>);</div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span>            }</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span> </div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>            <span class="comment">// construct the message</span></div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>            <a class="code hl_struct" href="struct_mirror_1_1_rpc_message.html">RpcMessage</a> message = <span class="keyword">new</span> <a class="code hl_struct" href="struct_mirror_1_1_rpc_message.html">RpcMessage</a></div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>            {</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>                <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a> = <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a>,</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>                componentIndex = <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ad6398cf02a70ce8bd887d94ab4ca3766">ComponentIndex</a>,</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>                <span class="comment">// type+func so Inventory.RpcUse != Equipment.RpcUse</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>                functionHash = (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ushort</a>)<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">functionHashCode</a>,</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>                <span class="comment">// segment to avoid reader allocations</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>                payload = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>.ToArraySegment()</div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>            };</div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span> </div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>            <span class="comment">// send it to the connection.</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>            <span class="comment">// batching buffers this automatically.</span></div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>            conn.Send(message, channelId);</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        }</div>
</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span> </div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        <span class="comment">// move the [SyncVar] generated property&#39;s .set into C# to avoid much IL</span></div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        <span class="comment">//   public int health = 42;</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>        <span class="comment">//   public int Networkhealth</span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>        <span class="comment">//   {</span></div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>        <span class="comment">//       get</span></div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>        <span class="comment">//           return health;</span></div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>        <span class="comment">//       [param: In]</span></div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>        <span class="comment">//       set</span></div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>        <span class="comment">//           if (!NetworkBehaviour.SyncVarEqual(value, ref health))</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>        <span class="comment">//           {</span></div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>        <span class="comment">//               int oldValue = health;</span></div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>        <span class="comment">//               SetSyncVar(value, ref health, 1uL);</span></div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>        <span class="comment">//               if (NetworkServer.activeHost &amp;&amp; !GetSyncVarHookGuard(1uL))</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>        <span class="comment">//               {</span></div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>        <span class="comment">//                   SetSyncVarHookGuard(1uL, value: true);</span></div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>        <span class="comment">//                   OnChanged(oldValue, value);</span></div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>        <span class="comment">//                   SetSyncVarHookGuard(1uL, value: false);</span></div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        <span class="comment">//               }</span></div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span>        <span class="comment">//           }</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>        <span class="comment">//   }</span></div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImpl</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImplOptions</a>.AggressiveInlining)]</div>
<div class="foldopen" id="foldopen00529" data-start="{" data-end="}">
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#aaa6e5aa4f2429c1b24d9fc58a354ade9">  529</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#aaa6e5aa4f2429c1b24d9fc58a354ade9">GeneratedSyncVarSetter&lt;T&gt;</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> field, ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Action&lt;T, T&gt;</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>)</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>        {</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>            <span class="keywordflow">if</span> (!<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SyncVarEqual</a>(value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> field))</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>            {</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">oldValue</a> = field;</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SetSyncVar</a>(value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> field, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>);</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span> </div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>                <span class="comment">// call hook (if any)</span></div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>                {</div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>                    <span class="comment">// in host mode, setting a SyncVar calls the hook directly.</span></div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>                    <span class="comment">// in client-only mode, OnDeserialize would call it.</span></div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>                    <span class="comment">// we use hook guard to protect against deadlock where hook</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>                    <span class="comment">// changes syncvar, calling hook again.</span></div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>                    <span class="keywordflow">if</span> (NetworkServer.activeHost &amp;&amp; !<a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a7893535938885576c5dcd4edd04e714e">GetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>))</div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>                    {</div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>                        <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a64f5bf824df6960393ff87eecfd4e024">SetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>                        <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">oldValue</a>, value);</div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>                        <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a64f5bf824df6960393ff87eecfd4e024">SetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>                    }</div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>                }</div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>            }</div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>        }</div>
</div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span> </div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>        <span class="comment">// GameObject needs custom handling for persistence via netId.</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>        <span class="comment">// has one extra parameter.</span></div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImpl</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImplOptions</a>.AggressiveInlining)]</div>
<div class="foldopen" id="foldopen00556" data-start="{" data-end="}">
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ae55b16404368518999a51bfd2f17ef1e">  556</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ae55b16404368518999a51bfd2f17ef1e">GeneratedSyncVarSetter_GameObject</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> field, ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Action&lt;GameObject, GameObject&gt;</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>)</div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>        {</div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a910716f95a3bf7c8f834221bb39ca508">SyncVarGameObjectEqual</a>(value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>))</div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>            {</div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">oldValue</a> = field;</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>                <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ac3e14f45a522cec35780c9afc367e985">SetSyncVarGameObject</a>(value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> field, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>);</div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span> </div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>                <span class="comment">// call hook (if any)</span></div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>                {</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>                    <span class="comment">// in host mode, setting a SyncVar calls the hook directly.</span></div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>                    <span class="comment">// in client-only mode, OnDeserialize would call it.</span></div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>                    <span class="comment">// we use hook guard to protect against deadlock where hook</span></div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>                    <span class="comment">// changes syncvar, calling hook again.</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>                    <span class="keywordflow">if</span> (NetworkServer.activeHost &amp;&amp; !<a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a7893535938885576c5dcd4edd04e714e">GetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>))</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>                    {</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>                        <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a64f5bf824df6960393ff87eecfd4e024">SetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>                        <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">oldValue</a>, value);</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>                        <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a64f5bf824df6960393ff87eecfd4e024">SetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>                    }</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>                }</div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>            }</div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>        }</div>
</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>        <span class="comment">// NetworkIdentity needs custom handling for persistence via netId.</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>        <span class="comment">// has one extra parameter.</span></div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImpl</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImplOptions</a>.AggressiveInlining)]</div>
<div class="foldopen" id="foldopen00583" data-start="{" data-end="}">
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a66bc072c4c616a533758bad064472cb9">  583</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a66bc072c4c616a533758bad064472cb9">GeneratedSyncVarSetter_NetworkIdentity</a>(<a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> field, ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Action&lt;NetworkIdentity, NetworkIdentity&gt;</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>)</div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>        {</div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>            <span class="keywordflow">if</span> (!<a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a6dd9c2d716835e849cb18d83a9cec9b0">SyncVarNetworkIdentityEqual</a>(value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>))</div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>            {</div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>                <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">oldValue</a> = field;</div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>                <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a2b4fc9f99fffd61bf67b4e7995d1d4bb">SetSyncVarNetworkIdentity</a>(value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> field, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>);</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span> </div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>                <span class="comment">// call hook (if any)</span></div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>                {</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>                    <span class="comment">// in host mode, setting a SyncVar calls the hook directly.</span></div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span>                    <span class="comment">// in client-only mode, OnDeserialize would call it.</span></div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>                    <span class="comment">// we use hook guard to protect against deadlock where hook</span></div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>                    <span class="comment">// changes syncvar, calling hook again.</span></div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>                    <span class="keywordflow">if</span> (NetworkServer.activeHost &amp;&amp; !<a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a7893535938885576c5dcd4edd04e714e">GetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>))</div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>                    {</div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>                        <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a64f5bf824df6960393ff87eecfd4e024">SetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>                        <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">oldValue</a>, value);</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>                        <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a64f5bf824df6960393ff87eecfd4e024">SetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>                    }</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>                }</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>            }</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>        }</div>
</div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span> </div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>        <span class="comment">// NetworkBehaviour needs custom handling for persistence via netId.</span></div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>        <span class="comment">// has one extra parameter.</span></div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImpl</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">MethodImplOptions</a>.AggressiveInlining)]</div>
<div class="foldopen" id="foldopen00610" data-start="{" data-end="}">
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#afbdeb97fb4bb823233a5d7805c0e5a5c">  610</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#afbdeb97fb4bb823233a5d7805c0e5a5c">GeneratedSyncVarSetter_NetworkBehaviour&lt;T&gt;</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> field, ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Action&lt;T, T&gt;</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_network_behaviour_sync_var.html">NetworkBehaviourSyncVar</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>)</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">where</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> : <a class="code hl_class" href="class_mirror_1_1_network_behaviour.html">NetworkBehaviour</a></div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>        {</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>            <span class="keywordflow">if</span> (!<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SyncVarNetworkBehaviourEqual</a>(value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>))</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>            {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">oldValue</a> = field;</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SetSyncVarNetworkBehaviour</a>(value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> field, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>);</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span> </div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span>                <span class="comment">// call hook (if any)</span></div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>                {</div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>                    <span class="comment">// in host mode, setting a SyncVar calls the hook directly.</span></div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>                    <span class="comment">// in client-only mode, OnDeserialize would call it.</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>                    <span class="comment">// we use hook guard to protect against deadlock where hook</span></div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>                    <span class="comment">// changes syncvar, calling hook again.</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>                    <span class="keywordflow">if</span> (NetworkServer.activeHost &amp;&amp; !<a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a7893535938885576c5dcd4edd04e714e">GetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>))</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>                    {</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>                        <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a64f5bf824df6960393ff87eecfd4e024">SetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <span class="keyword">true</span>);</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>                        <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">oldValue</a>, value);</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>                        <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a64f5bf824df6960393ff87eecfd4e024">SetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>                    }</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>                }</div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>            }</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>        }</div>
</div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span> </div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>        <span class="comment">// helper function for [SyncVar] GameObjects.</span></div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>        <span class="comment">// needs to be public so that tests &amp; NetworkBehaviours from other</span></div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>        <span class="comment">// assemblies both find it</span></div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">EditorBrowsable</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">EditorBrowsableState</a>.Never)]</div>
<div class="foldopen" id="foldopen00639" data-start="{" data-end="}">
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a910716f95a3bf7c8f834221bb39ca508">  639</a></span>        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a910716f95a3bf7c8f834221bb39ca508">SyncVarGameObjectEqual</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newGameObject</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>)</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>        {</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = 0;</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newGameObject</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>            {</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newGameObject</a>.TryGetComponent(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">out</a> <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> identity))</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>                {</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>                    <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = identity.netId;</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>                    <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> == 0)</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>                    {</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>                        <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogWarning(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;SetSyncVarGameObject GameObject {newGameObject} has a zero netId. Maybe it is not spawned yet?&quot;</span>);</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>                    }</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>                }</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>            }</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span> </div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>            <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> == <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>;</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>        }</div>
</div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span> </div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>        <span class="comment">// helper function for [SyncVar] GameObjects.</span></div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>        <span class="comment">// dirtyBit is a mask like 00010</span></div>
<div class="foldopen" id="foldopen00659" data-start="{" data-end="}">
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ac3e14f45a522cec35780c9afc367e985">  659</a></span>        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ac3e14f45a522cec35780c9afc367e985">SetSyncVarGameObject</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newGameObject</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObjectField</a>, ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>)</div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>        {</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a7893535938885576c5dcd4edd04e714e">GetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>))</div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span> </div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = 0;</div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newGameObject</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>            {</div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newGameObject</a>.TryGetComponent(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">out</a> <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> identity))</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>                {</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>                    <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = identity.netId;</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>                    <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> == 0)</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>                    {</div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>                        <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogWarning(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;SetSyncVarGameObject GameObject {newGameObject} has a zero netId. Maybe it is not spawned yet?&quot;</span>);</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>                    }</div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>                }</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>            }</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span> </div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>            <span class="comment">//Debug.Log($&quot;SetSyncVar GameObject {GetType().Name} bit:{dirtyBit} netfieldId:{netIdField} -&gt; {newNetId}&quot;);</span></div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>            <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a1ab0ad06e8cb2e7833852077042c8550">SetSyncVarDirtyBit</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>);</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>            <span class="comment">// assign new one on the server, and in case we ever need it on client too</span></div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObjectField</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newGameObject</a>;</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a>;</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>        }</div>
</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span> </div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>        <span class="comment">// helper function for [SyncVar] GameObjects.</span></div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>        <span class="comment">// -&gt; ref GameObject as second argument makes OnDeserialize processing easier</span></div>
<div class="foldopen" id="foldopen00686" data-start="{" data-end="}">
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ab794f957ea97db9dec659cbbfe9208f4">  686</a></span>        <span class="keyword">protected</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ab794f957ea97db9dec659cbbfe9208f4">GetSyncVarGameObject</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObjectField</a>)</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        {</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>            <span class="comment">// server always uses the field</span></div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>            <span class="comment">// if neither, fallback to original field</span></div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>            <span class="comment">// fixes: https://github.com/MirrorNetworking/Mirror/issues/3447</span></div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a6a65dec5ade34544074c2f997932e17a">isServer</a> || !<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ab30e4e9deea5ea728bbf8910ba4aa0fc">isClient</a>)</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>            {</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>                <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObjectField</a>;</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>            }</div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span> </div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>            <span class="comment">// client always looks up based on netId because objects might get in and out of range</span></div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>            <span class="comment">// over and over again, which shouldn&#39;t null them forever</span></div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>            <span class="keywordflow">if</span> (NetworkClient.spawned.TryGetValue(<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">out</a> <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> identity) &amp;&amp; identity != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>                <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObjectField</a> = identity.gameObject;</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>            <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>        }</div>
</div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span> </div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span>        <span class="comment">// helper function for [SyncVar] NetworkIdentities.</span></div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>        <span class="comment">// needs to be public so that tests &amp; NetworkBehaviours from other</span></div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>        <span class="comment">// assemblies both find it</span></div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">EditorBrowsable</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">EditorBrowsableState</a>.Never)]</div>
<div class="foldopen" id="foldopen00707" data-start="{" data-end="}">
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a6dd9c2d716835e849cb18d83a9cec9b0">  707</a></span>        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a6dd9c2d716835e849cb18d83a9cec9b0">SyncVarNetworkIdentityEqual</a>(<a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newIdentity</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>)</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>        {</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = 0;</div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newIdentity</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>            {</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newIdentity</a>.netId;</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> == 0)</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>                {</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>                    <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogWarning(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;SetSyncVarNetworkIdentity NetworkIdentity {newIdentity} has a zero netId. Maybe it is not spawned yet?&quot;</span>);</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>                }</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>            }</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span> </div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>            <span class="comment">// netId changed?</span></div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>            <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> == <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>;</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        }</div>
</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span> </div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>        <span class="comment">// move the [SyncVar] generated OnDeserialize C# to avoid much IL.</span></div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>        <span class="comment">// before:</span></div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>        <span class="comment">//  public override void DeserializeSyncVars(NetworkReader reader, bool initialState)</span></div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>        <span class="comment">//  {</span></div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>        <span class="comment">//      base.DeserializeSyncVars(reader, initialState);</span></div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>        <span class="comment">//      if (initialState)</span></div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>        <span class="comment">//      {</span></div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>        <span class="comment">//          int num = health;</span></div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>        <span class="comment">//          Networkhealth = reader.ReadInt();</span></div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>        <span class="comment">//          if (!NetworkBehaviour.SyncVarEqual(num, ref health))</span></div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>        <span class="comment">//          {</span></div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        <span class="comment">//              OnChanged(num, health);</span></div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>        <span class="comment">//          }</span></div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>        <span class="comment">//          return;</span></div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>        <span class="comment">//      }</span></div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>        <span class="comment">//      long num2 = (long)reader.ReadULong();</span></div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>        <span class="comment">//      if ((num2 &amp; 1L) != 0L)</span></div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>        <span class="comment">//      {</span></div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>        <span class="comment">//          int num3 = health;</span></div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>        <span class="comment">//          Networkhealth = reader.ReadInt();</span></div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>        <span class="comment">//          if (!NetworkBehaviour.SyncVarEqual(num3, ref health))</span></div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>        <span class="comment">//          {</span></div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>        <span class="comment">//              OnChanged(num3, health);</span></div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>        <span class="comment">//          }</span></div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>        <span class="comment">//      }</span></div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>        <span class="comment">//  }</span></div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>        <span class="comment">// after:</span></div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>        <span class="comment">//  public override void DeserializeSyncVars(NetworkReader reader, bool initialState)</span></div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>        <span class="comment">//  {</span></div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>        <span class="comment">//      base.DeserializeSyncVars(reader, initialState);</span></div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>        <span class="comment">//      if (initialState)</span></div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>        <span class="comment">//      {</span></div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>        <span class="comment">//          GeneratedSyncVarDeserialize(reader, ref health, null, reader.ReadInt());</span></div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>        <span class="comment">//          return;</span></div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>        <span class="comment">//      }</span></div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>        <span class="comment">//      long num = (long)reader.ReadULong();</span></div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>        <span class="comment">//      if ((num &amp; 1L) != 0L)</span></div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>        <span class="comment">//      {</span></div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>        <span class="comment">//          GeneratedSyncVarDeserialize(reader, ref health, null, reader.ReadInt());</span></div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>        <span class="comment">//      }</span></div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>        <span class="comment">//  }</span></div>
<div class="foldopen" id="foldopen00767" data-start="{" data-end="}">
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a39df979507646798f2829b6f642b27fc">  767</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a39df979507646798f2829b6f642b27fc">GeneratedSyncVarDeserialize&lt;T&gt;</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> field, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Action&lt;T, T&gt;</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> value)</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>        {</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previous</a> = field;</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>            field = value;</div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span> </div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>            <span class="comment">// any hook? then call if changed.</span></div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a> != <span class="keyword">null</span> &amp;&amp; !<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SyncVarEqual</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previous</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> field))</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>            {</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previous</a>, field);</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>            }</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>        }</div>
</div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span> </div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>        <span class="comment">// move the [SyncVar] generated OnDeserialize C# to avoid much IL.</span></div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>        <span class="comment">// before:</span></div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>        <span class="comment">//   public override void DeserializeSyncVars(NetworkReader reader, bool initialState)</span></div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>        <span class="comment">//   {</span></div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        <span class="comment">//       base.DeserializeSyncVars(reader, initialState);</span></div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>        <span class="comment">//       if (initialState)</span></div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>        <span class="comment">//           uint __targetNetId = ___targetNetId;</span></div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>        <span class="comment">//           GameObject networktarget = Networktarget;</span></div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>        <span class="comment">//           ___targetNetId = reader.ReadUInt();</span></div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>        <span class="comment">//           if (!NetworkBehaviour.SyncVarEqual(__targetNetId, ref ___targetNetId))</span></div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>        <span class="comment">//           {</span></div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>        <span class="comment">//               OnChangedNB(networktarget, Networktarget);</span></div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>        <span class="comment">//           }</span></div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>        <span class="comment">//           return;</span></div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>        <span class="comment">//       long num = (long)reader.ReadULong();</span></div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span>        <span class="comment">//       if ((num &amp; 1L) != 0L)</span></div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>        <span class="comment">//           uint __targetNetId2 = ___targetNetId;</span></div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>        <span class="comment">//           GameObject networktarget2 = Networktarget;</span></div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>        <span class="comment">//           ___targetNetId = reader.ReadUInt();</span></div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>        <span class="comment">//           if (!NetworkBehaviour.SyncVarEqual(__targetNetId2, ref ___targetNetId))</span></div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>        <span class="comment">//           {</span></div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>        <span class="comment">//               OnChangedNB(networktarget2, Networktarget);</span></div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>        <span class="comment">//           }</span></div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>        <span class="comment">//   }</span></div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>        <span class="comment">// after:</span></div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>        <span class="comment">//   public override void DeserializeSyncVars(NetworkReader reader, bool initialState)</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>        <span class="comment">//   {</span></div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>        <span class="comment">//       base.DeserializeSyncVars(reader, initialState);</span></div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>        <span class="comment">//       if (initialState)</span></div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>        <span class="comment">//           GeneratedSyncVarDeserialize_GameObject(reader, ref target, OnChangedNB, ref ___targetNetId);</span></div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>        <span class="comment">//           return;</span></div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        <span class="comment">//       long num = (long)reader.ReadULong();</span></div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>        <span class="comment">//       if ((num &amp; 1L) != 0L)</span></div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>        <span class="comment">//           GeneratedSyncVarDeserialize_GameObject(reader, ref target, OnChangedNB, ref ___targetNetId);</span></div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>        <span class="comment">//   }</span></div>
<div class="foldopen" id="foldopen00824" data-start="{" data-end="}">
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ae55762932698b668c2deb366833660e1">  824</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ae55762932698b668c2deb366833660e1">GeneratedSyncVarDeserialize_GameObject</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> field, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Action&lt;GameObject, GameObject&gt;</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>, <a class="code hl_class" href="class_mirror_1_1_network_reader.html">NetworkReader</a> reader, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>)</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        {</div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousNetId</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>;</div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousGameObject</a> = field;</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a> = reader.ReadUInt();</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span> </div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>            <span class="comment">// get the new GameObject now that netId field is set</span></div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>            field = <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ab794f957ea97db9dec659cbbfe9208f4">GetSyncVarGameObject</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> field);</div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span> </div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>            <span class="comment">// any hook? then call if changed.</span></div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a> != <span class="keyword">null</span> &amp;&amp; !<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SyncVarEqual</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousNetId</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>))</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>            {</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousGameObject</a>, field);</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>            }</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        }</div>
</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span> </div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>        <span class="comment">// move the [SyncVar] generated OnDeserialize C# to avoid much IL.</span></div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>        <span class="comment">// before:</span></div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>        <span class="comment">//   public override void DeserializeSyncVars(NetworkReader reader, bool initialState)</span></div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>        <span class="comment">//   {</span></div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>        <span class="comment">//       base.DeserializeSyncVars(reader, initialState);</span></div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>        <span class="comment">//       if (initialState)</span></div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>        <span class="comment">//           uint __targetNetId = ___targetNetId;</span></div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>        <span class="comment">//           NetworkIdentity networktarget = Networktarget;</span></div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>        <span class="comment">//           ___targetNetId = reader.ReadUInt();</span></div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>        <span class="comment">//           if (!NetworkBehaviour.SyncVarEqual(__targetNetId, ref ___targetNetId))</span></div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>        <span class="comment">//           {</span></div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>        <span class="comment">//               OnChangedNI(networktarget, Networktarget);</span></div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>        <span class="comment">//           }</span></div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>        <span class="comment">//           return;</span></div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>        <span class="comment">//       long num = (long)reader.ReadULong();</span></div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>        <span class="comment">//       if ((num &amp; 1L) != 0L)</span></div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>        <span class="comment">//           uint __targetNetId2 = ___targetNetId;</span></div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>        <span class="comment">//           NetworkIdentity networktarget2 = Networktarget;</span></div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>        <span class="comment">//           ___targetNetId = reader.ReadUInt();</span></div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>        <span class="comment">//           if (!NetworkBehaviour.SyncVarEqual(__targetNetId2, ref ___targetNetId))</span></div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>        <span class="comment">//           {</span></div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>        <span class="comment">//               OnChangedNI(networktarget2, Networktarget);</span></div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>        <span class="comment">//           }</span></div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>        <span class="comment">//   }</span></div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>        <span class="comment">// after:</span></div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>        <span class="comment">//   public override void DeserializeSyncVars(NetworkReader reader, bool initialState)</span></div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>        <span class="comment">//   {</span></div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>        <span class="comment">//       base.DeserializeSyncVars(reader, initialState);</span></div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>        <span class="comment">//       if (initialState)</span></div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>        <span class="comment">//           GeneratedSyncVarDeserialize_NetworkIdentity(reader, ref target, OnChangedNI, ref ___targetNetId);</span></div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>        <span class="comment">//           return;</span></div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>        <span class="comment">//       long num = (long)reader.ReadULong();</span></div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>        <span class="comment">//       if ((num &amp; 1L) != 0L)</span></div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>        <span class="comment">//           GeneratedSyncVarDeserialize_NetworkIdentity(reader, ref target, OnChangedNI, ref ___targetNetId);</span></div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>        <span class="comment">//   }</span></div>
<div class="foldopen" id="foldopen00886" data-start="{" data-end="}">
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a82c8ade1ff1252703a15a40c532e0f06">  886</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a82c8ade1ff1252703a15a40c532e0f06">GeneratedSyncVarDeserialize_NetworkIdentity</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> field, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Action&lt;NetworkIdentity, NetworkIdentity&gt;</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>, <a class="code hl_class" href="class_mirror_1_1_network_reader.html">NetworkReader</a> reader, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>)</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        {</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousNetId</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>;</div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>            <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousIdentity</a> = field;</div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a> = reader.ReadUInt();</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span> </div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>            <span class="comment">// get the new NetworkIdentity now that netId field is set</span></div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>            field = <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a46b6f2edcee89cede23050a2177098df">GetSyncVarNetworkIdentity</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> field);</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span> </div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>            <span class="comment">// any hook? then call if changed.</span></div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a> != <span class="keyword">null</span> &amp;&amp; !<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SyncVarEqual</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousNetId</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>))</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>            {</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousIdentity</a>, field);</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>            }</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>        }</div>
</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span> </div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>        <span class="comment">// move the [SyncVar] generated OnDeserialize C# to avoid much IL.</span></div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>        <span class="comment">// before:</span></div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>        <span class="comment">//   public override void DeserializeSyncVars(NetworkReader reader, bool initialState)</span></div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>        <span class="comment">//   {</span></div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>        <span class="comment">//       base.DeserializeSyncVars(reader, initialState);</span></div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>        <span class="comment">//       if (initialState)</span></div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>        <span class="comment">//           NetworkBehaviourSyncVar __targetNetId = ___targetNetId;</span></div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>        <span class="comment">//           Tank networktarget = Networktarget;</span></div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>        <span class="comment">//           ___targetNetId = reader.ReadNetworkBehaviourSyncVar();</span></div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>        <span class="comment">//           if (!NetworkBehaviour.SyncVarEqual(__targetNetId, ref ___targetNetId))</span></div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>        <span class="comment">//           {</span></div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>        <span class="comment">//               OnChangedNB(networktarget, Networktarget);</span></div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>        <span class="comment">//           }</span></div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>        <span class="comment">//           return;</span></div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>        <span class="comment">//       long num = (long)reader.ReadULong();</span></div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span>        <span class="comment">//       if ((num &amp; 1L) != 0L)</span></div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>        <span class="comment">//           NetworkBehaviourSyncVar __targetNetId2 = ___targetNetId;</span></div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>        <span class="comment">//           Tank networktarget2 = Networktarget;</span></div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>        <span class="comment">//           ___targetNetId = reader.ReadNetworkBehaviourSyncVar();</span></div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>        <span class="comment">//           if (!NetworkBehaviour.SyncVarEqual(__targetNetId2, ref ___targetNetId))</span></div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span>        <span class="comment">//           {</span></div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>        <span class="comment">//               OnChangedNB(networktarget2, Networktarget);</span></div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>        <span class="comment">//           }</span></div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>        <span class="comment">//   }</span></div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>        <span class="comment">// after:</span></div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>        <span class="comment">//   public override void DeserializeSyncVars(NetworkReader reader, bool initialState)</span></div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>        <span class="comment">//   {</span></div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>        <span class="comment">//       base.DeserializeSyncVars(reader, initialState);</span></div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>        <span class="comment">//       if (initialState)</span></div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>        <span class="comment">//           GeneratedSyncVarDeserialize_NetworkBehaviour(reader, ref target, OnChangedNB, ref ___targetNetId);</span></div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>        <span class="comment">//           return;</span></div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        <span class="comment">//       long num = (long)reader.ReadULong();</span></div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>        <span class="comment">//       if ((num &amp; 1L) != 0L)</span></div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>        <span class="comment">//       {</span></div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>        <span class="comment">//           GeneratedSyncVarDeserialize_NetworkBehaviour(reader, ref target, OnChangedNB, ref ___targetNetId);</span></div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>        <span class="comment">//       }</span></div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>        <span class="comment">//   }</span></div>
<div class="foldopen" id="foldopen00949" data-start="{" data-end="}">
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a74b10961d91bff24790a9f63eaece88e">  949</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a74b10961d91bff24790a9f63eaece88e">GeneratedSyncVarDeserialize_NetworkBehaviour&lt;T&gt;</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> field, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Action&lt;T, T&gt;</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>, <a class="code hl_class" href="class_mirror_1_1_network_reader.html">NetworkReader</a> reader, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_network_behaviour_sync_var.html">NetworkBehaviourSyncVar</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>)</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">where</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> : <a class="code hl_class" href="class_mirror_1_1_network_behaviour.html">NetworkBehaviour</a></div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>        {</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>            <a class="code hl_struct" href="struct_mirror_1_1_network_behaviour_sync_var.html">NetworkBehaviourSyncVar</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousNetId</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>;</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousBehaviour</a> = field;</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a> = reader.ReadNetworkBehaviourSyncVar();</div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span> </div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>            <span class="comment">// get the new NetworkBehaviour now that netId field is set</span></div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>            field = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GetSyncVarNetworkBehaviour</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> field);</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span> </div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>            <span class="comment">// any hook? then call if changed.</span></div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a> != <span class="keyword">null</span> &amp;&amp; !<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SyncVarEqual</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousNetId</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>))</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>            {</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">OnChanged</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previousBehaviour</a>, field);</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>            }</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>        }</div>
</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span> </div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>        <span class="comment">// helper function for [SyncVar] NetworkIdentities.</span></div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>        <span class="comment">// dirtyBit is a mask like 00010</span></div>
<div class="foldopen" id="foldopen00968" data-start="{" data-end="}">
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a2b4fc9f99fffd61bf67b4e7995d1d4bb">  968</a></span>        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a2b4fc9f99fffd61bf67b4e7995d1d4bb">SetSyncVarNetworkIdentity</a>(<a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newIdentity</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">identityField</a>, ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a>)</div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>        {</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a7893535938885576c5dcd4edd04e714e">GetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>))</div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span> </div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = 0;</div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newIdentity</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>            {</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newIdentity</a>.netId;</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> == 0)</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>                {</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>                    <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogWarning(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;SetSyncVarNetworkIdentity NetworkIdentity {newIdentity} has a zero netId. Maybe it is not spawned yet?&quot;</span>);</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>                }</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>            }</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span> </div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>            <span class="comment">//Debug.Log($&quot;SetSyncVarNetworkIdentity NetworkIdentity {GetType().Name} bit:{dirtyBit} netIdField:{netIdField} -&gt; {newNetId}&quot;);</span></div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>            <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a1ab0ad06e8cb2e7833852077042c8550">SetSyncVarDirtyBit</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>);</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">netIdField</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a>;</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>            <span class="comment">// assign new one on the server, and in case we ever need it on client too</span></div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">identityField</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newIdentity</a>;</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>        }</div>
</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span> </div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>        <span class="comment">// helper function for [SyncVar] NetworkIdentities.</span></div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>        <span class="comment">// -&gt; ref GameObject as second argument makes OnDeserialize processing easier</span></div>
<div class="foldopen" id="foldopen00992" data-start="{" data-end="}">
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a46b6f2edcee89cede23050a2177098df">  992</a></span>        <span class="keyword">protected</span> <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a46b6f2edcee89cede23050a2177098df">GetSyncVarNetworkIdentity</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">identityField</a>)</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>        {</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>            <span class="comment">// server always uses the field</span></div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>            <span class="comment">// if neither, fallback to original field</span></div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>            <span class="comment">// fixes: https://github.com/MirrorNetworking/Mirror/issues/3447</span></div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a6a65dec5ade34544074c2f997932e17a">isServer</a> || !<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ab30e4e9deea5ea728bbf8910ba4aa0fc">isClient</a>)</div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>            {</div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>                <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">identityField</a>;</div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>            }</div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span> </div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>            <span class="comment">// client always looks up based on netId because objects might get in and out of range</span></div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>            <span class="comment">// over and over again, which shouldn&#39;t null them forever</span></div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>            NetworkClient.spawned.TryGetValue(<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">netId</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">out</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">identityField</a>);</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>            <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">identityField</a>;</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>        }</div>
</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span> </div>
<div class="foldopen" id="foldopen01008" data-start="{" data-end="}">
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a7b73bcc06f7d750ab4f3f86002590ba1"> 1008</a></span>        <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a7b73bcc06f7d750ab4f3f86002590ba1">SyncVarNetworkBehaviourEqual&lt;T&gt;</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newBehaviour</a>, <a class="code hl_struct" href="struct_mirror_1_1_network_behaviour_sync_var.html">NetworkBehaviourSyncVar</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncField</a>) <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">where</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> : <a class="code hl_class" href="class_mirror_1_1_network_behaviour.html">NetworkBehaviour</a></div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>        {</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = 0;</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>            <span class="keywordtype">byte</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newComponentIndex</a> = 0;</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newBehaviour</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>            {</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newBehaviour</a>.netId;</div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newComponentIndex</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newBehaviour</a>.ComponentIndex;</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> == 0)</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>                {</div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>                    <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogWarning(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;SetSyncVarNetworkIdentity NetworkIdentity {newBehaviour} has a zero netId. Maybe it is not spawned yet?&quot;</span>);</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>                }</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>            }</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span> </div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>            <span class="comment">// netId changed?</span></div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>            <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncField</a>.Equals(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newComponentIndex</a>);</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>        }</div>
</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span> </div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>        <span class="comment">// helper function for [SyncVar] NetworkIdentities.</span></div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>        <span class="comment">// dirtyBit is a mask like 00010</span></div>
<div class="foldopen" id="foldopen01028" data-start="{" data-end="}">
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#aada2f1108949129193836657bc419523"> 1028</a></span>        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#aada2f1108949129193836657bc419523">SetSyncVarNetworkBehaviour&lt;T&gt;</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newBehaviour</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">behaviourField</a>, ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_network_behaviour_sync_var.html">NetworkBehaviourSyncVar</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncField</a>) <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">where</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> : <a class="code hl_class" href="class_mirror_1_1_network_behaviour.html">NetworkBehaviour</a></div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>        {</div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>            <span class="keywordflow">if</span> (<a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a7893535938885576c5dcd4edd04e714e">GetSyncVarHookGuard</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>))</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span> </div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">uint</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = 0;</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>            <span class="keywordtype">byte</span> componentIndex = 0;</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newBehaviour</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>            {</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newBehaviour</a>.netId;</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>                componentIndex = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newBehaviour</a>.ComponentIndex;</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>                <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a> == 0)</div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>                {</div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>                    <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogWarning(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;{nameof(SetSyncVarNetworkBehaviour)} NetworkIdentity {newBehaviour} has a zero netId. Maybe it is not spawned yet?&quot;</span>);</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>                }</div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>            }</div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span> </div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncField</a> = <span class="keyword">new</span> <a class="code hl_struct" href="struct_mirror_1_1_network_behaviour_sync_var.html">NetworkBehaviourSyncVar</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newNetId</a>, componentIndex);</div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span> </div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>            <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a1ab0ad06e8cb2e7833852077042c8550">SetSyncVarDirtyBit</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>);</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span> </div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>            <span class="comment">// assign new one on the server, and in case we ever need it on client too</span></div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">behaviourField</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newBehaviour</a>;</div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span> </div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>            <span class="comment">// Debug.Log($&quot;SetSyncVarNetworkBehaviour NetworkIdentity {GetType().Name} bit [{dirtyBit}] netIdField:{oldField}-&gt;{syncField}&quot;);</span></div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>        }</div>
</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span> </div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>        <span class="comment">// helper function for [SyncVar] NetworkIdentities.</span></div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>        <span class="comment">// -&gt; ref GameObject as second argument makes OnDeserialize processing easier</span></div>
<div class="foldopen" id="foldopen01057" data-start="{" data-end="}">
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a34c1bc8a1e72ea0fe569cfb07eda2673"> 1057</a></span>        <span class="keyword">protected</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a34c1bc8a1e72ea0fe569cfb07eda2673">GetSyncVarNetworkBehaviour&lt;T&gt;</a>(<a class="code hl_struct" href="struct_mirror_1_1_network_behaviour_sync_var.html">NetworkBehaviourSyncVar</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncNetBehaviour</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">behaviourField</a>) <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">where</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> : <a class="code hl_class" href="class_mirror_1_1_network_behaviour.html">NetworkBehaviour</a></div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>        {</div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>            <span class="comment">// server always uses the field</span></div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>            <span class="comment">// if neither, fallback to original field</span></div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>            <span class="comment">// fixes: https://github.com/MirrorNetworking/Mirror/issues/3447</span></div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#a6a65dec5ade34544074c2f997932e17a">isServer</a> || !<a class="code hl_property" href="class_mirror_1_1_network_behaviour.html#ab30e4e9deea5ea728bbf8910ba4aa0fc">isClient</a>)</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>            {</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>                <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">behaviourField</a>;</div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>            }</div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span> </div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>            <span class="comment">// client always looks up based on netId because objects might get in and out of range</span></div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>            <span class="comment">// over and over again, which shouldn&#39;t null them forever</span></div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>            <span class="keywordflow">if</span> (!NetworkClient.spawned.TryGetValue(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncNetBehaviour</a>.netId, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">out</a> <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> identity))</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>            {</div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>            }</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span> </div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">behaviourField</a> = identity.NetworkBehaviours[<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncNetBehaviour</a>.componentIndex] <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">as</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a>;</div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>            <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">behaviourField</a>;</div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>        }</div>
</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span> </div>
<div class="foldopen" id="foldopen01078" data-start="{" data-end="}">
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a165200fe54551bad6700ba3ac3d5704c"> 1078</a></span>        <span class="keyword">protected</span> <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a165200fe54551bad6700ba3ac3d5704c">SyncVarEqual&lt;T&gt;</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">fieldValue</a>)</div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>        {</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>            <span class="comment">// newly initialized or changed value?</span></div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>            <span class="comment">// value.Equals(fieldValue) allocates without &#39;where T : IEquatable&#39;</span></div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>            <span class="comment">// seems like we use EqualityComparer to avoid allocations,</span></div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>            <span class="comment">// because not all SyncVars&lt;T&gt; are IEquatable</span></div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>            <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">EqualityComparer&lt;T&gt;</a>.Default.Equals(value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">fieldValue</a>);</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>        }</div>
</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span> </div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>        <span class="comment">// dirtyBit is a mask like 00010</span></div>
<div class="foldopen" id="foldopen01088" data-start="{" data-end="}">
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a4087b2993b045a197b9b653176411f05"> 1088</a></span>        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a4087b2993b045a197b9b653176411f05">SetSyncVar&lt;T&gt;</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> value, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ref</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">T</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">fieldValue</a>, ulong <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>)</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>        {</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>            <span class="comment">//Debug.Log($&quot;SetSyncVar {GetType().Name} bit:{dirtyBit} fieldValue:{value}&quot;);</span></div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>            <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a1ab0ad06e8cb2e7833852077042c8550">SetSyncVarDirtyBit</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">dirtyBit</a>);</div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">fieldValue</a> = value;</div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>        }</div>
</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span> </div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>        <span class="comment">// if a class has syncvars, then OnSerialize/OnDeserialize are added</span></div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>        <span class="comment">// automatically.</span></div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>        <span class="comment">//</span></div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>        <span class="comment">// initialState is true for full spawns, false for delta syncs.</span></div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>        <span class="comment">//   note: SyncVar hooks are only called when inital=false</span></div>
<div class="foldopen" id="foldopen01101" data-start="{" data-end="}">
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ad0c86b814419fe24140e171b77615a25"> 1101</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ad0c86b814419fe24140e171b77615a25">OnSerialize</a>(<a class="code hl_class" href="class_mirror_1_1_network_writer.html">NetworkWriter</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>, <span class="keywordtype">bool</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">initialState</a>)</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>        {</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>            SerializeSyncObjects(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">initialState</a>);</div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>            <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a97b2aa8a5ef6b5d4faefc9ead334b42d">SerializeSyncVars</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">initialState</a>);</div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>        }</div>
</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span> </div>
<div class="foldopen" id="foldopen01108" data-start="{" data-end="}">
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a26853c614ebc9c116a7d4f045d723be1"> 1108</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a26853c614ebc9c116a7d4f045d723be1">OnDeserialize</a>(<a class="code hl_class" href="class_mirror_1_1_network_reader.html">NetworkReader</a> reader, <span class="keywordtype">bool</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">initialState</a>)</div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>        {</div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>            DeserializeSyncObjects(reader, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">initialState</a>);</div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>            <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a79ce2238da87ce060a835113911f3bea">DeserializeSyncVars</a>(reader, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">initialState</a>);</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>        }</div>
</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span> </div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>        <span class="keywordtype">void</span> SerializeSyncObjects(<a class="code hl_class" href="class_mirror_1_1_network_writer.html">NetworkWriter</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>, <span class="keywordtype">bool</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">initialState</a>)</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>        {</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span>            <span class="comment">// if initialState: write all SyncVars.</span></div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>            <span class="comment">// otherwise write dirtyBits+dirty SyncVars</span></div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">initialState</a>)</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>                <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a597f21e94e780751677d197b2adf575d">SerializeObjectsAll</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>);</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>                <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ab4caecbf4dd7f46c18b239ddf2436a21">SerializeObjectsDelta</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>);</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>        }</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span> </div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span>        <span class="keywordtype">void</span> DeserializeSyncObjects(NetworkReader reader, <span class="keywordtype">bool</span> initialState)</div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>        {</div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>            <span class="keywordflow">if</span> (initialState)</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>            {</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span>                DeserializeObjectsAll(reader);</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>            }</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>            {</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span>                DeserializeObjectsDelta(reader);</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>            }</div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>        }</div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span> </div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>        <span class="comment">// USED BY WEAVER</span></div>
<div class="foldopen" id="foldopen01137" data-start="{" data-end="}">
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a97b2aa8a5ef6b5d4faefc9ead334b42d"> 1137</a></span>        <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a97b2aa8a5ef6b5d4faefc9ead334b42d">SerializeSyncVars</a>(<a class="code hl_class" href="class_mirror_1_1_network_writer.html">NetworkWriter</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>, <span class="keywordtype">bool</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">initialState</a>)</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>        {</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>            <span class="comment">// SyncVar are written here in subclass</span></div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span> </div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>            <span class="comment">// if initialState</span></div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>            <span class="comment">//   write all SyncVars</span></div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span>            <span class="comment">// else</span></div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>            <span class="comment">//   write syncVarDirtyBits</span></div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>            <span class="comment">//   write dirty SyncVars</span></div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>        }</div>
</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span> </div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>        <span class="comment">// USED BY WEAVER</span></div>
<div class="foldopen" id="foldopen01149" data-start="{" data-end="}">
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a79ce2238da87ce060a835113911f3bea"> 1149</a></span>        <span class="keyword">protected</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a79ce2238da87ce060a835113911f3bea">DeserializeSyncVars</a>(<a class="code hl_class" href="class_mirror_1_1_network_reader.html">NetworkReader</a> reader, <span class="keywordtype">bool</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">initialState</a>)</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>        {</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>            <span class="comment">// SyncVars are read here in subclass</span></div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span> </div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>            <span class="comment">// if initialState</span></div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>            <span class="comment">//   read all SyncVars</span></div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>            <span class="comment">// else</span></div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>            <span class="comment">//   read syncVarDirtyBits</span></div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>            <span class="comment">//   read dirty SyncVars</span></div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>        }</div>
</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span> </div>
<div class="foldopen" id="foldopen01160" data-start="{" data-end="}">
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a597f21e94e780751677d197b2adf575d"> 1160</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a597f21e94e780751677d197b2adf575d">SerializeObjectsAll</a>(<a class="code hl_class" href="class_mirror_1_1_network_writer.html">NetworkWriter</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>)</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>        {</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a> = 0; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a> &lt; <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>.Count; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a>++)</div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>            {</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>                <a class="code hl_class" href="class_mirror_1_1_sync_object.html">SyncObject</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncObject</a> = <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>[<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a>];</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncObject</a>.OnSerializeAll(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>);</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>            }</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>        }</div>
</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span> </div>
<div class="foldopen" id="foldopen01169" data-start="{" data-end="}">
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ab4caecbf4dd7f46c18b239ddf2436a21"> 1169</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ab4caecbf4dd7f46c18b239ddf2436a21">SerializeObjectsDelta</a>(<a class="code hl_class" href="class_mirror_1_1_network_writer.html">NetworkWriter</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>)</div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>        {</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>            <span class="comment">// write the mask</span></div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>.WriteULong(syncObjectDirtyBits);</div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span> </div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>            <span class="comment">// serializable objects, such as synclists</span></div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a> = 0; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a> &lt; <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>.Count; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a>++)</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>            {</div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>                <span class="comment">// check dirty mask at nth bit</span></div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>                <a class="code hl_class" href="class_mirror_1_1_sync_object.html">SyncObject</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncObject</a> = <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>[<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a>];</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>                <span class="keywordflow">if</span> ((syncObjectDirtyBits &amp; (1<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">UL</a> &lt;&lt; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a>)) != 0)</div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>                {</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>                    <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncObject</a>.OnSerializeDelta(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">writer</a>);</div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>                }</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>            }</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>        }</div>
</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span> </div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>        <span class="keyword">internal</span> <span class="keywordtype">void</span> DeserializeObjectsAll(<a class="code hl_class" href="class_mirror_1_1_network_reader.html">NetworkReader</a> reader)</div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>        {</div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a> = 0; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a> &lt; <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>.Count; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a>++)</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>            {</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>                <a class="code hl_class" href="class_mirror_1_1_sync_object.html">SyncObject</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncObject</a> = <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>[<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">i</a>];</div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">syncObject</a>.OnDeserializeAll(reader);</div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>            }</div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>        }</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span> </div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>        <span class="keyword">internal</span> <span class="keywordtype">void</span> DeserializeObjectsDelta(NetworkReader reader)</div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>        {</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>            ulong dirty = reader.ReadULong();</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>.Count; i++)</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>            {</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>                <span class="comment">// check dirty mask at nth bit</span></div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>                SyncObject syncObject = <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>[i];</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>                <span class="keywordflow">if</span> ((dirty &amp; (1UL &lt;&lt; i)) != 0)</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>                {</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span>                    syncObject.OnDeserializeDelta(reader);</div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>                }</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>            }</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span>        }</div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span> </div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>        <span class="comment">// safely serialize each component in a way that one reading too much or</span></div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>        <span class="comment">// too few bytes will show obvious, easy to resolve error messages.</span></div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>        <span class="comment">//</span></div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>        <span class="comment">// prevents the original UNET bug which started Mirror:</span></div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span>        <span class="comment">// https://github.com/vis2k/Mirror/issues/2617</span></div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>        <span class="comment">// where one component would read too much, and then all following reads</span></div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>        <span class="comment">// on other entities would be mismatched, causing the weirdest errors.</span></div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>        <span class="comment">//</span></div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span>        <span class="comment">// reads &lt;&lt;len, payload, len, payload, ...&gt;&gt; for 100% safety.</span></div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>        <span class="keyword">internal</span> <span class="keywordtype">void</span> Serialize(NetworkWriter writer, <span class="keywordtype">bool</span> initialState)</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>        {</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>            <span class="comment">// reserve length header to ensure the correct amount will be read.</span></div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>            <span class="comment">// originally we used a 4 byte header (too bandwidth heavy).</span></div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>            <span class="comment">// instead, let&#39;s &quot;&amp; 0xFF&quot; the size.</span></div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span>            <span class="comment">//</span></div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>            <span class="comment">// this is cleaner than barriers at the end of payload, because:</span></div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>            <span class="comment">// - ensures the correct safety is read _before_ payload.</span></div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>            <span class="comment">// - it&#39;s quite hard to break the check.</span></div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>            <span class="comment">//   a component would need to read/write the intented amount</span></div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>            <span class="comment">//   multiplied by 255 in order to miss the check.</span></div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span>            <span class="comment">//   with barriers, reading 1 byte too much may still succeed if the</span></div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>            <span class="comment">//   next component&#39;s first byte matches the expected barrier.</span></div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>            <span class="comment">// - we can still attempt to correct the invalid position via the</span></div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>            <span class="comment">//   safety length byte (we know that one is correct).</span></div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>            <span class="comment">//</span></div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>            <span class="comment">// it&#39;s just overall cleaner, and still low on bandwidth.</span></div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span> </div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>            <span class="comment">// write placeholder length byte</span></div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>            <span class="comment">// (jumping back later is WAY faster than allocating a temporary</span></div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span>            <span class="comment">//  writer for the payload, then writing payload.size, payload)</span></div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>            <span class="keywordtype">int</span> headerPosition = writer.Position;</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>            writer.WriteByte(0);</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>            <span class="keywordtype">int</span> contentPosition = writer.Position;</div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span> </div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>            <span class="comment">// write payload</span></div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>            <span class="keywordflow">try</span></div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>            {</div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>                <span class="comment">// note this may not write anything if no syncIntervals elapsed</span></div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>                <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ad0c86b814419fe24140e171b77615a25">OnSerialize</a>(writer, initialState);</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>            }</div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>            <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>            {</div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>                <span class="comment">// show a detailed error and let the user know what went wrong</span></div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogError($<span class="stringliteral">&quot;OnSerialize failed for: object={name} component={GetType()} sceneId={netIdentity.sceneId:X}\n\n{e}&quot;</span>);</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>            }</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span>            <span class="keywordtype">int</span> endPosition = writer.Position;</div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span> </div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>            <span class="comment">// fill in length hash as the last byte of the 4 byte length</span></div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>            writer.Position = headerPosition;</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>            <span class="keywordtype">int</span> size = endPosition - contentPosition;</div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span>            <span class="keywordtype">byte</span> safety = (byte)(size &amp; 0xFF);</div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>            writer.WriteByte(safety);</div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>            writer.Position = endPosition;</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span> </div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>            <span class="comment">//Debug.Log($&quot;OnSerializeSafely written for object {name} component:{GetType()} sceneId:{sceneId:X} header:{headerPosition} content:{contentPosition} end:{endPosition} contentSize:{endPosition - contentPosition}&quot;);</span></div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>        }</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span> </div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>        <span class="comment">// correct the read size with the 1 byte length hash (by mischa).</span></div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>        <span class="comment">// -&gt; the component most likely read a few too many/few bytes.</span></div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>        <span class="comment">// -&gt; we know the correct last byte of the expected size (=the safety).</span></div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>        <span class="comment">// -&gt; attempt to reconstruct the size via safety byte.</span></div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>        <span class="comment">//    it will be correct unless someone wrote way way too much,</span></div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>        <span class="comment">//    as in &gt; 255 bytes worth too much.</span></div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>        [MethodImpl(MethodImplOptions.AggressiveInlining)]</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>        <span class="keyword">internal</span> <span class="keyword">static</span> <span class="keywordtype">int</span> ErrorCorrection(<span class="keywordtype">int</span> size, <span class="keywordtype">byte</span> safety)</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span>        {</div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>            <span class="comment">// clear the last byte which most likely contains the error</span></div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>            uint cleared = (uint)size &amp; 0xFFFFFF00;</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span> </div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span>            <span class="comment">// insert the safety which we know to be correct</span></div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>            <span class="keywordflow">return</span> (<span class="keywordtype">int</span>)(cleared | safety);</div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>        }</div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span> </div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>        <span class="comment">// returns false in case of errors.</span></div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>        <span class="comment">// server needs to know in order to disconnect on error.</span></div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>        <span class="keyword">internal</span> <span class="keywordtype">bool</span> Deserialize(NetworkReader reader, <span class="keywordtype">bool</span> initialState)</div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span>        {</div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>            <span class="comment">// detect errors, but attempt to correct before returning</span></div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>            <span class="keywordtype">bool</span> result = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span> </div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span>            <span class="comment">// read 1 byte length hash safety &amp; capture beginning for size check</span></div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>            <span class="keywordtype">byte</span> safety = reader.ReadByte();</div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>            <span class="keywordtype">int</span> chunkStart = reader.Position;</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span> </div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>            <span class="comment">// call OnDeserialize and wrap it in a try-catch block so there&#39;s no</span></div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>            <span class="comment">// way to mess up another component&#39;s deserialization</span></div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>            <span class="keywordflow">try</span></div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>            {</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>                <span class="comment">//Debug.Log($&quot;OnDeserializeSafely: {name} component:{GetType()} sceneId:{sceneId:X} length:{contentSize}&quot;);</span></div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span>                <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a26853c614ebc9c116a7d4f045d723be1">OnDeserialize</a>(reader, initialState);</div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>            }</div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>            <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>            {</div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>                <span class="comment">// show a detailed error and let the user know what went wrong</span></div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogError($<span class="stringliteral">&quot;OnDeserialize failed Exception={e.GetType()} (see below) object={name} component={GetType()} netId={netId}. Possible Reasons:\n&quot;</span> +</div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>                               $<span class="stringliteral">&quot;  * Do {GetType()}&#39;s OnSerialize and OnDeserialize calls write the same amount of data? \n&quot;</span> +</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>                               $<span class="stringliteral">&quot;  * Was there an exception in {GetType()}&#39;s OnSerialize/OnDeserialize code?\n&quot;</span> +</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>                               $<span class="stringliteral">&quot;  * Are the server and client the exact same project?\n&quot;</span> +</div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>                               $<span class="stringliteral">&quot;  * Maybe this OnDeserialize call was meant for another GameObject? The sceneIds can easily get out of sync if the Hierarchy was modified only in the client OR the server. Try rebuilding both.\n\n&quot;</span> +</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span>                               $<span class="stringliteral">&quot;Exception {e}&quot;</span>);</div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>                result = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>            }</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span> </div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>            <span class="comment">// compare bytes read with length hash</span></div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>            <span class="keywordtype">int</span> size = reader.Position - chunkStart;</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span>            <span class="keywordtype">byte</span> sizeHash = (byte)(size &amp; 0xFF);</div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>            <span class="keywordflow">if</span> (sizeHash != safety)</div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>            {</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span>                <span class="comment">// warn the user.</span></div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>                <a class="code hl_typedef" href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a>.LogWarning($<span class="stringliteral">&quot;{name} (netId={netId}): {GetType()} OnDeserialize size mismatch. It read {size} bytes, which caused a size hash mismatch of {sizeHash:X2} vs. {safety:X2}. Make sure that OnSerialize and OnDeserialize write/read the same amount of data in all cases.&quot;</span>);</div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span> </div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>                <span class="comment">// attempt to fix the position, so the following components</span></div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>                <span class="comment">// don&#39;t all fail. this is very likely to work, unless the user</span></div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>                <span class="comment">// read more than 255 bytes too many / too few.</span></div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>                <span class="comment">//</span></div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>                <span class="comment">// see test: SerializationSizeMismatch.</span></div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>                <span class="keywordtype">int</span> correctedSize = ErrorCorrection(size, safety);</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>                reader.Position = chunkStart + correctedSize;</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span>                result = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>            }</div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span> </div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>            <span class="keywordflow">return</span> result;</div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>        }</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span> </div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>        <span class="keyword">internal</span> <span class="keywordtype">void</span> ResetSyncObjects()</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>        {</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span>            <span class="keywordflow">foreach</span> (SyncObject syncObject <span class="keywordflow">in</span> <a class="code hl_variable" href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">syncObjects</a>)</div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>            {</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>                syncObject.Reset();</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span>            }</div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>        }</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span> </div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a7849fd960925fc37005a1b8f2aa065b3"> 1342</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a7849fd960925fc37005a1b8f2aa065b3">OnStartServer</a>() {}</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span> </div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a27dc77be5d2117b34157b3836f333690"> 1345</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a27dc77be5d2117b34157b3836f333690">OnStopServer</a>() {}</div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span> </div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a699d2fda0c0c8843d8964ffed01d016c"> 1348</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a699d2fda0c0c8843d8964ffed01d016c">OnStartClient</a>() {}</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span> </div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#adabae0597e1228ad256cb35d1616c1ca"> 1351</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#adabae0597e1228ad256cb35d1616c1ca">OnStopClient</a>() {}</div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span> </div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a8506dcb5c3cbc297a667e795cc9eafd0"> 1354</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a8506dcb5c3cbc297a667e795cc9eafd0">OnStartLocalPlayer</a>() {}</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span> </div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#ae13861838fcd7a6eec25661937196465"> 1357</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#ae13861838fcd7a6eec25661937196465">OnStopLocalPlayer</a>() {}</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span> </div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a1e36e4640f967426ffc113e26e649345"> 1360</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a1e36e4640f967426ffc113e26e649345">OnStartAuthority</a>() {}</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span> </div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#afe494cde0781a38644c80ec14e177f59"> 1363</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#afe494cde0781a38644c80ec14e177f59">OnStopAuthority</a>() {}</div>
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"> 1364</span> </div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>        <span class="comment">// Weaver injects this into inheriting classes to return true.</span></div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>        <span class="comment">// allows runtime &amp; tests to check if a type was weaved.</span></div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">EditorBrowsable</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">EditorBrowsableState</a>.Never)]</div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_behaviour.html#a2f28123968971616dc3a9d900f6b0bf1"> 1368</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="class_mirror_1_1_network_behaviour.html#a2f28123968971616dc3a9d900f6b0bf1">Weaved</a>() =&gt; <span class="keyword">false</span>;</div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>    }</div>
</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>}</div>
<div class="ttc" id="a_worker_thread_8cs_html_a0100be52d45f14348918ea69ec09f959"><div class="ttname"><a href="_worker_thread_8cs.html#a0100be52d45f14348918ea69ec09f959">Debug</a></div><div class="ttdeci">UnityEngine.Debug Debug</div><div class="ttdef"><b>Definition</b> <a href="_worker_thread_8cs_source.html#l00008">WorkerThread.cs:8</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html">Mirror.NetworkBehaviour</a></div><div class="ttdoc">Base class for networked components.</div><div class="ttdef"><b>Definition</b> <a href="#l00025">NetworkBehaviour.cs:26</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a0915f57f9b3f057d544235740e920a2f"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a0915f57f9b3f057d544235740e920a2f">Mirror.NetworkBehaviour.ClearAllDirtyBits</a></div><div class="ttdeci">void ClearAllDirtyBits()</div><div class="ttdoc">Clears all the dirty bits that were set by SetSyncVarDirtyBit() (formally SetDirtyBits)</div><div class="ttdef"><b>Definition</b> <a href="#l00205">NetworkBehaviour.cs:205</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a097af64f99e7b7b5cadcd745ef154399"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a097af64f99e7b7b5cadcd745ef154399">Mirror.NetworkBehaviour.OnValidate</a></div><div class="ttdeci">virtual void OnValidate()</div><div class="ttdef"><b>Definition</b> <a href="#l00305">NetworkBehaviour.cs:305</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a09f7e5bb2181018bc28fa2c29ed09e8c"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a09f7e5bb2181018bc28fa2c29ed09e8c">Mirror.NetworkBehaviour.isLocalPlayer</a></div><div class="ttdeci">bool isLocalPlayer</div><div class="ttdoc">True if this object is the the client's own local player.</div><div class="ttdef"><b>Definition</b> <a href="#l00058">NetworkBehaviour.cs:58</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a13320ea9c100ddd1a0c7b31682bc197e"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a13320ea9c100ddd1a0c7b31682bc197e">Mirror.NetworkBehaviour.SendCommandInternal</a></div><div class="ttdeci">void SendCommandInternal(string functionFullName, int functionHashCode, NetworkWriter writer, int channelId, bool requiresAuthority=true)</div><div class="ttdef"><b>Definition</b> <a href="#l00334">NetworkBehaviour.cs:334</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a165200fe54551bad6700ba3ac3d5704c"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a165200fe54551bad6700ba3ac3d5704c">Mirror.NetworkBehaviour.SyncVarEqual&lt; T &gt;</a></div><div class="ttdeci">static bool SyncVarEqual&lt; T &gt;(T value, ref T fieldValue)</div><div class="ttdef"><b>Definition</b> <a href="#l01078">NetworkBehaviour.cs:1078</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a1ab0ad06e8cb2e7833852077042c8550"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a1ab0ad06e8cb2e7833852077042c8550">Mirror.NetworkBehaviour.SetSyncVarDirtyBit</a></div><div class="ttdeci">void SetSyncVarDirtyBit(ulong dirtyBit)</div><div class="ttdoc">Set as dirty so that it's synced to clients again.</div><div class="ttdef"><b>Definition</b> <a href="#l00176">NetworkBehaviour.cs:176</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a1e36e4640f967426ffc113e26e649345"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a1e36e4640f967426ffc113e26e649345">Mirror.NetworkBehaviour.OnStartAuthority</a></div><div class="ttdeci">virtual void OnStartAuthority()</div><div class="ttdoc">Like Start(), but only called for objects the client has authority over.</div><div class="ttdef"><b>Definition</b> <a href="#l01360">NetworkBehaviour.cs:1360</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a2561021cd1fc5a4fe504a9822c281d11"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a2561021cd1fc5a4fe504a9822c281d11">Mirror.NetworkBehaviour.netIdentity</a></div><div class="ttdeci">NetworkIdentity netIdentity</div><div class="ttdoc">Returns the NetworkIdentity of this object.</div><div class="ttdef"><b>Definition</b> <a href="#l00121">NetworkBehaviour.cs:121</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a26853c614ebc9c116a7d4f045d723be1"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a26853c614ebc9c116a7d4f045d723be1">Mirror.NetworkBehaviour.OnDeserialize</a></div><div class="ttdeci">virtual void OnDeserialize(NetworkReader reader, bool initialState)</div><div class="ttdoc">Override to do custom deserialization (instead of SyncVars/SyncLists). Use OnSerialize too.</div><div class="ttdef"><b>Definition</b> <a href="#l01108">NetworkBehaviour.cs:1108</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a27dc77be5d2117b34157b3836f333690"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a27dc77be5d2117b34157b3836f333690">Mirror.NetworkBehaviour.OnStopServer</a></div><div class="ttdeci">virtual void OnStopServer()</div><div class="ttdoc">Stop event, only called on server and host.</div><div class="ttdef"><b>Definition</b> <a href="#l01345">NetworkBehaviour.cs:1345</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a2b4fc9f99fffd61bf67b4e7995d1d4bb"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a2b4fc9f99fffd61bf67b4e7995d1d4bb">Mirror.NetworkBehaviour.SetSyncVarNetworkIdentity</a></div><div class="ttdeci">void SetSyncVarNetworkIdentity(NetworkIdentity newIdentity, ref NetworkIdentity identityField, ulong dirtyBit, ref uint netIdField)</div><div class="ttdef"><b>Definition</b> <a href="#l00968">NetworkBehaviour.cs:968</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a2f28123968971616dc3a9d900f6b0bf1"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a2f28123968971616dc3a9d900f6b0bf1">Mirror.NetworkBehaviour.Weaved</a></div><div class="ttdeci">virtual bool Weaved()</div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a34c1bc8a1e72ea0fe569cfb07eda2673"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a34c1bc8a1e72ea0fe569cfb07eda2673">Mirror.NetworkBehaviour.GetSyncVarNetworkBehaviour&lt; T &gt;</a></div><div class="ttdeci">T GetSyncVarNetworkBehaviour&lt; T &gt;(NetworkBehaviourSyncVar syncNetBehaviour, ref T behaviourField)</div><div class="ttdef"><b>Definition</b> <a href="#l01057">NetworkBehaviour.cs:1057</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a39df979507646798f2829b6f642b27fc"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a39df979507646798f2829b6f642b27fc">Mirror.NetworkBehaviour.GeneratedSyncVarDeserialize&lt; T &gt;</a></div><div class="ttdeci">void GeneratedSyncVarDeserialize&lt; T &gt;(ref T field, Action&lt; T, T &gt; OnChanged, T value)</div><div class="ttdef"><b>Definition</b> <a href="#l00767">NetworkBehaviour.cs:767</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a3c5d9ef0f604ec39acc7f03269d80656"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a3c5d9ef0f604ec39acc7f03269d80656">Mirror.NetworkBehaviour.InitSyncObject</a></div><div class="ttdeci">void InitSyncObject(SyncObject syncObject)</div><div class="ttdef"><b>Definition</b> <a href="#l00222">NetworkBehaviour.cs:222</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a3e6dfe7de8eac46346abcc3153c6a0c8"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a3e6dfe7de8eac46346abcc3153c6a0c8">Mirror.NetworkBehaviour.syncDirection</a></div><div class="ttdeci">SyncDirection syncDirection</div><div class="ttdoc">Sync direction for OnSerialize. ServerToClient by default. ClientToServer for client authority.</div><div class="ttdef"><b>Definition</b> <a href="#l00029">NetworkBehaviour.cs:29</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a4087b2993b045a197b9b653176411f05"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a4087b2993b045a197b9b653176411f05">Mirror.NetworkBehaviour.SetSyncVar&lt; T &gt;</a></div><div class="ttdeci">void SetSyncVar&lt; T &gt;(T value, ref T fieldValue, ulong dirtyBit)</div><div class="ttdef"><b>Definition</b> <a href="#l01088">NetworkBehaviour.cs:1088</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a46b6f2edcee89cede23050a2177098df"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a46b6f2edcee89cede23050a2177098df">Mirror.NetworkBehaviour.GetSyncVarNetworkIdentity</a></div><div class="ttdeci">NetworkIdentity GetSyncVarNetworkIdentity(uint netId, ref NetworkIdentity identityField)</div><div class="ttdef"><b>Definition</b> <a href="#l00992">NetworkBehaviour.cs:992</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a4bb1e7724acf59e001659f0fe0b90c8f"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a4bb1e7724acf59e001659f0fe0b90c8f">Mirror.NetworkBehaviour.syncVarDirtyBits</a></div><div class="ttdeci">ulong syncVarDirtyBits</div><div class="ttdef"><b>Definition</b> <a href="#l00139">NetworkBehaviour.cs:139</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a597f21e94e780751677d197b2adf575d"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a597f21e94e780751677d197b2adf575d">Mirror.NetworkBehaviour.SerializeObjectsAll</a></div><div class="ttdeci">void SerializeObjectsAll(NetworkWriter writer)</div><div class="ttdef"><b>Definition</b> <a href="#l01160">NetworkBehaviour.cs:1160</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a64f5bf824df6960393ff87eecfd4e024"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a64f5bf824df6960393ff87eecfd4e024">Mirror.NetworkBehaviour.SetSyncVarHookGuard</a></div><div class="ttdeci">void SetSyncVarHookGuard(ulong dirtyBit, bool value)</div><div class="ttdef"><b>Definition</b> <a href="#l00157">NetworkBehaviour.cs:157</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a66bc072c4c616a533758bad064472cb9"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a66bc072c4c616a533758bad064472cb9">Mirror.NetworkBehaviour.GeneratedSyncVarSetter_NetworkIdentity</a></div><div class="ttdeci">void GeneratedSyncVarSetter_NetworkIdentity(NetworkIdentity value, ref NetworkIdentity field, ulong dirtyBit, Action&lt; NetworkIdentity, NetworkIdentity &gt; OnChanged, ref uint netIdField)</div><div class="ttdef"><b>Definition</b> <a href="#l00583">NetworkBehaviour.cs:583</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a699d2fda0c0c8843d8964ffed01d016c"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a699d2fda0c0c8843d8964ffed01d016c">Mirror.NetworkBehaviour.OnStartClient</a></div><div class="ttdeci">virtual void OnStartClient()</div><div class="ttdoc">Like Start(), but only called on client and host.</div><div class="ttdef"><b>Definition</b> <a href="#l01348">NetworkBehaviour.cs:1348</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a6a65dec5ade34544074c2f997932e17a"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a6a65dec5ade34544074c2f997932e17a">Mirror.NetworkBehaviour.isServer</a></div><div class="ttdeci">bool isServer</div><div class="ttdoc">True if this object is on the server and has been spawned.</div><div class="ttdef"><b>Definition</b> <a href="#l00052">NetworkBehaviour.cs:52</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a6dd9c2d716835e849cb18d83a9cec9b0"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a6dd9c2d716835e849cb18d83a9cec9b0">Mirror.NetworkBehaviour.SyncVarNetworkIdentityEqual</a></div><div class="ttdeci">static bool SyncVarNetworkIdentityEqual(NetworkIdentity newIdentity, uint netIdField)</div><div class="ttdef"><b>Definition</b> <a href="#l00707">NetworkBehaviour.cs:707</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a74b10961d91bff24790a9f63eaece88e"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a74b10961d91bff24790a9f63eaece88e">Mirror.NetworkBehaviour.GeneratedSyncVarDeserialize_NetworkBehaviour&lt; T &gt;</a></div><div class="ttdeci">void GeneratedSyncVarDeserialize_NetworkBehaviour&lt; T &gt;(ref T field, Action&lt; T, T &gt; OnChanged, NetworkReader reader, ref NetworkBehaviourSyncVar netIdField)</div><div class="ttdef"><b>Definition</b> <a href="#l00949">NetworkBehaviour.cs:949</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a76bf9eb3b49700f653620bbf5b7aa826"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a76bf9eb3b49700f653620bbf5b7aa826">Mirror.NetworkBehaviour.IsDirty</a></div><div class="ttdeci">bool IsDirty()</div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a7849fd960925fc37005a1b8f2aa065b3"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a7849fd960925fc37005a1b8f2aa065b3">Mirror.NetworkBehaviour.OnStartServer</a></div><div class="ttdeci">virtual void OnStartServer()</div><div class="ttdoc">Like Start(), but only called on server and host.</div><div class="ttdef"><b>Definition</b> <a href="#l01342">NetworkBehaviour.cs:1342</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a7893535938885576c5dcd4edd04e714e"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a7893535938885576c5dcd4edd04e714e">Mirror.NetworkBehaviour.GetSyncVarHookGuard</a></div><div class="ttdeci">bool GetSyncVarHookGuard(ulong dirtyBit)</div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a79ce2238da87ce060a835113911f3bea"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a79ce2238da87ce060a835113911f3bea">Mirror.NetworkBehaviour.DeserializeSyncVars</a></div><div class="ttdeci">virtual void DeserializeSyncVars(NetworkReader reader, bool initialState)</div><div class="ttdef"><b>Definition</b> <a href="#l01149">NetworkBehaviour.cs:1149</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a7b73bcc06f7d750ab4f3f86002590ba1"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a7b73bcc06f7d750ab4f3f86002590ba1">Mirror.NetworkBehaviour.SyncVarNetworkBehaviourEqual&lt; T &gt;</a></div><div class="ttdeci">static bool SyncVarNetworkBehaviourEqual&lt; T &gt;(T newBehaviour, NetworkBehaviourSyncVar syncField)</div><div class="ttdef"><b>Definition</b> <a href="#l01008">NetworkBehaviour.cs:1008</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a82c8ade1ff1252703a15a40c532e0f06"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a82c8ade1ff1252703a15a40c532e0f06">Mirror.NetworkBehaviour.GeneratedSyncVarDeserialize_NetworkIdentity</a></div><div class="ttdeci">void GeneratedSyncVarDeserialize_NetworkIdentity(ref NetworkIdentity field, Action&lt; NetworkIdentity, NetworkIdentity &gt; OnChanged, NetworkReader reader, ref uint netIdField)</div><div class="ttdef"><b>Definition</b> <a href="#l00886">NetworkBehaviour.cs:886</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a8506dcb5c3cbc297a667e795cc9eafd0"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a8506dcb5c3cbc297a667e795cc9eafd0">Mirror.NetworkBehaviour.OnStartLocalPlayer</a></div><div class="ttdeci">virtual void OnStartLocalPlayer()</div><div class="ttdoc">Like Start(), but only called on client and host for the local player object.</div><div class="ttdef"><b>Definition</b> <a href="#l01354">NetworkBehaviour.cs:1354</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a8ace9ae035053dab9538482ff74d62ec"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a8ace9ae035053dab9538482ff74d62ec">Mirror.NetworkBehaviour.isServerOnly</a></div><div class="ttdeci">bool isServerOnly</div><div class="ttdoc">True if this object is on the server-only, not host.</div><div class="ttdef"><b>Definition</b> <a href="#l00061">NetworkBehaviour.cs:61</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a8dc212b0e1cdec022380a524a57b936a"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a8dc212b0e1cdec022380a524a57b936a">Mirror.NetworkBehaviour.authority</a></div><div class="ttdeci">bool authority</div><div class="ttdoc">authority is true if we are allowed to modify this component's state. On server, it's true if SyncDir...</div><div class="ttdef"><b>Definition</b> <a href="#l00085">NetworkBehaviour.cs:86</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a910716f95a3bf7c8f834221bb39ca508"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a910716f95a3bf7c8f834221bb39ca508">Mirror.NetworkBehaviour.SyncVarGameObjectEqual</a></div><div class="ttdeci">static bool SyncVarGameObjectEqual(GameObject newGameObject, uint netIdField)</div><div class="ttdef"><b>Definition</b> <a href="#l00639">NetworkBehaviour.cs:639</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a94dbe38f0930d3bbde326d0eed7b6f83"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a94dbe38f0930d3bbde326d0eed7b6f83">Mirror.NetworkBehaviour.syncInterval</a></div><div class="ttdeci">float syncInterval</div><div class="ttdoc">sync interval for OnSerialize (in seconds)</div><div class="ttdef"><b>Definition</b> <a href="#l00046">NetworkBehaviour.cs:46</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_a97b2aa8a5ef6b5d4faefc9ead334b42d"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#a97b2aa8a5ef6b5d4faefc9ead334b42d">Mirror.NetworkBehaviour.SerializeSyncVars</a></div><div class="ttdeci">virtual void SerializeSyncVars(NetworkWriter writer, bool initialState)</div><div class="ttdef"><b>Definition</b> <a href="#l01137">NetworkBehaviour.cs:1137</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_aa490124a374f6e82a780926b2d11fc23"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#aa490124a374f6e82a780926b2d11fc23">Mirror.NetworkBehaviour.connectionToServer</a></div><div class="ttdeci">NetworkConnection connectionToServer</div><div class="ttdoc">Client's network connection to the server. This is only valid for player objects on the client.</div><div class="ttdef"><b>Definition</b> <a href="#l00105">NetworkBehaviour.cs:105</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_aa54c7efe36af763380824091dd7e6159"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#aa54c7efe36af763380824091dd7e6159">Mirror.NetworkBehaviour.SetDirty</a></div><div class="ttdeci">void SetDirty()</div><div class="ttdoc">Set as dirty to trigger OnSerialize &amp; send. Dirty bits are cleared after the send.</div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_aaa6e5aa4f2429c1b24d9fc58a354ade9"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#aaa6e5aa4f2429c1b24d9fc58a354ade9">Mirror.NetworkBehaviour.GeneratedSyncVarSetter&lt; T &gt;</a></div><div class="ttdeci">void GeneratedSyncVarSetter&lt; T &gt;(T value, ref T field, ulong dirtyBit, Action&lt; T, T &gt; OnChanged)</div><div class="ttdef"><b>Definition</b> <a href="#l00529">NetworkBehaviour.cs:529</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_aada2f1108949129193836657bc419523"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#aada2f1108949129193836657bc419523">Mirror.NetworkBehaviour.SetSyncVarNetworkBehaviour&lt; T &gt;</a></div><div class="ttdeci">void SetSyncVarNetworkBehaviour&lt; T &gt;(T newBehaviour, ref T behaviourField, ulong dirtyBit, ref NetworkBehaviourSyncVar syncField)</div><div class="ttdef"><b>Definition</b> <a href="#l01028">NetworkBehaviour.cs:1028</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ab30e4e9deea5ea728bbf8910ba4aa0fc"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ab30e4e9deea5ea728bbf8910ba4aa0fc">Mirror.NetworkBehaviour.isClient</a></div><div class="ttdeci">bool isClient</div><div class="ttdoc">True if this object is on the client and has been spawned by the server.</div><div class="ttdef"><b>Definition</b> <a href="#l00055">NetworkBehaviour.cs:55</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ab4caecbf4dd7f46c18b239ddf2436a21"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ab4caecbf4dd7f46c18b239ddf2436a21">Mirror.NetworkBehaviour.SerializeObjectsDelta</a></div><div class="ttdeci">void SerializeObjectsDelta(NetworkWriter writer)</div><div class="ttdef"><b>Definition</b> <a href="#l01169">NetworkBehaviour.cs:1169</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ab794f957ea97db9dec659cbbfe9208f4"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ab794f957ea97db9dec659cbbfe9208f4">Mirror.NetworkBehaviour.GetSyncVarGameObject</a></div><div class="ttdeci">GameObject GetSyncVarGameObject(uint netId, ref GameObject gameObjectField)</div><div class="ttdef"><b>Definition</b> <a href="#l00686">NetworkBehaviour.cs:686</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_abb008e87f9af42274a51453cb2717bec"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#abb008e87f9af42274a51453cb2717bec">Mirror.NetworkBehaviour.connectionToClient</a></div><div class="ttdeci">NetworkConnectionToClient connectionToClient</div><div class="ttdoc">Server's network connection to the client. This is only valid for player objects on the server.</div><div class="ttdef"><b>Definition</b> <a href="#l00108">NetworkBehaviour.cs:108</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_abe78215943243c0ee91c2bd9a0057915"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#abe78215943243c0ee91c2bd9a0057915">Mirror.NetworkBehaviour.isClientOnly</a></div><div class="ttdeci">bool isClientOnly</div><div class="ttdoc">True if this object is on the client-only, not host.</div><div class="ttdef"><b>Definition</b> <a href="#l00064">NetworkBehaviour.cs:64</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ac3e14f45a522cec35780c9afc367e985"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ac3e14f45a522cec35780c9afc367e985">Mirror.NetworkBehaviour.SetSyncVarGameObject</a></div><div class="ttdeci">void SetSyncVarGameObject(GameObject newGameObject, ref GameObject gameObjectField, ulong dirtyBit, ref uint netIdField)</div><div class="ttdef"><b>Definition</b> <a href="#l00659">NetworkBehaviour.cs:659</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ac9c5caa586acee344c189db183e95efe"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ac9c5caa586acee344c189db183e95efe">Mirror.NetworkBehaviour.syncObjects</a></div><div class="ttdeci">readonly List&lt; SyncObject &gt; syncObjects</div><div class="ttdef"><b>Definition</b> <a href="#l00111">NetworkBehaviour.cs:111</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_acf0616ac2f967bdd47bf0f579cefe8a7"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#acf0616ac2f967bdd47bf0f579cefe8a7">Mirror.NetworkBehaviour.syncMode</a></div><div class="ttdeci">SyncMode syncMode</div><div class="ttdoc">sync mode for OnSerialize</div><div class="ttdef"><b>Definition</b> <a href="#l00034">NetworkBehaviour.cs:34</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ad0c86b814419fe24140e171b77615a25"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ad0c86b814419fe24140e171b77615a25">Mirror.NetworkBehaviour.OnSerialize</a></div><div class="ttdeci">virtual void OnSerialize(NetworkWriter writer, bool initialState)</div><div class="ttdoc">Override to do custom serialization (instead of SyncVars/SyncLists). Use OnDeserialize too.</div><div class="ttdef"><b>Definition</b> <a href="#l01101">NetworkBehaviour.cs:1101</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ad6398cf02a70ce8bd887d94ab4ca3766"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ad6398cf02a70ce8bd887d94ab4ca3766">Mirror.NetworkBehaviour.ComponentIndex</a></div><div class="ttdeci">byte ComponentIndex</div><div class="ttdoc">Returns the index of the component on this object.</div><div class="ttdef"><b>Definition</b> <a href="#l00124">NetworkBehaviour.cs:124</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_adabae0597e1228ad256cb35d1616c1ca"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#adabae0597e1228ad256cb35d1616c1ca">Mirror.NetworkBehaviour.OnStopClient</a></div><div class="ttdeci">virtual void OnStopClient()</div><div class="ttdoc">Stop event, only called on client and host.</div><div class="ttdef"><b>Definition</b> <a href="#l01351">NetworkBehaviour.cs:1351</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ae13861838fcd7a6eec25661937196465"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ae13861838fcd7a6eec25661937196465">Mirror.NetworkBehaviour.OnStopLocalPlayer</a></div><div class="ttdeci">virtual void OnStopLocalPlayer()</div><div class="ttdoc">Stop event, but only called on client and host for the local player object.</div><div class="ttdef"><b>Definition</b> <a href="#l01357">NetworkBehaviour.cs:1357</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ae188c39e2bc2ec519d25f285444bc5fc"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ae188c39e2bc2ec519d25f285444bc5fc">Mirror.NetworkBehaviour.isOwned</a></div><div class="ttdeci">bool isOwned</div><div class="ttdoc">isOwned is true on the client if this NetworkIdentity is one of the .owned entities of our connection...</div><div class="ttdef"><b>Definition</b> <a href="#l00068">NetworkBehaviour.cs:68</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ae3b05fd1b0d85bc30073aeb8910d4b68"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ae3b05fd1b0d85bc30073aeb8910d4b68">Mirror.NetworkBehaviour.SendRPCInternal</a></div><div class="ttdeci">void SendRPCInternal(string functionFullName, int functionHashCode, NetworkWriter writer, int channelId, bool includeOwner)</div><div class="ttdef"><b>Definition</b> <a href="#l00398">NetworkBehaviour.cs:398</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ae55762932698b668c2deb366833660e1"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ae55762932698b668c2deb366833660e1">Mirror.NetworkBehaviour.GeneratedSyncVarDeserialize_GameObject</a></div><div class="ttdeci">void GeneratedSyncVarDeserialize_GameObject(ref GameObject field, Action&lt; GameObject, GameObject &gt; OnChanged, NetworkReader reader, ref uint netIdField)</div><div class="ttdef"><b>Definition</b> <a href="#l00824">NetworkBehaviour.cs:824</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ae55b16404368518999a51bfd2f17ef1e"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ae55b16404368518999a51bfd2f17ef1e">Mirror.NetworkBehaviour.GeneratedSyncVarSetter_GameObject</a></div><div class="ttdeci">void GeneratedSyncVarSetter_GameObject(GameObject value, ref GameObject field, ulong dirtyBit, Action&lt; GameObject, GameObject &gt; OnChanged, ref uint netIdField)</div><div class="ttdef"><b>Definition</b> <a href="#l00556">NetworkBehaviour.cs:556</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_ae90a46be8160b84d1256c397718f7ff8"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#ae90a46be8160b84d1256c397718f7ff8">Mirror.NetworkBehaviour.netId</a></div><div class="ttdeci">uint netId</div><div class="ttdoc">The unique network Id of this object (unique at runtime).</div><div class="ttdef"><b>Definition</b> <a href="#l00101">NetworkBehaviour.cs:101</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_af21027522544fbe6f98d2b665389ddfb"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#af21027522544fbe6f98d2b665389ddfb">Mirror.NetworkBehaviour.SendTargetRPCInternal</a></div><div class="ttdeci">void SendTargetRPCInternal(NetworkConnection conn, string functionFullName, int functionHashCode, NetworkWriter writer, int channelId)</div><div class="ttdef"><b>Definition</b> <a href="#l00452">NetworkBehaviour.cs:452</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_afbdeb97fb4bb823233a5d7805c0e5a5c"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#afbdeb97fb4bb823233a5d7805c0e5a5c">Mirror.NetworkBehaviour.GeneratedSyncVarSetter_NetworkBehaviour&lt; T &gt;</a></div><div class="ttdeci">void GeneratedSyncVarSetter_NetworkBehaviour&lt; T &gt;(T value, ref T field, ulong dirtyBit, Action&lt; T, T &gt; OnChanged, ref NetworkBehaviourSyncVar netIdField)</div><div class="ttdef"><b>Definition</b> <a href="#l00610">NetworkBehaviour.cs:610</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_behaviour_html_afe494cde0781a38644c80ec14e177f59"><div class="ttname"><a href="class_mirror_1_1_network_behaviour.html#afe494cde0781a38644c80ec14e177f59">Mirror.NetworkBehaviour.OnStopAuthority</a></div><div class="ttdeci">virtual void OnStopAuthority()</div><div class="ttdoc">Stop event, only called for objects the client has authority over.</div><div class="ttdef"><b>Definition</b> <a href="#l01363">NetworkBehaviour.cs:1363</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_connection_html"><div class="ttname"><a href="class_mirror_1_1_network_connection.html">Mirror.NetworkConnection</a></div><div class="ttdoc">Base NetworkConnection class for server-to-client and client-to-server connection.</div><div class="ttdef"><b>Definition</b> <a href="_mirror_2_core_2_network_connection_8cs_source.html#l00009">NetworkConnection.cs:10</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_connection_html_a94362bc21882fa2d34df1235d706b1f7"><div class="ttname"><a href="class_mirror_1_1_network_connection.html#a94362bc21882fa2d34df1235d706b1f7">Mirror.NetworkConnection.isReady</a></div><div class="ttdeci">bool isReady</div><div class="ttdoc">A server connection is ready after joining the game world.</div><div class="ttdef"><b>Definition</b> <a href="_mirror_2_core_2_network_connection_8cs_source.html#l00028">NetworkConnection.cs:28</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_connection_to_client_html"><div class="ttname"><a href="class_mirror_1_1_network_connection_to_client.html">Mirror.NetworkConnectionToClient</a></div><div class="ttdef"><b>Definition</b> <a href="_network_connection_to_client_8cs_source.html#l00008">NetworkConnectionToClient.cs:9</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html"><div class="ttname"><a href="class_mirror_1_1_network_identity.html">Mirror.NetworkIdentity</a></div><div class="ttdoc">NetworkIdentity identifies objects across the network.</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00041">NetworkIdentity.cs:42</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html_a0a3bb71dd8fc37492957fe1bdbb7955e"><div class="ttname"><a href="class_mirror_1_1_network_identity.html#a0a3bb71dd8fc37492957fe1bdbb7955e">Mirror.NetworkIdentity.isClient</a></div><div class="ttdeci">bool isClient</div><div class="ttdoc">Returns true if running as a client and this object was spawned by a server.</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00055">NetworkIdentity.cs:55</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html_a32967ba9a8a00ebe0e39b897030f422e"><div class="ttname"><a href="class_mirror_1_1_network_identity.html#a32967ba9a8a00ebe0e39b897030f422e">Mirror.NetworkIdentity.observers</a></div><div class="ttdeci">readonly Dictionary&lt; int, NetworkConnectionToClient &gt; observers</div><div class="ttdoc">The set of network connections (players) that can see this object.</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00100">NetworkIdentity.cs:100</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html_a3752b290380dc9ec029ddd86af8dc206"><div class="ttname"><a href="class_mirror_1_1_network_identity.html#a3752b290380dc9ec029ddd86af8dc206">Mirror.NetworkIdentity.netId</a></div><div class="ttdeci">uint netId</div><div class="ttdoc">The unique network Id of this object (unique at runtime).</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00104">NetworkIdentity.cs:104</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html_a45b20df7d45211189befe124e3836f3c"><div class="ttname"><a href="class_mirror_1_1_network_identity.html#a45b20df7d45211189befe124e3836f3c">Mirror.NetworkIdentity.isServer</a></div><div class="ttdeci">bool isServer</div><div class="ttdoc">Returns true if NetworkServer.active and server is not stopped.</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00070">NetworkIdentity.cs:70</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html_a7224507781dad1ac9cb724242cf3a653"><div class="ttname"><a href="class_mirror_1_1_network_identity.html#a7224507781dad1ac9cb724242cf3a653">Mirror.NetworkIdentity.isLocalPlayer</a></div><div class="ttdeci">bool isLocalPlayer</div><div class="ttdoc">Return true if this object represents the player on the local machine.</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00084">NetworkIdentity.cs:84</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html_a91ce5068c8b40a1479fe0e6cd7ea9a17"><div class="ttname"><a href="class_mirror_1_1_network_identity.html#a91ce5068c8b40a1479fe0e6cd7ea9a17">Mirror.NetworkIdentity.isOwned</a></div><div class="ttdeci">bool isOwned</div><div class="ttdoc">isOwned is true on the client if this NetworkIdentity is one of the .owned entities of our connection...</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00094">NetworkIdentity.cs:94</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html_aa50d597abe0b493dcacbce7856b4f03a"><div class="ttname"><a href="class_mirror_1_1_network_identity.html#aa50d597abe0b493dcacbce7856b4f03a">Mirror.NetworkIdentity.isServerOnly</a></div><div class="ttdeci">bool isServerOnly</div><div class="ttdoc">True if this object only exists on the server.</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00087">NetworkIdentity.cs:87</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html_ab22c9e32ea015847c8d765d38b2620d4"><div class="ttname"><a href="class_mirror_1_1_network_identity.html#ab22c9e32ea015847c8d765d38b2620d4">Mirror.NetworkIdentity.connectionToClient</a></div><div class="ttdeci">NetworkConnectionToClient connectionToClient</div><div class="ttdoc">Server's network connection to the client. This is only valid for client-owned objects (including the...</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00174">NetworkIdentity.cs:175</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html_ac5077f1ab1d5e360e1a4dd29b319f4d0"><div class="ttname"><a href="class_mirror_1_1_network_identity.html#ac5077f1ab1d5e360e1a4dd29b319f4d0">Mirror.NetworkIdentity.isClientOnly</a></div><div class="ttdeci">bool isClientOnly</div><div class="ttdoc">True if this object exists on a client that is not also acting as a server.</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00090">NetworkIdentity.cs:90</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html_afddec2dc92f3f98b1755937d9fd1430e"><div class="ttname"><a href="class_mirror_1_1_network_identity.html#afddec2dc92f3f98b1755937d9fd1430e">Mirror.NetworkIdentity.connectionToServer</a></div><div class="ttdeci">NetworkConnection connectionToServer</div><div class="ttdoc">Client's network connection to the server. This is only valid for player objects on the client.</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00171">NetworkIdentity.cs:171</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_reader_html"><div class="ttname"><a href="class_mirror_1_1_network_reader.html">Mirror.NetworkReader</a></div><div class="ttdoc">Network Reader for most simple types like floats, ints, buffers, structs, etc. Use NetworkReaderPool....</div><div class="ttdef"><b>Definition</b> <a href="_network_reader_8cs_source.html#l00018">NetworkReader.cs:19</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_writer_html"><div class="ttname"><a href="class_mirror_1_1_network_writer.html">Mirror.NetworkWriter</a></div><div class="ttdoc">Network Writer for most simple types like floats, ints, buffers, structs, etc. Use NetworkWriterPool....</div><div class="ttdef"><b>Definition</b> <a href="_network_writer_8cs_source.html#l00010">NetworkWriter.cs:11</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_writer_pooled_html"><div class="ttname"><a href="class_mirror_1_1_network_writer_pooled.html">Mirror.NetworkWriterPooled</a></div><div class="ttdoc">Pooled NetworkWriter, automatically returned to pool when using 'using'.</div><div class="ttdef"><b>Definition</b> <a href="_network_writer_pooled_8cs_source.html#l00009">NetworkWriterPooled.cs:10</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_sync_object_html"><div class="ttname"><a href="class_mirror_1_1_sync_object.html">Mirror.SyncObject</a></div><div class="ttdoc">SyncObjects sync state between server and client. E.g. SyncLists.</div><div class="ttdef"><b>Definition</b> <a href="_sync_object_8cs_source.html#l00013">SyncObject.cs:14</a></div></div>
<div class="ttc" id="anamespace_mirror_html"><div class="ttname"><a href="namespace_mirror.html">Mirror</a></div><div class="ttdef"><b>Definition</b> <a href="_basic_authenticator_8cs_source.html#l00005">BasicAuthenticator.cs:6</a></div></div>
<div class="ttc" id="anamespace_mirror_html_a3a4f3784dd23e16377d46532b14bae88"><div class="ttname"><a href="namespace_mirror.html#a3a4f3784dd23e16377d46532b14bae88">Mirror.SyncDirection</a></div><div class="ttdeci">SyncDirection</div><div class="ttdef"><b>Definition</b> <a href="#l00019">NetworkBehaviour.cs:19</a></div></div>
<div class="ttc" id="anamespace_mirror_html_a3a4f3784dd23e16377d46532b14bae88a953771c43fd61add517f07b32409c9e0"><div class="ttname"><a href="namespace_mirror.html#a3a4f3784dd23e16377d46532b14bae88a953771c43fd61add517f07b32409c9e0">Mirror.SyncDirection.ClientToServer</a></div><div class="ttdeci">@ ClientToServer</div></div>
<div class="ttc" id="anamespace_mirror_html_a3a4f3784dd23e16377d46532b14bae88ad45cd6e8a3495dca76440ed0d0decc02"><div class="ttname"><a href="namespace_mirror.html#a3a4f3784dd23e16377d46532b14bae88ad45cd6e8a3495dca76440ed0d0decc02">Mirror.SyncDirection.ServerToClient</a></div><div class="ttdeci">@ ServerToClient</div></div>
<div class="ttc" id="anamespace_mirror_html_ac9acfe9461893a0d1ebc0eef63d1a6ff"><div class="ttname"><a href="namespace_mirror.html#ac9acfe9461893a0d1ebc0eef63d1a6ff">Mirror.SyncMode</a></div><div class="ttdeci">SyncMode</div><div class="ttdef"><b>Definition</b> <a href="#l00010">NetworkBehaviour.cs:10</a></div></div>
<div class="ttc" id="anamespace_mirror_html_ac9acfe9461893a0d1ebc0eef63d1a6ffa1b3b22fe46ee3a448828dea57f838bd7"><div class="ttname"><a href="namespace_mirror.html#ac9acfe9461893a0d1ebc0eef63d1a6ffa1b3b22fe46ee3a448828dea57f838bd7">Mirror.SyncMode.Observers</a></div><div class="ttdeci">@ Observers</div></div>
<div class="ttc" id="anamespace_mirror_html_ac9acfe9461893a0d1ebc0eef63d1a6ffab6f4a2ec6356bbd56d49f2096bf9d3d3"><div class="ttname"><a href="namespace_mirror.html#ac9acfe9461893a0d1ebc0eef63d1a6ffab6f4a2ec6356bbd56d49f2096bf9d3d3">Mirror.SyncMode.Owner</a></div><div class="ttdeci">@ Owner</div></div>
<div class="ttc" id="astruct_mirror_1_1_command_message_html"><div class="ttname"><a href="struct_mirror_1_1_command_message.html">Mirror.CommandMessage</a></div><div class="ttdef"><b>Definition</b> <a href="_messages_8cs_source.html#l00035">Messages.cs:36</a></div></div>
<div class="ttc" id="astruct_mirror_1_1_grid2_d_html"><div class="ttname"><a href="struct_mirror_1_1_grid2_d.html">Mirror.Grid2D</a></div><div class="ttdef"><b>Definition</b> <a href="_grid2_d_8cs_source.html#l00010">Grid2D.cs:11</a></div></div>
<div class="ttc" id="astruct_mirror_1_1_grid2_d_html_a05b810f7466b59b26b243d83383d1274"><div class="ttname"><a href="struct_mirror_1_1_grid2_d.html#a05b810f7466b59b26b243d83383d1274">Mirror.Grid2D.Add</a></div><div class="ttdeci">void Add(Vector2Int position, T value)</div><div class="ttdef"><b>Definition</b> <a href="_grid2_d_8cs_source.html#l00044">Grid2D.cs:44</a></div></div>
<div class="ttc" id="astruct_mirror_1_1_network_behaviour_sync_var_html"><div class="ttname"><a href="struct_mirror_1_1_network_behaviour_sync_var.html">Mirror.NetworkBehaviourSyncVar</a></div><div class="ttdef"><b>Definition</b> <a href="_network_behaviour_sync_var_8cs_source.html#l00006">NetworkBehaviourSyncVar.cs:7</a></div></div>
<div class="ttc" id="astruct_mirror_1_1_rpc_message_html"><div class="ttname"><a href="struct_mirror_1_1_rpc_message.html">Mirror.RpcMessage</a></div><div class="ttdef"><b>Definition</b> <a href="_messages_8cs_source.html#l00045">Messages.cs:46</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_84bbf7b3c7f28a5a18725745e1505219.html">Assets</a></li><li class="navelem"><a class="el" href="dir_bf1dd3994e8f933eb733da65a1863113.html">Mirror</a></li><li class="navelem"><a class="el" href="dir_498e799cc6e42a51607844cb305aca07.html">Core</a></li><li class="navelem"><a class="el" href="_network_behaviour_8cs.html">NetworkBehaviour.cs</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
