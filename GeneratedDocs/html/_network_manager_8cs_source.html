<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>World Conquest: Assets/Mirror/Core/NetworkManager.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">World Conquest
   </div>
   <div id="projectbrief">Implementation of the Risk board game for our Software Engineering module.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_network_manager_8cs_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">NetworkManager.cs</div></div>
</div><!--header-->
<div class="contents">
<a href="_network_manager_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="keyword">using </span>System;</div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="keyword">using </span>System.Collections.Generic;</div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="keyword">using </span>System.Linq;</div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="keyword">using </span>UnityEngine;</div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="keyword">using </span>UnityEngine.SceneManagement;</div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="keyword">using </span>UnityEngine.Serialization;</div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespace_mirror.html">Mirror</a></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span>{</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno"><a class="line" href="namespace_mirror.html#a23132665b6a9f18117f09ce19aec9609">   10</a></span>    <span class="keyword">public</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespace_mirror.html#a23132665b6a9f18117f09ce19aec9609">PlayerSpawnMethod</a> { <a class="code hl_enumvalue" href="namespace_mirror.html#a23132665b6a9f18117f09ce19aec9609a64663f4646781c9c0110838b905daa23">Random</a>, <a class="code hl_enumvalue" href="namespace_mirror.html#a23132665b6a9f18117f09ce19aec9609a91a63281bd2e647fe3b92d1d22cd3380">RoundRobin</a> }</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno"><a class="line" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">   11</a></span>    <span class="keyword">public</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a> { <a class="code hl_enumvalue" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009ba8d9da4bc0e49a50e09ac9f7e56789d39">Offline</a>, <a class="code hl_enumvalue" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009baab2bffbd2a02d6b8390aac7945477272">ServerOnly</a>, <a class="code hl_enumvalue" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009ba186244edf2711a5111ac0cc3dd007b01">ClientOnly</a>, <a class="code hl_enumvalue" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009bac2ca16d048ec66e04bca283eab048ec2">Host</a> }</div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno"><a class="line" href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909ac">   12</a></span>    <span class="keyword">public</span> <span class="keyword">enum</span> <a class="code hl_enumeration" href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909ac">HeadlessStartOptions</a> { <a class="code hl_enumvalue" href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909aca71b7f3fcd4098ebf8a3b387579d90dd7">DoNothing</a>, <a class="code hl_enumvalue" href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909acaf8883a8161a4ab27fb36d406117aa0de">AutoStartServer</a>, <a class="code hl_enumvalue" href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909aca77ec788f2a7b1ad97812fff9e21837fa">AutoStartClient</a> }</div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>    [DisallowMultipleComponent]</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>    [AddComponentMenu(<span class="stringliteral">&quot;Network/Network Manager&quot;</span>)]</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span>    [HelpURL(<span class="stringliteral">&quot;https://mirror-networking.gitbook.io/docs/components/network-manager&quot;</span>)]</div>
<div class="foldopen" id="foldopen00017" data-start="{" data-end="};">
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html">   17</a></span>    <span class="keyword">public</span> <span class="keyword">class </span><a class="code hl_class" href="class_mirror_1_1_network_manager.html">NetworkManager</a> : MonoBehaviour</div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span>    {</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>        <span class="comment">// This should be set if your game has a single NetworkManager that exists for the lifetime of the process. If there is a NetworkManager in each scene, then this should not be set.&lt;/para&gt;</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>        [Header(<span class="stringliteral">&quot;Configuration&quot;</span>)]</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;m_DontDestroyOnLoad&quot;</span>)]</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Should the Network Manager object be persisted through scene changes?&quot;</span>)]</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a9a27bfac207d46188c6940155800c4ba">   24</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9a27bfac207d46188c6940155800c4ba">dontDestroyOnLoad</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;m_RunInBackground&quot;</span>)]</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Multiplayer games should always run in the background so the network doesn&#39;t time out.&quot;</span>)]</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#ac3bbfc101e99f8a857f6dfa584f6156f">   29</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac3bbfc101e99f8a857f6dfa584f6156f">runInBackground</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>        [Header(<span class="stringliteral">&quot;Auto-Start Options&quot;</span>)]</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span> </div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Choose whether Server or Client should auto-start in headless builds&quot;</span>)]</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#ad06f34fe911525eeb922c1227f9161a0">   35</a></span>        <span class="keyword">public</span> <a class="code hl_enumeration" href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909ac">HeadlessStartOptions</a> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ad06f34fe911525eeb922c1227f9161a0">headlessStartMode</a> = <a class="code hl_enumeration" href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909ac">HeadlessStartOptions</a>.DoNothing;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span> </div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Headless Start Mode in Editor\nwhen enabled, headless start mode will be used in editor as well.&quot;</span>)]</div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#ac91758c48cf3bfb8c9a22df4d43325ec">   38</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac91758c48cf3bfb8c9a22df4d43325ec">editorAutoStart</a>;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Server &amp; Client send rate per second. Use 60-100Hz for fast paced games like Counter-Strike to minimize latency. Use around 30Hz for games like WoW to minimize computations. Use around 1-10Hz for slow paced games like EVE.&quot;</span>)]</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;serverTickRate&quot;</span>)]</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a1a0047cfbf0952c7ead67192b8f8ae7d">   43</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a1a0047cfbf0952c7ead67192b8f8ae7d">sendRate</a> = 60;</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span> </div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>        <span class="comment">// Deprecated 2023-11-25</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>        <span class="comment">// Using SerializeField and HideInInspector to self-correct for being</span></div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>        <span class="comment">// replaced by headlessStartMode. This can be removed in the future.</span></div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>        <span class="comment">// See OnValidate() for how we handle this.</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Obsolete</a>(<span class="stringliteral">&quot;Deprecated - Use headlessStartMode instead.&quot;</span>)]</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;autoStartServerBuild&quot;</span>), <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SerializeField</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">HideInInspector</a>]</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a6c3233bb576b12f916bb1c3644141ddc">   51</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a6c3233bb576b12f916bb1c3644141ddc">autoStartServerBuild</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>        <span class="comment">// Deprecated 2023-11-25</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>        <span class="comment">// Using SerializeField and HideInInspector to self-correct for being</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>        <span class="comment">// replaced by headlessStartMode. This can be removed in the future.</span></div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>        <span class="comment">// See OnValidate() for how we handle this.</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Obsolete</a>(<span class="stringliteral">&quot;Deprecated - Use headlessStartMode instead.&quot;</span>)]</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;autoConnectClientBuild&quot;</span>), <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SerializeField</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">HideInInspector</a>]</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a4c2342055a3ecd644ba2332eb919c09e">   59</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a4c2342055a3ecd644ba2332eb919c09e">autoConnectClientBuild</a>;</div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span> </div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        <span class="comment">// client send rate follows server send rate to avoid errors for now</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>        <span class="comment">// [Tooltip(&quot;Client broadcasts &#39;sendRate&#39; times per second. Use around 60Hz for fast paced games like Counter-Strike to minimize latency. Use around 30Hz for games like WoW to minimize computations. Use around 1-10Hz for slow paced games like EVE.&quot;)]</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>        <span class="comment">// public int clientSendRate = 30; // 33 ms</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span> </div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>        [Header(<span class="stringliteral">&quot;Scene Management&quot;</span>)]</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Scene</a>]</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;m_OfflineScene&quot;</span>)]</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Scene that Mirror will switch to when the client or server is stopped&quot;</span>)]</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">   71</a></span>        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Scene</a>]</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;m_OnlineScene&quot;</span>)]</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Scene that Mirror will switch to when the server is started. Clients will recieve a Scene Message to load the server&#39;s current scene when they connect.&quot;</span>)]</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a94a71162ac38d4c83fc528c27bbd934f">   77</a></span>        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a94a71162ac38d4c83fc528c27bbd934f">onlineScene</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span> </div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        <span class="comment">// transport layer</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        [Header(<span class="stringliteral">&quot;Network Info&quot;</span>)]</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Transport component attached to this object that server and client will use to connect&quot;</span>)]</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a7007bd753d6da4fd8b9ad945b8ab6c86">   82</a></span>        <span class="keyword">public</span> <a class="code hl_class" href="class_mirror_1_1_transport.html">Transport</a> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7007bd753d6da4fd8b9ad945b8ab6c86">transport</a>;</div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span> </div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;m_NetworkAddress&quot;</span>)]</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Network Address where the client should connect to the server. Server does not use this for anything.&quot;</span>)]</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a5bf39246bf796ae839815eb799431e0a">   87</a></span>        <span class="keyword">public</span> <span class="keywordtype">string</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a5bf39246bf796ae839815eb799431e0a">networkAddress</a> = <span class="stringliteral">&quot;localhost&quot;</span>;</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;m_MaxConnections&quot;</span>)]</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Maximum number of concurrent connections.&quot;</span>)]</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a647cb7a86c0cd91fea090a047b914793">   92</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a647cb7a86c0cd91fea090a047b914793">maxConnections</a> = 100;</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>        <span class="comment">// Mirror global disconnect inactive option, independent of Transport.</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>        <span class="comment">// not all Transports do this properly, and it&#39;s easiest to configure this just once.</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>        <span class="comment">// this is very useful for some projects, keep it.</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;When enabled, the server automatically disconnects inactive connections after the configured timeout.&quot;</span>)]</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a6a3e05a7d69da725d5096c259e8588d9">   98</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a6a3e05a7d69da725d5096c259e8588d9">disconnectInactiveConnections</a>;</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span> </div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Timeout in seconds for server to automatically disconnect inactive connections if &#39;disconnectInactiveConnections&#39; is enabled.&quot;</span>)]</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a20aa81bd18677e958645bfd2af78455e">  101</a></span>        <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a20aa81bd18677e958645bfd2af78455e">disconnectInactiveTimeout</a> = 60f;</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span> </div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>        [Header(<span class="stringliteral">&quot;Authentication&quot;</span>)]</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Authentication component attached to this object&quot;</span>)]</div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">  105</a></span>        <span class="keyword">public</span> <a class="code hl_class" href="class_mirror_1_1_network_authenticator.html">NetworkAuthenticator</a> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a>;</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>        <span class="comment">// Player objects are created in the default handler for AddPlayer() on</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        <span class="comment">// the server. Implementing OnServerAddPlayer overrides this behaviour.</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>        [Header(<span class="stringliteral">&quot;Player Object&quot;</span>)]</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;m_PlayerPrefab&quot;</span>)]</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Prefab of the player object. Prefab must have a Network Identity component. May be an empty game object or a full avatar.&quot;</span>)]</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">  113</a></span>        <span class="keyword">public</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a>;</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span> </div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;m_AutoCreatePlayer&quot;</span>)]</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Should Mirror automatically spawn the player after scene change?&quot;</span>)]</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a5feedb04fce427328f8b0b2fdc4aaecf">  118</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a5feedb04fce427328f8b0b2fdc4aaecf">autoCreatePlayer</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span> </div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;m_PlayerSpawnMethod&quot;</span>)]</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Round Robin or Random order of Start Position selection&quot;</span>)]</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#ae6167e3960b1a34e09ea97868d1cc60e">  123</a></span>        <span class="keyword">public</span> <a class="code hl_enumeration" href="namespace_mirror.html#a23132665b6a9f18117f09ce19aec9609">PlayerSpawnMethod</a> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ae6167e3960b1a34e09ea97868d1cc60e">playerSpawnMethod</a>;</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;m_SpawnPrefabs&quot;</span>), <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">HideInInspector</a>]</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a0a8603e11759317ca078ef8afabc08e3">  127</a></span>        <span class="keyword">public</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">List&lt;GameObject&gt;</a> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a0a8603e11759317ca078ef8afabc08e3">spawnPrefabs</a> = <span class="keyword">new</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">List&lt;GameObject&gt;</a>();</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">  130</a></span>        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">List&lt;Transform&gt;</a> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a> = <span class="keyword">new</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">List&lt;Transform&gt;</a>();</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a1a28ec0b06891f2b0907958df67ee42b">  131</a></span>        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a1a28ec0b06891f2b0907958df67ee42b">startPositionIndex</a>;</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span> </div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>        [Header(<span class="stringliteral">&quot;Security&quot;</span>)]</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;For security, it is recommended to disconnect a player if a networked action triggers an exception\nThis could prevent components being accessed in an undefined state, which may be an attack vector for exploits.\nHowever, some games may want to allow exceptions in order to not interrupt the player&#39;s experience.&quot;</span>)]</div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a658ae89160589db3caf74014c83f5cf4">  135</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a658ae89160589db3caf74014c83f5cf4">exceptionsDisconnect</a> = <span class="keyword">true</span>; <span class="comment">// security by default</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span> </div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>        [Header(<span class="stringliteral">&quot;Snapshot Interpolation&quot;</span>)]</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a3c6e80626c62d6c27ba9c36336264a20">  138</a></span>        <span class="keyword">public</span> <a class="code hl_class" href="class_mirror_1_1_snapshot_interpolation_settings.html">SnapshotInterpolationSettings</a> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a3c6e80626c62d6c27ba9c36336264a20">snapshotSettings</a> = <span class="keyword">new</span> <a class="code hl_class" href="class_mirror_1_1_snapshot_interpolation_settings.html">SnapshotInterpolationSettings</a>();</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>        [Header(<span class="stringliteral">&quot;Connection Quality&quot;</span>)]</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Method to use for connection quality evaluation.\nSimple: based on rtt and jitter.\nPragmatic: based on snapshot interpolation adjustment.&quot;</span>)]</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a88c1f01355e89fef92ca90a64729220b">  142</a></span>        <span class="keyword">public</span> <a class="code hl_enumeration" href="namespace_mirror.html#ae48547777ff464a8465b6ff4f37ffdf3">ConnectionQualityMethod</a> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a88c1f01355e89fef92ca90a64729220b">evaluationMethod</a>;</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Interval in seconds to evaluate connection quality.\nSet to 0 to disable connection quality evaluation.&quot;</span>)]</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Range</a>(0, 60)]</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">FormerlySerializedAs</a>(<span class="stringliteral">&quot;connectionQualityInterval&quot;</span>)]</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a7eead27d999ad760024d785c4b94f707">  147</a></span>        <span class="keyword">public</span> <span class="keywordtype">float</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7eead27d999ad760024d785c4b94f707">evaluationInterval</a> = 3;</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span> </div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>        [Header(<span class="stringliteral">&quot;Debug&quot;</span>)]</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a067cc9e9f2eec4f522084af31c4799d3">  150</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a067cc9e9f2eec4f522084af31c4799d3">timeInterpolationGui</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a0fda8121f67f6c13e153c7391bbad2bd">  153</a></span>        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code hl_class" href="class_mirror_1_1_network_manager.html">NetworkManager</a> <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0fda8121f67f6c13e153c7391bbad2bd">singleton</a> { <span class="keyword">get</span>; <span class="keyword">internal</span> <span class="keyword">set</span>; }</div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span> </div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#ae8ea1665e8b5401a65f23e9a168b6a89">  156</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_property" href="class_mirror_1_1_network_manager.html#ae8ea1665e8b5401a65f23e9a168b6a89">numPlayers</a> =&gt; NetworkServer.connections.Count(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">kv</a> =&gt; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">kv</a>.Value.identity != <span class="keyword">null</span>);</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a1f569b676d7a9cc3b05e3e1d37039ff1">  159</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a1f569b676d7a9cc3b05e3e1d37039ff1">isNetworkActive</a> =&gt; NetworkServer.active || NetworkClient.active;</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span> </div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        <span class="comment">// TODO remove this</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>        <span class="comment">// internal for tests</span></div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>        <span class="keyword">internal</span> <span class="keyword">static</span> <a class="code hl_class" href="class_mirror_1_1_network_connection.html">NetworkConnection</a> clientReadyConnection;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>        <span class="comment">// This is set before OnClientConnect is called, so it can be checked</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        <span class="comment">// there to perform different logic if a scene load occurred.</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a7079cb91ab3aca157345929081f7bd63">  168</a></span>        <span class="keyword">protected</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7079cb91ab3aca157345929081f7bd63">clientLoadedScene</a>;</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>        <span class="comment">// helper enum to know if we started the networkmanager as server/client/host.</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>        <span class="comment">// -&gt; this is necessary because when StartHost changes server scene to</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>        <span class="comment">//    online scene, FinishLoadScene is called and the host client isn&#39;t</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>        <span class="comment">//    connected yet (no need to connect it before server was fully set up).</span></div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>        <span class="comment">//    in other words, we need this to know which mode we are running in</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>        <span class="comment">//    during FinishLoadScene.</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">  176</a></span>        <span class="keyword">public</span> <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a> <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> { <span class="keyword">get</span>; <span class="keyword">private</span> <span class="keyword">set</span>; }</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>        <span class="comment">// virtual so that inheriting classes&#39; OnValidate() can call base.OnValidate() too</span></div>
<div class="foldopen" id="foldopen00179" data-start="{" data-end="}">
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a7d659b2c87f79a99e7faaf3d015e49e7">  179</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a7d659b2c87f79a99e7faaf3d015e49e7">OnValidate</a>()</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>        {</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span><span class="preprocessor">#pragma warning disable 618</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>            <span class="comment">// autoStartServerBuild and autoConnectClientBuild are now obsolete, but to avoid</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>            <span class="comment">// a breaking change we&#39;ll set headlessStartMode to what the user had set before.</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>            <span class="comment">// headlessStartMode defaults to DoNothing, so if the user had neither of these</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>            <span class="comment">// set, then it will remain as DoNothing, and if they set headlessStartMode to</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>            <span class="comment">// any selection in the inspector it won&#39;t get changed back.</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a6c3233bb576b12f916bb1c3644141ddc">autoStartServerBuild</a>)</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ad06f34fe911525eeb922c1227f9161a0">headlessStartMode</a> = <a class="code hl_enumeration" href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909ac">HeadlessStartOptions</a>.AutoStartServer;</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a4c2342055a3ecd644ba2332eb919c09e">autoConnectClientBuild</a>)</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ad06f34fe911525eeb922c1227f9161a0">headlessStartMode</a> = <a class="code hl_enumeration" href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909ac">HeadlessStartOptions</a>.AutoStartClient;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span> </div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>            <span class="comment">// Setting both to false here prevents this code from fighting with user</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>            <span class="comment">// selection in the inspector, and they&#39;re both SerialisedField&#39;s.</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a6c3233bb576b12f916bb1c3644141ddc">autoStartServerBuild</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a4c2342055a3ecd644ba2332eb919c09e">autoConnectClientBuild</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span><span class="preprocessor">#pragma warning restore 618</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span> </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            <span class="comment">// always &gt;= 0</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a647cb7a86c0cd91fea090a047b914793">maxConnections</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Mathf</a>.Max(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a647cb7a86c0cd91fea090a047b914793">maxConnections</a>, 0);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span> </div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a> != <span class="keyword">null</span> &amp;&amp; !<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a>.TryGetComponent(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">out</a> <a class="code hl_class" href="class_mirror_1_1_network_identity.html">NetworkIdentity</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">_</a>))</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>            {</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError(<span class="stringliteral">&quot;NetworkManager - Player Prefab must have a NetworkIdentity.&quot;</span>);</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a> = <span class="keyword">null</span>;</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>            }</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span> </div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>            <span class="comment">// This avoids the mysterious &quot;Replacing existing prefab with assetId ... Old prefab &#39;Player&#39;, New prefab &#39;Player&#39;&quot; warning.</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a> != <span class="keyword">null</span> &amp;&amp; <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a0a8603e11759317ca078ef8afabc08e3">spawnPrefabs</a>.Contains(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a>))</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>            {</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogWarning(<span class="stringliteral">&quot;NetworkManager - Player Prefab doesn&#39;t need to be in Spawnable Prefabs list too. Removing it.&quot;</span>);</div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a0a8603e11759317ca078ef8afabc08e3">spawnPrefabs</a>.Remove(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a>);</div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>            }</div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>        }</div>
</div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span> </div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>        <span class="comment">// virtual so that inheriting classes&#39; Reset() can call base.Reset() too</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>        <span class="comment">// Reset only gets called when the component is added or the user resets the component</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>        <span class="comment">// Thats why we validate these things that only need to be validated on adding the NetworkManager here</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        <span class="comment">// If we would do it in OnValidate() then it would run this everytime a value changes</span></div>
<div class="foldopen" id="foldopen00220" data-start="{" data-end="}">
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a11d6e6b2fc33560bc2e79278652c2b4a">  220</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a11d6e6b2fc33560bc2e79278652c2b4a">Reset</a>()</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        {</div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>            <span class="comment">// make sure someone doesn&#39;t accidentally add another NetworkManager</span></div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>            <span class="comment">// need transform.root because when adding to a child, the parent&#39;s</span></div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>            <span class="comment">// Reset isn&#39;t called.</span></div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>            <span class="keywordflow">foreach</span> (<a class="code hl_class" href="class_mirror_1_1_network_manager.html">NetworkManager</a> manager <span class="keywordflow">in</span> transform.root.GetComponentsInChildren&lt;<a class="code hl_class" href="class_mirror_1_1_network_manager.html">NetworkManager</a>&gt;())</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>            {</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>                <span class="keywordflow">if</span> (manager != <span class="keyword">this</span>)</div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>                {</div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>                    <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;{name} detected another component of type {typeof(NetworkManager)} in its hierarchy on {manager.name}. There can only be one, please remove one of them.&quot;</span>);</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>                    <span class="comment">// return early so that transport component isn&#39;t auto-added</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>                    <span class="comment">// to the duplicate NetworkManager.</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>                    <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>                }</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>            }</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span>        }</div>
</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span> </div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>        <span class="comment">// virtual so that inheriting classes&#39; Awake() can call base.Awake() too</span></div>
<div class="foldopen" id="foldopen00238" data-start="{" data-end="}">
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a6ae0ef1c6575b8658ea975a7fc60ef72">  238</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a6ae0ef1c6575b8658ea975a7fc60ef72">Awake</a>()</div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>        {</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>            <span class="comment">// Don&#39;t allow collision-destroyed second instance to continue.</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>            <span class="keywordflow">if</span> (!InitializeSingleton()) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span> </div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>            <span class="comment">// Apply configuration in Awake once already</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>            ApplyConfiguration();</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span> </div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>            <span class="comment">// Set the networkSceneName to prevent a scene reload</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>            <span class="comment">// if client connection to server fails.</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>            <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a> = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>;</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span> </div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>            <span class="comment">// setup OnSceneLoaded callback</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>            SceneManager.sceneLoaded += OnSceneLoaded;</div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>        }</div>
</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span> </div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>        <span class="comment">// virtual so that inheriting classes&#39; Start() can call base.Start() too</span></div>
<div class="foldopen" id="foldopen00255" data-start="{" data-end="}">
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a5823aa0ee6c9711f8000ab4988a19a19">  255</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a5823aa0ee6c9711f8000ab4988a19a19">Start</a>()</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        {</div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>            <span class="comment">// Auto-start headless server or client.</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>            <span class="comment">// We can&#39;t do this in Awake because Awake is for initialization</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>            <span class="comment">// and some transports might not be ready until Start.</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>            <span class="comment">// Auto-starting in Editor is useful for debugging, so that can</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>            <span class="comment">// be enabled with editorAutoStart.</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>            <span class="keywordflow">if</span> (Utils.IsHeadless())</div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>            {</div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>                <span class="keywordflow">if</span> (!<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Application</a>.isEditor || <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac91758c48cf3bfb8c9a22df4d43325ec">editorAutoStart</a>)</div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>                    <span class="keywordflow">switch</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ad06f34fe911525eeb922c1227f9161a0">headlessStartMode</a>)</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>                    {</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>                        <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909ac">HeadlessStartOptions</a>.AutoStartServer:</div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>                            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#acf951becaaa4d612814d92676eb241a8">StartServer</a>();</div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>                        <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909ac">HeadlessStartOptions</a>.AutoStartClient:</div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>                            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a21755bebf114e5fb026b1834de6b4c73">StartClient</a>();</div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>                            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span>                    }</div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>            }</div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>        }</div>
</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span>        <span class="comment">// make sure to call base.Update() when overwriting</span></div>
<div class="foldopen" id="foldopen00280" data-start="{" data-end="}">
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a5e8f384938821366e4512ede3ae96c27">  280</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a5e8f384938821366e4512ede3ae96c27">Update</a>()</div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>        {</div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>            ApplyConfiguration();</div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>        }</div>
</div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span> </div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>        <span class="comment">// virtual so that inheriting classes&#39; LateUpdate() can call base.LateUpdate() too</span></div>
<div class="foldopen" id="foldopen00286" data-start="{" data-end="}">
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a9afe15bd60cdc9e1a1bd266ccbfe1fe9">  286</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a9afe15bd60cdc9e1a1bd266ccbfe1fe9">LateUpdate</a>()</div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>        {</div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>            UpdateScene();</div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>        }</div>
</div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span> </div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span> </div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        <span class="comment">// keep the online scene change check in a separate function.</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>        <span class="comment">// only change scene if the requested online scene is not blank, and is not already loaded.</span></div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span>        <span class="keywordtype">bool</span> IsServerOnlineSceneChangeNeeded() =&gt;</div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span>            !<span class="keywordtype">string</span>.IsNullOrWhiteSpace(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a94a71162ac38d4c83fc528c27bbd934f">onlineScene</a>) &amp;&amp;</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>            !Utils.IsSceneActive(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a94a71162ac38d4c83fc528c27bbd934f">onlineScene</a>) &amp;&amp;</div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a94a71162ac38d4c83fc528c27bbd934f">onlineScene</a> != <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>;</div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span> </div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>        <span class="comment">// NetworkManager exposes some NetworkServer/Client configuration.</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>        <span class="comment">// we apply it every Update() in order to avoid two sources of truth.</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>        <span class="comment">// fixes issues where NetworkServer.sendRate was never set because</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>        <span class="comment">// NetworkManager.StartServer was never called, etc.</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>        <span class="comment">// =&gt; all exposed settings should be applied at all times if NM exists.</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>        <span class="keywordtype">void</span> ApplyConfiguration()</div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>        {</div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>            NetworkServer.tickRate = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a1a0047cfbf0952c7ead67192b8f8ae7d">sendRate</a>;</div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>            NetworkClient.snapshotSettings = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a3c6e80626c62d6c27ba9c36336264a20">snapshotSettings</a>;</div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>            NetworkClient.connectionQualityInterval = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7eead27d999ad760024d785c4b94f707">evaluationInterval</a>;</div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>            NetworkClient.connectionQualityMethod = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a88c1f01355e89fef92ca90a64729220b">evaluationMethod</a>;</div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>        }</div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span> </div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>        <span class="comment">// full server setup code, without spawning objects yet</span></div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span>        <span class="keywordtype">void</span> SetupServer()</div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>        {</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>            <span class="comment">// Debug.Log(&quot;NetworkManager SetupServer&quot;);</span></div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>            InitializeSingleton();</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span> </div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>            <span class="comment">// apply settings before initializing anything</span></div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>            NetworkServer.disconnectInactiveConnections = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a6a3e05a7d69da725d5096c259e8588d9">disconnectInactiveConnections</a>;</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span>            NetworkServer.disconnectInactiveTimeout = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a20aa81bd18677e958645bfd2af78455e">disconnectInactiveTimeout</a>;</div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>            NetworkServer.exceptionsDisconnect = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a658ae89160589db3caf74014c83f5cf4">exceptionsDisconnect</a>;</div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span> </div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac3bbfc101e99f8a857f6dfa584f6156f">runInBackground</a>)</div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>                Application.runInBackground = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span> </div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>            {</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a>.<a class="code hl_function" href="class_mirror_1_1_network_authenticator.html#af84e9666b24912a841ef3621b637516b">OnStartServer</a>();</div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a>.<a class="code hl_variable" href="class_mirror_1_1_network_authenticator.html#ac2106a4b670a75135e22e9f7ce5e3583">OnServerAuthenticated</a>.AddListener(OnServerAuthenticated);</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>            }</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span> </div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a5a1b3d80829a261fbf4977d934257524">ConfigureHeadlessFrameRate</a>();</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span> </div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>            <span class="comment">// start listening to network connections</span></div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span>            NetworkServer.Listen(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a647cb7a86c0cd91fea090a047b914793">maxConnections</a>);</div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span> </div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>            <span class="comment">// this must be after Listen(), since that registers the default message handlers</span></div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>            RegisterServerMessages();</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span> </div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>            <span class="comment">// do not call OnStartServer here yet.</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>            <span class="comment">// this is up to the caller. different for server-only vs. host mode.</span></div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>        }</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="foldopen" id="foldopen00346" data-start="{" data-end="}">
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#acf951becaaa4d612814d92676eb241a8">  346</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#acf951becaaa4d612814d92676eb241a8">StartServer</a>()</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        {</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>            <span class="keywordflow">if</span> (NetworkServer.active)</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>            {</div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogWarning(<span class="stringliteral">&quot;Server already started.&quot;</span>);</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>            }</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span> </div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>            <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> = <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.ServerOnly;</div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span> </div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>            <span class="comment">// StartServer is inherently ASYNCHRONOUS (=doesn&#39;t finish immediately)</span></div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>            <span class="comment">// Here is what it does:</span></div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>            <span class="comment">//   Listen</span></div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>            <span class="comment">//   if onlineScene:</span></div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>            <span class="comment">//       LoadSceneAsync</span></div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span>            <span class="comment">//       ...</span></div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>            <span class="comment">//       FinishLoadSceneServerOnly</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>            <span class="comment">//           SpawnObjects</span></div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span>            <span class="comment">//   else:</span></div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>            <span class="comment">//       SpawnObjects</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>            <span class="comment">// there is NO WAY to make it synchronous because both LoadSceneAsync</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>            <span class="comment">// and LoadScene do not finish loading immediately. as long as we</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>            <span class="comment">// have the onlineScene feature, it will be asynchronous!</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span> </div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>            SetupServer();</div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span> </div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>            <span class="comment">// call OnStartServer AFTER Listen, so that NetworkServer.active is</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span>            <span class="comment">// true and we can call NetworkServer.Spawn in OnStartServer</span></div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>            <span class="comment">// overrides.</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>            <span class="comment">// (useful for loading &amp; spawning stuff from database etc.)</span></div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>            <span class="comment">// note: there is no risk of someone connecting after Listen() and</span></div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>            <span class="comment">//       before OnStartServer() because this all runs in one thread</span></div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>            <span class="comment">//       and we don&#39;t start processing connects until Update.</span></div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a0226295e867fd77ad9aef32d32d6ca88">OnStartServer</a>();</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span> </div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>            <span class="comment">// scene change needed? then change scene and spawn afterwards.</span></div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>            <span class="keywordflow">if</span> (IsServerOnlineSceneChangeNeeded())</div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>            {</div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>                <a class="code hl_function" href="class_mirror_1_1_network_manager.html#ae428a9f79881585ef5fef880f6c923ad">ServerChangeScene</a>(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a94a71162ac38d4c83fc528c27bbd934f">onlineScene</a>);</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span>            }</div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>            <span class="comment">// otherwise spawn directly</span></div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>            {</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>                NetworkServer.SpawnObjects();</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>            }</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>        }</div>
</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span> </div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>        <span class="keywordtype">void</span> SetupClient()</div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span>        {</div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>            InitializeSingleton();</div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span> </div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span><span class="preprocessor">#pragma warning disable 618</span></div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>            <span class="comment">// Remove when OnConnectionQualityChanged is removed.</span></div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>            NetworkClient.onConnectionQualityChanged += <a class="code hl_function" href="class_mirror_1_1_network_manager.html#afc488979b7da5f02a603c26d638d61ac">OnConnectionQualityChanged</a>;</div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span><span class="preprocessor">#pragma warning restore 618</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span> </div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>            <span class="comment">// apply settings before initializing anything</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>            NetworkClient.exceptionsDisconnect = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a658ae89160589db3caf74014c83f5cf4">exceptionsDisconnect</a>;</div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>            <span class="comment">// NetworkClient.sendRate = clientSendRate;</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span> </div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac3bbfc101e99f8a857f6dfa584f6156f">runInBackground</a>)</div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>                Application.runInBackground = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span> </div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>            {</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a>.<a class="code hl_function" href="class_mirror_1_1_network_authenticator.html#a70801a0c9f66f62e3273a60d4d8a9edc">OnStartClient</a>();</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a>.<a class="code hl_variable" href="class_mirror_1_1_network_authenticator.html#a2cda88ca8c624d1118e5b7e5bc88360b">OnClientAuthenticated</a>.AddListener(OnClientAuthenticated);</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>            }</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span> </div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>        }</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span> </div>
<div class="foldopen" id="foldopen00421" data-start="{" data-end="}">
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a21755bebf114e5fb026b1834de6b4c73">  421</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a21755bebf114e5fb026b1834de6b4c73">StartClient</a>()</div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>        {</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>            <span class="comment">// Do checks and short circuits before setting anything up.</span></div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>            <span class="comment">// If / when we retry, we won&#39;t have conflict issues.</span></div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>            <span class="keywordflow">if</span> (NetworkClient.active)</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>            {</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogWarning(<span class="stringliteral">&quot;Client already started.&quot;</span>);</div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>            }</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span> </div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span>            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">IsNullOrWhiteSpace</a>(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a5bf39246bf796ae839815eb799431e0a">networkAddress</a>))</div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span>            {</div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError(<span class="stringliteral">&quot;Must set the Network Address field in the manager&quot;</span>);</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>            }</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span> </div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>            <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> = <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.ClientOnly;</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span> </div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>            SetupClient();</div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span> </div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>            <span class="comment">// In case this is a headless client...</span></div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a5a1b3d80829a261fbf4977d934257524">ConfigureHeadlessFrameRate</a>();</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span> </div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span>            RegisterClientMessages();</div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span> </div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>            NetworkClient.Connect(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a5bf39246bf796ae839815eb799431e0a">networkAddress</a>);</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span> </div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a989b4a0365dd627ac963656a786ae69d">OnStartClient</a>();</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>        }</div>
</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span> </div>
<div class="foldopen" id="foldopen00452" data-start="{" data-end="}">
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#ada9f6a63e9816755bb437b29c4bbfa1d">  452</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#ada9f6a63e9816755bb437b29c4bbfa1d">StartClient</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Uri</a> uri)</div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>        {</div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>            <span class="keywordflow">if</span> (NetworkClient.active)</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>            {</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogWarning(<span class="stringliteral">&quot;Client already started.&quot;</span>);</div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span>            }</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span> </div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>            <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> = <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.ClientOnly;</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span> </div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>            SetupClient();</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span> </div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>            RegisterClientMessages();</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span> </div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>            <span class="comment">// Debug.Log($&quot;NetworkManager StartClient address:{uri}&quot;);</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a5bf39246bf796ae839815eb799431e0a">networkAddress</a> = uri.Host;</div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span> </div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>            NetworkClient.Connect(uri);</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span> </div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a989b4a0365dd627ac963656a786ae69d">OnStartClient</a>();</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>        }</div>
</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span> </div>
<div class="foldopen" id="foldopen00475" data-start="{" data-end="}">
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a41ab4aece51e9c6b905a5f72b3a7eb3c">  475</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a41ab4aece51e9c6b905a5f72b3a7eb3c">StartHost</a>()</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        {</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span>            <span class="keywordflow">if</span> (NetworkServer.active || NetworkClient.active)</div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>            {</div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogWarning(<span class="stringliteral">&quot;Server or Client already started.&quot;</span>);</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>            }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span> </div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span>            <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> = <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.Host;</div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span> </div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>            <span class="comment">// StartHost is inherently ASYNCHRONOUS (=doesn&#39;t finish immediately)</span></div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>            <span class="comment">// Here is what it does:</span></div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>            <span class="comment">//   Listen</span></div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>            <span class="comment">//   ConnectHost</span></div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>            <span class="comment">//   if onlineScene:</span></div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>            <span class="comment">//       LoadSceneAsync</span></div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>            <span class="comment">//       ...</span></div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>            <span class="comment">//       FinishLoadSceneHost</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>            <span class="comment">//           FinishStartHost</span></div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>            <span class="comment">//               SpawnObjects</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>            <span class="comment">//               StartHostClient      &lt;= not guaranteed to happen after SpawnObjects if onlineScene is set!</span></div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>            <span class="comment">//                   ClientAuth</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>            <span class="comment">//                       success: server sends changescene msg to client</span></div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>            <span class="comment">//   else:</span></div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>            <span class="comment">//       FinishStartHost</span></div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>            <span class="comment">// there is NO WAY to make it synchronous because both LoadSceneAsync</span></div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>            <span class="comment">// and LoadScene do not finish loading immediately. as long as we</span></div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>            <span class="comment">// have the onlineScene feature, it will be asynchronous!</span></div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span> </div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>            <span class="comment">// setup server first</span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>            SetupServer();</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span> </div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>            <span class="comment">// scene change needed? then change scene and spawn afterwards.</span></div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span>            <span class="comment">// =&gt; BEFORE host client connects. if client auth succeeds then the</span></div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span>            <span class="comment">//    server tells it to load &#39;onlineScene&#39;. we can&#39;t do that if</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span>            <span class="comment">//    server is still in &#39;offlineScene&#39;. so load on server first.</span></div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>            <span class="keywordflow">if</span> (IsServerOnlineSceneChangeNeeded())</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>            {</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>                <span class="comment">// call FinishStartHost after changing scene.</span></div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>                finishStartHostPending = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>                <a class="code hl_function" href="class_mirror_1_1_network_manager.html#ae428a9f79881585ef5fef880f6c923ad">ServerChangeScene</a>(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a94a71162ac38d4c83fc528c27bbd934f">onlineScene</a>);</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>            }</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>            <span class="comment">// otherwise call FinishStartHost directly</span></div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>            {</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>                FinishStartHost();</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>            }</div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>        }</div>
</div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span> </div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span>        <span class="comment">// This may be set true in StartHost and is evaluated in FinishStartHost</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>        <span class="keywordtype">bool</span> finishStartHostPending;</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span> </div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>        <span class="comment">// FinishStartHost is guaranteed to be called after the host server was</span></div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>        <span class="comment">// fully started and all the asynchronous StartHost magic is finished</span></div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>        <span class="comment">// (= scene loading), or immediately if there was no asynchronous magic.</span></div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>        <span class="comment">// note: we don&#39;t really need FinishStartClient/FinishStartServer. the</span></div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>        <span class="comment">//       host version is enough.</span></div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span>        <span class="keywordtype">void</span> FinishStartHost()</div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>        {</div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span>            <span class="comment">// ConnectHost needs to be called BEFORE SpawnObjects:</span></div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span>            <span class="comment">// https://github.com/vis2k/Mirror/pull/1249/</span></div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>            <span class="comment">// -&gt; this sets NetworkServer.localConnection.</span></div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>            <span class="comment">// -&gt; localConnection needs to be set before SpawnObjects because:</span></div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>            <span class="comment">//    -&gt; SpawnObjects calls OnStartServer in all NetworkBehaviours</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>            <span class="comment">//       -&gt; OnStartServer might spawn an object and set [SyncVar(hook=&quot;OnColorChanged&quot;)] object.color = green;</span></div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>            <span class="comment">//          -&gt; this calls SyncVar.set (generated by Weaver), which has</span></div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>            <span class="comment">//             a custom case for host mode (because host mode doesn&#39;t</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>            <span class="comment">//             get OnDeserialize calls, where SyncVar hooks are usually</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>            <span class="comment">//             called):</span></div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>            <span class="comment">//               if (!SyncVarEqual(value, ref color))</span></div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>            <span class="comment">//               {</span></div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>            <span class="comment">//                   if (NetworkServer.localClientActive &amp;&amp; !getSyncVarHookGuard(1uL))</span></div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>            <span class="comment">//                   {</span></div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>            <span class="comment">//                       setSyncVarHookGuard(1uL, value: true);</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>            <span class="comment">//                       OnColorChangedHook(value);</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>            <span class="comment">//                       setSyncVarHookGuard(1uL, value: false);</span></div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>            <span class="comment">//                   }</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>            <span class="comment">//                   SetSyncVar(value, ref color, 1uL);</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>            <span class="comment">//               }</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>            <span class="comment">//          -&gt; localClientActive needs to be true, otherwise the hook</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>            <span class="comment">//             isn&#39;t called in host mode!</span></div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>            <span class="comment">// TODO call this after spawnobjects and worry about the syncvar hook fix later?</span></div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>            NetworkClient.ConnectHost();</div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span> </div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>            <span class="comment">// invoke user callbacks AFTER ConnectHost has set .activeHost.</span></div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>            <span class="comment">// this way initialization can properly handle host mode.</span></div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>            <span class="comment">// fixes: https://github.com/MirrorNetworking/Mirror/issues/3302</span></div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>            <span class="comment">// where [SyncVar] hooks wouldn&#39;t be called for objects spawned in</span></div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>            <span class="comment">// NetworkManager.OnStartServer, because .activeHost was still false.</span></div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>            <span class="comment">// TODO is there a risk of someone connecting between Listen() and FinishStartHost()?</span></div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a0226295e867fd77ad9aef32d32d6ca88">OnStartServer</a>();</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span> </div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>            <span class="comment">// call OnStartHost AFTER SetupServer. this way we can use</span></div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>            <span class="comment">// NetworkServer.Spawn etc. in there too. just like OnStartServer</span></div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>            <span class="comment">// is called after the server is actually properly started.</span></div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a29b5da074510538134ac587a05b30180">OnStartHost</a>();</div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span>            <span class="comment">// server scene was loaded. now spawn all the objects</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>            NetworkServer.SpawnObjects();</div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span> </div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span>            <span class="comment">// connect client and call OnStartClient AFTER server scene was</span></div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span>            <span class="comment">// loaded and all objects were spawned.</span></div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>            <span class="comment">// DO NOT do this earlier. it would cause race conditions where a</span></div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>            <span class="comment">// client will do things before the server is even fully started.</span></div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>            <span class="comment">//Debug.Log(&quot;StartHostClient called&quot;);</span></div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>            SetupClient();</div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>            RegisterClientMessages();</div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span> </div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>            <span class="comment">// InvokeOnConnected needs to be called AFTER RegisterClientMessages</span></div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>            <span class="comment">// (https://github.com/vis2k/Mirror/pull/1249/)</span></div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span>            HostMode.InvokeOnConnected();</div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span> </div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a989b4a0365dd627ac963656a786ae69d">OnStartClient</a>();</div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>        }</div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span> </div>
<div class="foldopen" id="foldopen00599" data-start="{" data-end="}">
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a38cf1737bb408c021c0c2dcb56c837ba">  599</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a38cf1737bb408c021c0c2dcb56c837ba">StopHost</a>()</div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>        {</div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a09a36f56cc95fcb5b0f4b7fdcde7fc69">OnStopHost</a>();</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a6e127fabdafd35b09e9e58698a27b244">StopClient</a>();</div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a3a40b9ca73b07e223bdd57e1e89a3e82">StopServer</a>();</div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>        }</div>
</div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span> </div>
<div class="foldopen" id="foldopen00607" data-start="{" data-end="}">
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a3a40b9ca73b07e223bdd57e1e89a3e82">  607</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a3a40b9ca73b07e223bdd57e1e89a3e82">StopServer</a>()</div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>        {</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span>            <span class="comment">// return if already stopped to avoid recursion deadlock</span></div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span>            <span class="keywordflow">if</span> (!NetworkServer.active)</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span> </div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>            {</div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a>.<a class="code hl_variable" href="class_mirror_1_1_network_authenticator.html#ac2106a4b670a75135e22e9f7ce5e3583">OnServerAuthenticated</a>.RemoveListener(OnServerAuthenticated);</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a>.<a class="code hl_function" href="class_mirror_1_1_network_authenticator.html#adb61ff2a0351bdad0fff2072cefb56e4">OnStopServer</a>();</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span>            }</div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span> </div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>            <span class="comment">// Get Network Manager out of DDOL before going to offline scene</span></div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>            <span class="comment">// to avoid collision and let a fresh Network Manager be created.</span></div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>            <span class="comment">// IMPORTANT: .gameObject can be null if StopClient is called from</span></div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>            <span class="comment">//            OnApplicationQuit or from tests!</span></div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span>            <span class="keywordflow">if</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a> != <span class="keyword">null</span></div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span>                &amp;&amp; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>.scene.name == <span class="stringliteral">&quot;DontDestroyOnLoad&quot;</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span>                &amp;&amp; !<span class="keywordtype">string</span>.IsNullOrWhiteSpace(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>)</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span>                &amp;&amp; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SceneManager</a>.GetActiveScene().path != <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>)</div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SceneManager</a>.MoveGameObjectToScene(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SceneManager</a>.GetActiveScene());</div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span> </div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a60970702dbcd39e7c1e64a1417cc73af">OnStopServer</a>();</div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span> </div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>            <span class="comment">//Debug.Log(&quot;NetworkManager StopServer&quot;);</span></div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span>            NetworkServer.Shutdown();</div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span> </div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>            <span class="comment">// set offline mode BEFORE changing scene so that FinishStartScene</span></div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>            <span class="comment">// doesn&#39;t think we need initialize anything.</span></div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>            <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> = <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.Offline;</div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span> </div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>            <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">IsNullOrWhiteSpace</a>(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>))</div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>            {</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span>                <a class="code hl_function" href="class_mirror_1_1_network_manager.html#ae428a9f79881585ef5fef880f6c923ad">ServerChangeScene</a>(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>);</div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>            }</div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span> </div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a1a28ec0b06891f2b0907958df67ee42b">startPositionIndex</a> = 0;</div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span> </div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span>            <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span>        }</div>
</div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span> </div>
<div class="foldopen" id="foldopen00649" data-start="{" data-end="}">
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a6e127fabdafd35b09e9e58698a27b244">  649</a></span>        <span class="keyword">public</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a6e127fabdafd35b09e9e58698a27b244">StopClient</a>()</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>        {</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.Offline)</div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span> </div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>            <span class="comment">// For Host client, call OnServerDisconnect before NetworkClient.Disconnect</span></div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>            <span class="comment">// because we need NetworkServer.localConnection to not be null</span></div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>            <span class="comment">// NetworkClient.Disconnect will set it null.</span></div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.Host)</div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span>                <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a5a8b2aec8ce3a330b3a683ce64f24ef5">OnServerDisconnect</a>(NetworkServer.localConnection);</div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span> </div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>            <span class="comment">// ask client -&gt; transport to disconnect.</span></div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span>            <span class="comment">// handle voluntary and involuntary disconnects in OnClientDisconnect.</span></div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>            <span class="comment">//</span></div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>            <span class="comment">//   StopClient</span></div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>            <span class="comment">//     NetworkClient.Disconnect</span></div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span>            <span class="comment">//       Transport.Disconnect</span></div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>            <span class="comment">//         ...</span></div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>            <span class="comment">//       Transport.OnClientDisconnect</span></div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>            <span class="comment">//     NetworkClient.OnTransportDisconnect</span></div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>            <span class="comment">//   NetworkManager.OnClientDisconnect</span></div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>            NetworkClient.Disconnect();</div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span> </div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span><span class="preprocessor">#pragma warning disable 618</span></div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>            <span class="comment">// Remove when OnConnectionQualityChanged is removed.</span></div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>            NetworkClient.onConnectionQualityChanged -= <a class="code hl_function" href="class_mirror_1_1_network_manager.html#afc488979b7da5f02a603c26d638d61ac">OnConnectionQualityChanged</a>;</div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span><span class="preprocessor">#pragma warning restore 618</span></div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span> </div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>            <span class="comment">// UNET invoked OnDisconnected cleanup immediately.</span></div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>            <span class="comment">// let&#39;s keep it for now, in case any projects depend on it.</span></div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>            <span class="comment">// TODO simply remove this in the future.</span></div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span>            OnClientDisconnectInternal();</div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>        }</div>
</div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span> </div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>        <span class="comment">// called when quitting the application by closing the window / pressing</span></div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>        <span class="comment">// stop in the editor. virtual so that inheriting classes&#39;</span></div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>        <span class="comment">// OnApplicationQuit() can call base.OnApplicationQuit() too</span></div>
<div class="foldopen" id="foldopen00686" data-start="{" data-end="}">
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#abf44b9cdc538229e5a900060673ac281">  686</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#abf44b9cdc538229e5a900060673ac281">OnApplicationQuit</a>()</div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        {</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>            <span class="comment">// stop client first</span></div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>            <span class="comment">// (we want to send the quit packet to the server instead of waiting</span></div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>            <span class="comment">//  for a timeout)</span></div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>            <span class="keywordflow">if</span> (NetworkClient.isConnected)</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>            {</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>                <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a6e127fabdafd35b09e9e58698a27b244">StopClient</a>();</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>                <span class="comment">//Debug.Log(&quot;OnApplicationQuit: stopped client&quot;);</span></div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>            }</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span> </div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>            <span class="comment">// stop server after stopping client (for proper host mode stopping)</span></div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>            <span class="keywordflow">if</span> (NetworkServer.active)</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>            {</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>                <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a3a40b9ca73b07e223bdd57e1e89a3e82">StopServer</a>();</div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span>                <span class="comment">//Debug.Log(&quot;OnApplicationQuit: stopped server&quot;);</span></div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span>            }</div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span> </div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>            <span class="comment">// Call ResetStatics to reset statics and singleton</span></div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a0ab5ae25070df683a829610b367d3c4b">ResetStatics</a>();</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>        }</div>
</div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span> </div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span>        <span class="comment">// useful for dedicated servers.</span></div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>        <span class="comment">// useful for headless benchmark clients.</span></div>
<div class="foldopen" id="foldopen00711" data-start="{" data-end="}">
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a5a1b3d80829a261fbf4977d934257524">  711</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a5a1b3d80829a261fbf4977d934257524">ConfigureHeadlessFrameRate</a>()</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span>        {</div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>            <span class="keywordflow">if</span> (Utils.IsHeadless())</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>            {</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>                Application.targetFrameRate = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a1a0047cfbf0952c7ead67192b8f8ae7d">sendRate</a>;</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>                <span class="comment">// Debug.Log($&quot;Server Tick Rate set to {Application.targetFrameRate} Hz.&quot;);</span></div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>            }</div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span>        }</div>
</div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span> </div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>        <span class="keywordtype">bool</span> InitializeSingleton()</div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span>        {</div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0fda8121f67f6c13e153c7391bbad2bd">singleton</a> != <span class="keyword">null</span> &amp;&amp; <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0fda8121f67f6c13e153c7391bbad2bd">singleton</a> == <span class="keyword">this</span>)</div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>                <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span> </div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9a27bfac207d46188c6940155800c4ba">dontDestroyOnLoad</a>)</div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span>            {</div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>                <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0fda8121f67f6c13e153c7391bbad2bd">singleton</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>                {</div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>                    <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogWarning(<span class="stringliteral">&quot;Multiple NetworkManagers detected in the scene. Only one NetworkManager can exist at a time. The duplicate NetworkManager will be destroyed.&quot;</span>);</div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>                    Destroy(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">gameObject</a>);</div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span> </div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>                    <span class="comment">// Return false to not allow collision-destroyed second instance to continue.</span></div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>                }</div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>                <span class="comment">//Debug.Log(&quot;NetworkManager created singleton (DontDestroyOnLoad)&quot;);</span></div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>                <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0fda8121f67f6c13e153c7391bbad2bd">singleton</a> = <span class="keyword">this</span>;</div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>                <span class="keywordflow">if</span> (Application.isPlaying)</div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>                {</div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>                    <span class="comment">// Force the object to scene root, in case user made it a child of something</span></div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>                    <span class="comment">// in the scene since DDOL is only allowed for scene root objects</span></div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>                    transform.SetParent(<span class="keyword">null</span>);</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>                    DontDestroyOnLoad(gameObject);</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>                }</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span>            }</div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>            {</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span>                <span class="comment">//Debug.Log(&quot;NetworkManager created singleton (ForScene)&quot;);</span></div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span>                <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0fda8121f67f6c13e153c7391bbad2bd">singleton</a> = <span class="keyword">this</span>;</div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span>            }</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span> </div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>            <span class="comment">// set active transport AFTER setting singleton.</span></div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>            <span class="comment">// so only if we didn&#39;t destroy ourselves.</span></div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span> </div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span>            <span class="comment">// This tries to avoid missing transport errors and more clearly tells user what to fix.</span></div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7007bd753d6da4fd8b9ad945b8ab6c86">transport</a> == <span class="keyword">null</span>)</div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>                <span class="keywordflow">if</span> (TryGetComponent(out Transport newTransport))</div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span>                {</div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>                    <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogWarning($<span class="stringliteral">&quot;No Transport assigned to Network Manager - Using {newTransport} found on same object.&quot;</span>);</div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>                    <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7007bd753d6da4fd8b9ad945b8ab6c86">transport</a> = newTransport;</div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>                }</div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>                <span class="keywordflow">else</span></div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>                {</div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>                    <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError(<span class="stringliteral">&quot;No Transport on Network Manager...add a transport and assign it.&quot;</span>);</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span>                    <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>                }</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span> </div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>            Transport.active = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7007bd753d6da4fd8b9ad945b8ab6c86">transport</a>;</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span>            <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>        }</div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span> </div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>        <span class="keywordtype">void</span> RegisterServerMessages()</div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>        {</div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span>            NetworkServer.OnConnectedEvent = OnServerConnectInternal;</div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>            NetworkServer.OnDisconnectedEvent = <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a5a8b2aec8ce3a330b3a683ce64f24ef5">OnServerDisconnect</a>;</div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>            NetworkServer.OnErrorEvent = <a class="code hl_enumvalue" href="namespace_mirror.html#a73d30c411a48afc1b18bc409655a7ccda32c8dadfc7f21f87353e506070c77ac5">OnServerError</a>;</div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>            NetworkServer.RegisterHandler&lt;AddPlayerMessage&gt;(OnServerAddPlayerInternal);</div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span> </div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>            <span class="comment">// Network Server initially registers its own handler for this, so we replace it here.</span></div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>            NetworkServer.ReplaceHandler&lt;ReadyMessage&gt;(OnServerReadyMessageInternal);</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>        }</div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span> </div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>        <span class="keywordtype">void</span> RegisterClientMessages()</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>        {</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>            NetworkClient.OnConnectedEvent = OnClientConnectInternal;</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span>            NetworkClient.OnDisconnectedEvent = OnClientDisconnectInternal;</div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>            NetworkClient.OnErrorEvent = <a class="code hl_enumvalue" href="namespace_mirror.html#a3ded7157aa2bec42af24321d9fe69c38a83c5ece65aa7713b6fe63060d96b83fc">OnClientError</a>;</div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>            <span class="comment">// Don&#39;t require authentication because server may send NotReadyMessage from ServerChangeScene</span></div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>            NetworkClient.RegisterHandler&lt;NotReadyMessage&gt;(OnClientNotReadyMessageInternal, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>            NetworkClient.RegisterHandler&lt;SceneMessage&gt;(OnClientSceneInternal, <span class="keyword">false</span>);</div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span> </div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>                NetworkClient.RegisterPrefab(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a>);</div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span> </div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>            <span class="keywordflow">foreach</span> (GameObject prefab <span class="keywordflow">in</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a0a8603e11759317ca078ef8afabc08e3">spawnPrefabs</a>.Where(t =&gt; t != <span class="keyword">null</span>))</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>                NetworkClient.RegisterPrefab(prefab);</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>        }</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span> </div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>        <span class="comment">// This is the only way to clear the singleton, so another instance can be created.</span></div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>        <span class="comment">// RuntimeInitializeOnLoadMethod -&gt; fast playmode without domain reload</span></div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>        [RuntimeInitializeOnLoadMethod(RuntimeInitializeLoadType.BeforeSceneLoad)]</div>
<div class="foldopen" id="foldopen00801" data-start="{" data-end="}">
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a0ab5ae25070df683a829610b367d3c4b">  801</a></span>        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a0ab5ae25070df683a829610b367d3c4b">ResetStatics</a>()</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span>        {</div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span>            <span class="comment">// call StopHost if we have a singleton</span></div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0fda8121f67f6c13e153c7391bbad2bd">singleton</a>)</div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>                <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0fda8121f67f6c13e153c7391bbad2bd">singleton</a>.StopHost();</div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span> </div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>            <span class="comment">// reset all statics</span></div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a>.Clear();</div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a1a28ec0b06891f2b0907958df67ee42b">startPositionIndex</a> = 0;</div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>            clientReadyConnection = <span class="keyword">null</span>;</div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">loadingSceneAsync</a> = <span class="keyword">null</span>;</div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>            <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a> = <span class="keywordtype">string</span>.Empty;</div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span> </div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span>            <span class="comment">// and finally (in case it isn&#39;t null already)...</span></div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>            <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0fda8121f67f6c13e153c7391bbad2bd">singleton</a> = <span class="keyword">null</span>;</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>        }</div>
</div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span> </div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        <span class="comment">// virtual so that inheriting classes&#39; OnDestroy() can call base.OnDestroy() too</span></div>
<div class="foldopen" id="foldopen00819" data-start="{" data-end="}">
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a8358ad89e84ccb31cc96598b4e03d709">  819</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a8358ad89e84ccb31cc96598b4e03d709">OnDestroy</a>()</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>        {</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>            <span class="comment">//Debug.Log(&quot;NetworkManager destroyed&quot;);</span></div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span>        }</div>
</div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span> </div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        <span class="comment">// set by NetworkManager when changing the scene.</span></div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>        <span class="comment">// new clients will automatically load this scene.</span></div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>        <span class="comment">// Loading a scene manually won&#39;t set it.</span></div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">  828</a></span>        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">string</span> <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a> { <span class="keyword">get</span>; <span class="keyword">protected</span> <span class="keyword">set</span>; } = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span> </div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">  830</a></span>        <span class="keyword">public</span> <span class="keyword">static</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">AsyncOperation</a> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">loadingSceneAsync</a>;</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span> </div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>        <span class="comment">// Called automatically if onlineScene or offlineScene are set, but it</span></div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>        <span class="comment">// can be called from user code to switch scenes again while the game is</span></div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>        <span class="comment">// in progress. This automatically sets clients to be not-ready during</span></div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>        <span class="comment">// the change and ready again to participate in the new scene.</span></div>
<div class="foldopen" id="foldopen00837" data-start="{" data-end="}">
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#ae428a9f79881585ef5fef880f6c923ad">  837</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#ae428a9f79881585ef5fef880f6c923ad">ServerChangeScene</a>(<span class="keywordtype">string</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a>)</div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        {</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">IsNullOrWhiteSpace</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a>))</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span>            {</div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError(<span class="stringliteral">&quot;ServerChangeScene empty scene name&quot;</span>);</div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span>            }</div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span> </div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>            <span class="keywordflow">if</span> (NetworkServer.isLoadingScene &amp;&amp; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a> == <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a>)</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>            {</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;Scene change is already in progress for {newSceneName}&quot;</span>);</div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>            }</div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span> </div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>            <span class="comment">// Throw error if called from client</span></div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>            <span class="comment">// Allow changing scene while stopping the server</span></div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>            <span class="keywordflow">if</span> (!NetworkServer.active &amp;&amp; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a> != <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>)</div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>            {</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError(<span class="stringliteral">&quot;ServerChangeScene can only be called on an active server.&quot;</span>);</div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>            }</div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span> </div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>            <span class="comment">// Debug.Log($&quot;ServerChangeScene {newSceneName}&quot;);</span></div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>            NetworkServer.SetAllClientsNotReady();</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>            <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a>;</div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span> </div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>            <span class="comment">// Let server prepare for scene change</span></div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a328c8da98050688b524106c828bafdb8">OnServerChangeScene</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a>);</div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span> </div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>            <span class="comment">// set server flag to stop processing messages while changing scenes</span></div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>            <span class="comment">// it will be re-enabled in FinishLoadScene.</span></div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>            NetworkServer.isLoadingScene = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span> </div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">loadingSceneAsync</a> = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SceneManager</a>.LoadSceneAsync(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a>);</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span> </div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>            <span class="comment">// ServerChangeScene can be called when stopping the server</span></div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span>            <span class="comment">// when this happens the server is not active so does not need to tell clients about the change</span></div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span>            <span class="keywordflow">if</span> (NetworkServer.active)</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>            {</div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>                <span class="comment">// notify all clients about the new scene</span></div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>                NetworkServer.SendToAll(<span class="keyword">new</span> <a class="code hl_struct" href="struct_mirror_1_1_scene_message.html">SceneMessage</a></div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>                {</div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>                    sceneName = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a></div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span>                });</div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>            }</div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span> </div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a1a28ec0b06891f2b0907958df67ee42b">startPositionIndex</a> = 0;</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a>.Clear();</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>        }</div>
</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span> </div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        <span class="comment">// This is only set in ClientChangeScene below...never on server.</span></div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span>        <span class="comment">// We need to check this in OnClientSceneChanged called from FinishLoadSceneClientOnly</span></div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        <span class="comment">// to prevent AddPlayer message after loading/unloading additive scenes</span></div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>        <a class="code hl_enumeration" href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">SceneOperation</a> clientSceneOperation = <a class="code hl_enumeration" href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">SceneOperation</a>.Normal;</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span> </div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>        <span class="keyword">internal</span> <span class="keywordtype">void</span> ClientChangeScene(<span class="keywordtype">string</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a>, <a class="code hl_enumeration" href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">SceneOperation</a> sceneOperation = <a class="code hl_enumeration" href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">SceneOperation</a>.Normal, <span class="keywordtype">bool</span> customHandling = <span class="keyword">false</span>)</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>        {</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">IsNullOrWhiteSpace</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a>))</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>            {</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError(<span class="stringliteral">&quot;ClientChangeScene empty scene name&quot;</span>);</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>            }</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span> </div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>            <span class="comment">//Debug.Log($&quot;ClientChangeScene newSceneName: {newSceneName} networkSceneName{networkSceneName}&quot;);</span></div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span> </div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>            <span class="comment">// Let client prepare for scene change</span></div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a114a2174636b05f12f69de6499fcce89">OnClientChangeScene</a>(newSceneName, sceneOperation, customHandling);</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span> </div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>            <span class="comment">// After calling OnClientChangeScene, exit if server since server is already doing</span></div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>            <span class="comment">// the actual scene change, and we don&#39;t need to do it for the host client</span></div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>            <span class="keywordflow">if</span> (NetworkServer.active)</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span> </div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>            <span class="comment">// set client flag to stop processing messages while loading scenes.</span></div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>            <span class="comment">// otherwise we would process messages and then lose all the state</span></div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>            <span class="comment">// as soon as the load is finishing, causing all kinds of bugs</span></div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span>            <span class="comment">// because of missing state.</span></div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>            <span class="comment">// (client may be null after StopClient etc.)</span></div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>            <span class="comment">// Debug.Log(&quot;ClientChangeScene: pausing handlers while scene is loading to avoid data loss after scene was loaded.&quot;);</span></div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>            NetworkClient.isLoadingScene = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span> </div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>            <span class="comment">// Cache sceneOperation so we know what was requested by the</span></div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>            <span class="comment">// Scene message in OnClientChangeScene and OnClientSceneChanged</span></div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>            clientSceneOperation = sceneOperation;</div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span> </div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>            <span class="comment">// scene handling will happen in overrides of OnClientChangeScene and/or OnClientSceneChanged</span></div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>            <span class="comment">// Do not call FinishLoadScene here. Custom handler will assign loadingSceneAsync and we need</span></div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span>            <span class="comment">// to wait for that to finish. UpdateScene already checks for that to be not null and isDone.</span></div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>            <span class="keywordflow">if</span> (customHandling)</div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span> </div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>            <span class="keywordflow">switch</span> (sceneOperation)</div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>            {</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">SceneOperation</a>.Normal:</div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>                    <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">loadingSceneAsync</a> = SceneManager.LoadSceneAsync(newSceneName);</div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">SceneOperation</a>.LoadAdditive:</div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>                    <span class="comment">// Ensure additive scene is not already loaded on client by name or path</span></div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>                    <span class="comment">// since we don&#39;t know which was passed in the Scene message</span></div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>                    <span class="keywordflow">if</span> (!SceneManager.GetSceneByName(newSceneName).IsValid() &amp;&amp; !SceneManager.GetSceneByPath(newSceneName).IsValid())</div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>                        <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">loadingSceneAsync</a> = SceneManager.LoadSceneAsync(newSceneName, LoadSceneMode.Additive);</div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span>                    {</div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>                        <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogWarning($<span class="stringliteral">&quot;Scene {newSceneName} is already loaded&quot;</span>);</div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span> </div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>                        <span class="comment">// Reset the flag that we disabled before entering this switch</span></div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>                        NetworkClient.isLoadingScene = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>                    }</div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>                <span class="keywordflow">case</span> <a class="code hl_enumeration" href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">SceneOperation</a>.UnloadAdditive:</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span>                    <span class="comment">// Ensure additive scene is actually loaded on client by name or path</span></div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>                    <span class="comment">// since we don&#39;t know which was passed in the Scene message</span></div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>                    <span class="keywordflow">if</span> (SceneManager.GetSceneByName(newSceneName).IsValid() || SceneManager.GetSceneByPath(newSceneName).IsValid())</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>                        <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">loadingSceneAsync</a> = SceneManager.UnloadSceneAsync(newSceneName, UnloadSceneOptions.UnloadAllEmbeddedSceneObjects);</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>                    <span class="keywordflow">else</span></div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span>                    {</div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span>                        <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogWarning($<span class="stringliteral">&quot;Cannot unload {newSceneName} with UnloadAdditive operation&quot;</span>);</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span> </div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>                        <span class="comment">// Reset the flag that we disabled before entering this switch</span></div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>                        NetworkClient.isLoadingScene = <span class="keyword">false</span>;</div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>                    }</div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>            }</div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span> </div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>            <span class="comment">// don&#39;t change the client&#39;s current networkSceneName when loading additive scene content</span></div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>            <span class="keywordflow">if</span> (sceneOperation == <a class="code hl_enumeration" href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">SceneOperation</a>.Normal)</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>                <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a> = newSceneName;</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span>        }</div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span> </div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>        <span class="comment">// support additive scene loads:</span></div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span>        <span class="comment">//   NetworkScenePostProcess disables all scene objects on load, and</span></div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>        <span class="comment">//   * NetworkServer.SpawnObjects enables them again on the server when</span></div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>        <span class="comment">//     calling OnStartServer</span></div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span>        <span class="comment">//   * NetworkClient.PrepareToSpawnSceneObjects enables them again on the</span></div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>        <span class="comment">//     client after the server sends ObjectSpawnStartedMessage to client</span></div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>        <span class="comment">//     in SpawnObserversForConnection. this is only called when the</span></div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>        <span class="comment">//     client joins, so we need to rebuild scene objects manually again</span></div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>        <span class="comment">// TODO merge this with FinishLoadScene()?</span></div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>        <span class="keywordtype">void</span> OnSceneLoaded(Scene scene, LoadSceneMode <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a>)</div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>        {</div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> == LoadSceneMode.Additive)</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>            {</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>                <span class="keywordflow">if</span> (NetworkServer.active)</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span>                {</div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span>                    <span class="comment">// TODO only respawn the server objects from that scene later!</span></div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>                    NetworkServer.SpawnObjects();</div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>                    <span class="comment">// Debug.Log($&quot;Respawned Server objects after additive scene load: {scene.name}&quot;);</span></div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>                }</div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>                <span class="keywordflow">if</span> (NetworkClient.active)</div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>                {</div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>                    NetworkClient.PrepareToSpawnSceneObjects();</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>                    <span class="comment">// Debug.Log($&quot;Rebuild Client spawnableObjects after additive scene load: {scene.name}&quot;);</span></div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span>                }</div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span>            }</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>        }</div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span> </div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>        <span class="keywordtype">void</span> UpdateScene()</div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>        {</div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">loadingSceneAsync</a> != <span class="keyword">null</span> &amp;&amp; <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">loadingSceneAsync</a>.isDone)</div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>            {</div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>                <span class="comment">//Debug.Log($&quot;ClientChangeScene done readyConn {clientReadyConnection}&quot;);</span></div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span> </div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>                <span class="comment">// try-finally to guarantee loadingSceneAsync being cleared.</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>                <span class="comment">// fixes https://github.com/vis2k/Mirror/issues/2517 where if</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>                <span class="comment">// FinishLoadScene throws an exception, loadingSceneAsync would</span></div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>                <span class="comment">// never be cleared and this code would run every Update.</span></div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>                <span class="keywordflow">try</span></div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>                {</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>                    <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a8956209ed00207528d3c66c6278fc47f">FinishLoadScene</a>();</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>                }</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>                <span class="keywordflow">finally</span></div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>                {</div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>                    loadingSceneAsync.allowSceneActivation = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>                    <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">loadingSceneAsync</a> = <span class="keyword">null</span>;</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>                }</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>            }</div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>        }</div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span> </div>
<div class="foldopen" id="foldopen01015" data-start="{" data-end="}">
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a8956209ed00207528d3c66c6278fc47f"> 1015</a></span>        <span class="keyword">protected</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a8956209ed00207528d3c66c6278fc47f">FinishLoadScene</a>()</div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>        {</div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>            <span class="comment">// NOTE: this cannot use NetworkClient.allClients[0] - that client may be for a completely different purpose.</span></div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span> </div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>            <span class="comment">// process queued messages that we received while loading the scene</span></div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>            <span class="comment">//Debug.Log(&quot;FinishLoadScene: resuming handlers after scene was loading.&quot;);</span></div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>            NetworkServer.isLoadingScene = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>            NetworkClient.isLoadingScene = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span> </div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>            <span class="comment">// host mode?</span></div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.Host)</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>            {</div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>                FinishLoadSceneHost();</div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>            }</div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>            <span class="comment">// server-only mode?</span></div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.ServerOnly)</div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>            {</div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>                FinishLoadSceneServerOnly();</div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>            }</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>            <span class="comment">// client-only mode?</span></div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.ClientOnly)</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>            {</div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>                FinishLoadSceneClientOnly();</div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>            }</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span>            <span class="comment">// otherwise we called it after stopping when loading offline scene.</span></div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>            <span class="comment">// do nothing then.</span></div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>        }</div>
</div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span> </div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span>        <span class="comment">// finish load scene part for host mode. makes code easier and is</span></div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span>        <span class="comment">// necessary for FinishStartHost later.</span></div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>        <span class="comment">// (the 3 things have to happen in that exact order)</span></div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>        <span class="keywordtype">void</span> FinishLoadSceneHost()</div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>        {</div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>            <span class="comment">// debug message is very important. if we ever break anything then</span></div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>            <span class="comment">// it&#39;s very obvious to notice.</span></div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span>            <span class="comment">//Debug.Log(&quot;Finished loading scene in host mode.&quot;);</span></div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span> </div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>            <span class="keywordflow">if</span> (clientReadyConnection != <span class="keyword">null</span>)</div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>            {</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7079cb91ab3aca157345929081f7bd63">clientLoadedScene</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>                clientReadyConnection = <span class="keyword">null</span>;</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>            }</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span> </div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span>            <span class="comment">// do we need to finish a StartHost() call?</span></div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span>            <span class="comment">// then call FinishStartHost and let it take care of spawning etc.</span></div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>            <span class="keywordflow">if</span> (finishStartHostPending)</div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>            {</div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>                finishStartHostPending = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>                FinishStartHost();</div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span> </div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>                <span class="comment">// call OnServerSceneChanged</span></div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>                <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a93ae8a9ca02afa60598d464779e1bca5">OnServerSceneChanged</a>(<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a>);</div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span> </div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>                <span class="comment">// DO NOT call OnClientSceneChanged here.</span></div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>                <span class="comment">// the scene change happened because StartHost loaded the</span></div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>                <span class="comment">// server&#39;s online scene. it has nothing to do with the client.</span></div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>                <span class="comment">// this was not meant as a client scene load, so don&#39;t call it.</span></div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>                <span class="comment">//</span></div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span>                <span class="comment">// otherwise AddPlayer would be called twice:</span></div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>                <span class="comment">// -&gt; once for client OnConnected</span></div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>                <span class="comment">// -&gt; once in OnClientSceneChanged</span></div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>            }</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>            <span class="comment">// otherwise we just changed a scene in host mode</span></div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>            {</div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>                <span class="comment">// spawn server objects</span></div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>                NetworkServer.SpawnObjects();</div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span> </div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>                <span class="comment">// call OnServerSceneChanged</span></div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>                <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a93ae8a9ca02afa60598d464779e1bca5">OnServerSceneChanged</a>(<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a>);</div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span> </div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>                <span class="keywordflow">if</span> (NetworkClient.isConnected)</div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>                    <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a70c44f1bb14574f27ffb5b1c8bfecde3">OnClientSceneChanged</a>();</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>            }</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>        }</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span> </div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span>        <span class="comment">// finish load scene part for server-only. . makes code easier and is</span></div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span>        <span class="comment">// necessary for FinishStartServer later.</span></div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>        <span class="keywordtype">void</span> FinishLoadSceneServerOnly()</div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>        {</div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>            <span class="comment">// debug message is very important. if we ever break anything then</span></div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>            <span class="comment">// it&#39;s very obvious to notice.</span></div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>            <span class="comment">//Debug.Log(&quot;Finished loading scene in server-only mode.&quot;);</span></div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span> </div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>            NetworkServer.SpawnObjects();</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a93ae8a9ca02afa60598d464779e1bca5">OnServerSceneChanged</a>(<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a>);</div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>        }</div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span> </div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>        <span class="comment">// finish load scene part for client-only. makes code easier and is</span></div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>        <span class="comment">// necessary for FinishStartClient later.</span></div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>        <span class="keywordtype">void</span> FinishLoadSceneClientOnly()</div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>        {</div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>            <span class="comment">// debug message is very important. if we ever break anything then</span></div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span>            <span class="comment">// it&#39;s very obvious to notice.</span></div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>            <span class="comment">//Debug.Log(&quot;Finished loading scene in client-only mode.&quot;);</span></div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span> </div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>            <span class="keywordflow">if</span> (clientReadyConnection != <span class="keyword">null</span>)</div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>            {</div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7079cb91ab3aca157345929081f7bd63">clientLoadedScene</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>                clientReadyConnection = <span class="keyword">null</span>;</div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>            }</div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span> </div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>            <span class="keywordflow">if</span> (NetworkClient.isConnected)</div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>                <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a70c44f1bb14574f27ffb5b1c8bfecde3">OnClientSceneChanged</a>();</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>        }</div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span> </div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span>        <span class="comment">// Static because it&#39;s called from NetworkStartPosition::Awake</span></div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span>        <span class="comment">// and singleton may not exist yet</span></div>
<div class="foldopen" id="foldopen01128" data-start="{" data-end="}">
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a44753113feef2e4f0bec30dde393f966"> 1128</a></span>        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a44753113feef2e4f0bec30dde393f966">RegisterStartPosition</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Transform</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">start</a>)</div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span>        {</div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span>            <span class="comment">// Debug.Log($&quot;RegisterStartPosition: {start.gameObject.name} {start.position}&quot;);</span></div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a>.Add(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">start</a>);</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span> </div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span>            <span class="comment">// reorder the list so that round-robin spawning uses the start positions</span></div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span>            <span class="comment">// in hierarchy order.  This assumes all objects with NetworkStartPosition</span></div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span>            <span class="comment">// component are siblings, either in the scene root or together as children</span></div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>            <span class="comment">// under a single parent in the scene.</span></div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a> = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a>.OrderBy(transform =&gt; transform.GetSiblingIndex()).ToList();</div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>        }</div>
</div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span> </div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>        <span class="comment">// Static because it&#39;s called from NetworkStartPosition::OnDestroy</span></div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span>        <span class="comment">// and singleton may not exist yet</span></div>
<div class="foldopen" id="foldopen01143" data-start="{" data-end="}">
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#ac2295dcd5454f7dd2f30c9648abd5abe"> 1143</a></span>        <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#ac2295dcd5454f7dd2f30c9648abd5abe">UnRegisterStartPosition</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Transform</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">start</a>)</div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>        {</div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span>            <span class="comment">//Debug.Log($&quot;UnRegisterStartPosition: {start.name} {start.position}&quot;);</span></div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a>.Remove(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">start</a>);</div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>        }</div>
</div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span> </div>
<div class="foldopen" id="foldopen01150" data-start="{" data-end="}">
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#acf2e32b2b01150fa5867161fbe514e98"> 1150</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Transform</a> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#acf2e32b2b01150fa5867161fbe514e98">GetStartPosition</a>()</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span>        {</div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>            <span class="comment">// first remove any dead transforms</span></div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>            <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a>.RemoveAll(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">t</a> =&gt; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">t</a> == <span class="keyword">null</span>);</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span> </div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a>.Count == 0)</div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>                <span class="keywordflow">return</span> <span class="keyword">null</span>;</div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span> </div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ae6167e3960b1a34e09ea97868d1cc60e">playerSpawnMethod</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a23132665b6a9f18117f09ce19aec9609">PlayerSpawnMethod</a>.Random)</div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span>            {</div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>                <span class="keywordflow">return</span> <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a>[UnityEngine.Random.Range(0, <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a>.Count)];</div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>            }</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>            {</div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Transform</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">startPosition</a> = <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a>[<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a1a28ec0b06891f2b0907958df67ee42b">startPositionIndex</a>];</div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a1a28ec0b06891f2b0907958df67ee42b">startPositionIndex</a> = (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a1a28ec0b06891f2b0907958df67ee42b">startPositionIndex</a> + 1) % <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">startPositions</a>.Count;</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>                <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">startPosition</a>;</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>            }</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>        }</div>
</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span> </div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>        <span class="keywordtype">void</span> OnServerConnectInternal(<a class="code hl_class" href="class_mirror_1_1_network_connection_to_client.html">NetworkConnectionToClient</a> conn)</div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>        {</div>
<div class="line"><a id="l01172" name="l01172"></a><span class="lineno"> 1172</span>            <span class="comment">//Debug.Log(&quot;NetworkManager.OnServerConnectInternal&quot;);</span></div>
<div class="line"><a id="l01173" name="l01173"></a><span class="lineno"> 1173</span> </div>
<div class="line"><a id="l01174" name="l01174"></a><span class="lineno"> 1174</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l01175" name="l01175"></a><span class="lineno"> 1175</span>            {</div>
<div class="line"><a id="l01176" name="l01176"></a><span class="lineno"> 1176</span>                <span class="comment">// we have an authenticator - let it handle authentication</span></div>
<div class="line"><a id="l01177" name="l01177"></a><span class="lineno"> 1177</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a>.<a class="code hl_function" href="class_mirror_1_1_network_authenticator.html#a2faad501b13797328bf0283c77c19fb3">OnServerAuthenticate</a>(conn);</div>
<div class="line"><a id="l01178" name="l01178"></a><span class="lineno"> 1178</span>            }</div>
<div class="line"><a id="l01179" name="l01179"></a><span class="lineno"> 1179</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01180" name="l01180"></a><span class="lineno"> 1180</span>            {</div>
<div class="line"><a id="l01181" name="l01181"></a><span class="lineno"> 1181</span>                <span class="comment">// authenticate immediately</span></div>
<div class="line"><a id="l01182" name="l01182"></a><span class="lineno"> 1182</span>                OnServerAuthenticated(conn);</div>
<div class="line"><a id="l01183" name="l01183"></a><span class="lineno"> 1183</span>            }</div>
<div class="line"><a id="l01184" name="l01184"></a><span class="lineno"> 1184</span>        }</div>
<div class="line"><a id="l01185" name="l01185"></a><span class="lineno"> 1185</span> </div>
<div class="line"><a id="l01186" name="l01186"></a><span class="lineno"> 1186</span>        <span class="comment">// called after successful authentication</span></div>
<div class="line"><a id="l01187" name="l01187"></a><span class="lineno"> 1187</span>        <span class="comment">// TODO do the NetworkServer.OnAuthenticated thing from x branch</span></div>
<div class="line"><a id="l01188" name="l01188"></a><span class="lineno"> 1188</span>        <span class="keywordtype">void</span> OnServerAuthenticated(NetworkConnectionToClient conn)</div>
<div class="line"><a id="l01189" name="l01189"></a><span class="lineno"> 1189</span>        {</div>
<div class="line"><a id="l01190" name="l01190"></a><span class="lineno"> 1190</span>            <span class="comment">//Debug.Log(&quot;NetworkManager.OnServerAuthenticated&quot;);</span></div>
<div class="line"><a id="l01191" name="l01191"></a><span class="lineno"> 1191</span> </div>
<div class="line"><a id="l01192" name="l01192"></a><span class="lineno"> 1192</span>            <span class="comment">// set connection to authenticated</span></div>
<div class="line"><a id="l01193" name="l01193"></a><span class="lineno"> 1193</span>            conn.isAuthenticated = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01194" name="l01194"></a><span class="lineno"> 1194</span> </div>
<div class="line"><a id="l01195" name="l01195"></a><span class="lineno"> 1195</span>            <span class="comment">// proceed with the login handshake by calling OnServerConnect</span></div>
<div class="line"><a id="l01196" name="l01196"></a><span class="lineno"> 1196</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a> != <span class="stringliteral">&quot;&quot;</span> &amp;&amp; <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a> != <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>)</div>
<div class="line"><a id="l01197" name="l01197"></a><span class="lineno"> 1197</span>            {</div>
<div class="line"><a id="l01198" name="l01198"></a><span class="lineno"> 1198</span>                SceneMessage msg = <span class="keyword">new</span> SceneMessage()</div>
<div class="line"><a id="l01199" name="l01199"></a><span class="lineno"> 1199</span>                {</div>
<div class="line"><a id="l01200" name="l01200"></a><span class="lineno"> 1200</span>                    sceneName = <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a></div>
<div class="line"><a id="l01201" name="l01201"></a><span class="lineno"> 1201</span>                };</div>
<div class="line"><a id="l01202" name="l01202"></a><span class="lineno"> 1202</span>                conn.Send(msg);</div>
<div class="line"><a id="l01203" name="l01203"></a><span class="lineno"> 1203</span>            }</div>
<div class="line"><a id="l01204" name="l01204"></a><span class="lineno"> 1204</span> </div>
<div class="line"><a id="l01205" name="l01205"></a><span class="lineno"> 1205</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#ad0147810e5a4fbb5deb8ff7083f72e4b">OnServerConnect</a>(conn);</div>
<div class="line"><a id="l01206" name="l01206"></a><span class="lineno"> 1206</span>        }</div>
<div class="line"><a id="l01207" name="l01207"></a><span class="lineno"> 1207</span> </div>
<div class="line"><a id="l01208" name="l01208"></a><span class="lineno"> 1208</span>        <span class="keywordtype">void</span> OnServerReadyMessageInternal(NetworkConnectionToClient conn, ReadyMessage msg)</div>
<div class="line"><a id="l01209" name="l01209"></a><span class="lineno"> 1209</span>        {</div>
<div class="line"><a id="l01210" name="l01210"></a><span class="lineno"> 1210</span>            <span class="comment">//Debug.Log(&quot;NetworkManager.OnServerReadyMessageInternal&quot;);</span></div>
<div class="line"><a id="l01211" name="l01211"></a><span class="lineno"> 1211</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#aaca5496d1641eb1eab14d0b8b34a9c0e">OnServerReady</a>(conn);</div>
<div class="line"><a id="l01212" name="l01212"></a><span class="lineno"> 1212</span>        }</div>
<div class="line"><a id="l01213" name="l01213"></a><span class="lineno"> 1213</span> </div>
<div class="line"><a id="l01214" name="l01214"></a><span class="lineno"> 1214</span>        <span class="keywordtype">void</span> OnServerAddPlayerInternal(NetworkConnectionToClient conn, AddPlayerMessage msg)</div>
<div class="line"><a id="l01215" name="l01215"></a><span class="lineno"> 1215</span>        {</div>
<div class="line"><a id="l01216" name="l01216"></a><span class="lineno"> 1216</span>            <span class="comment">//Debug.Log(&quot;NetworkManager.OnServerAddPlayer&quot;);</span></div>
<div class="line"><a id="l01217" name="l01217"></a><span class="lineno"> 1217</span> </div>
<div class="line"><a id="l01218" name="l01218"></a><span class="lineno"> 1218</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a5feedb04fce427328f8b0b2fdc4aaecf">autoCreatePlayer</a> &amp;&amp; <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a> == <span class="keyword">null</span>)</div>
<div class="line"><a id="l01219" name="l01219"></a><span class="lineno"> 1219</span>            {</div>
<div class="line"><a id="l01220" name="l01220"></a><span class="lineno"> 1220</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError(<span class="stringliteral">&quot;The PlayerPrefab is empty on the NetworkManager. Please setup a PlayerPrefab object.&quot;</span>);</div>
<div class="line"><a id="l01221" name="l01221"></a><span class="lineno"> 1221</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01222" name="l01222"></a><span class="lineno"> 1222</span>            }</div>
<div class="line"><a id="l01223" name="l01223"></a><span class="lineno"> 1223</span> </div>
<div class="line"><a id="l01224" name="l01224"></a><span class="lineno"> 1224</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a5feedb04fce427328f8b0b2fdc4aaecf">autoCreatePlayer</a> &amp;&amp; !<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a>.TryGetComponent(out NetworkIdentity _))</div>
<div class="line"><a id="l01225" name="l01225"></a><span class="lineno"> 1225</span>            {</div>
<div class="line"><a id="l01226" name="l01226"></a><span class="lineno"> 1226</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError(<span class="stringliteral">&quot;The PlayerPrefab does not have a NetworkIdentity. Please add a NetworkIdentity to the player prefab.&quot;</span>);</div>
<div class="line"><a id="l01227" name="l01227"></a><span class="lineno"> 1227</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01228" name="l01228"></a><span class="lineno"> 1228</span>            }</div>
<div class="line"><a id="l01229" name="l01229"></a><span class="lineno"> 1229</span> </div>
<div class="line"><a id="l01230" name="l01230"></a><span class="lineno"> 1230</span>            <span class="keywordflow">if</span> (conn.identity != <span class="keyword">null</span>)</div>
<div class="line"><a id="l01231" name="l01231"></a><span class="lineno"> 1231</span>            {</div>
<div class="line"><a id="l01232" name="l01232"></a><span class="lineno"> 1232</span>                <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError(<span class="stringliteral">&quot;There is already a player for this connection.&quot;</span>);</div>
<div class="line"><a id="l01233" name="l01233"></a><span class="lineno"> 1233</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01234" name="l01234"></a><span class="lineno"> 1234</span>            }</div>
<div class="line"><a id="l01235" name="l01235"></a><span class="lineno"> 1235</span> </div>
<div class="line"><a id="l01236" name="l01236"></a><span class="lineno"> 1236</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#acfa046ec2fa84cebc9fc267b77bd9bc6">OnServerAddPlayer</a>(conn);</div>
<div class="line"><a id="l01237" name="l01237"></a><span class="lineno"> 1237</span>        }</div>
<div class="line"><a id="l01238" name="l01238"></a><span class="lineno"> 1238</span> </div>
<div class="line"><a id="l01239" name="l01239"></a><span class="lineno"> 1239</span>        <span class="keywordtype">void</span> OnClientConnectInternal()</div>
<div class="line"><a id="l01240" name="l01240"></a><span class="lineno"> 1240</span>        {</div>
<div class="line"><a id="l01241" name="l01241"></a><span class="lineno"> 1241</span>            <span class="comment">//Debug.Log(&quot;NetworkManager.OnClientConnectInternal&quot;);</span></div>
<div class="line"><a id="l01242" name="l01242"></a><span class="lineno"> 1242</span> </div>
<div class="line"><a id="l01243" name="l01243"></a><span class="lineno"> 1243</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l01244" name="l01244"></a><span class="lineno"> 1244</span>            {</div>
<div class="line"><a id="l01245" name="l01245"></a><span class="lineno"> 1245</span>                <span class="comment">// we have an authenticator - let it handle authentication</span></div>
<div class="line"><a id="l01246" name="l01246"></a><span class="lineno"> 1246</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a>.<a class="code hl_function" href="class_mirror_1_1_network_authenticator.html#a1d291ecc227ccdc3cdff6d6471d3295a">OnClientAuthenticate</a>();</div>
<div class="line"><a id="l01247" name="l01247"></a><span class="lineno"> 1247</span>            }</div>
<div class="line"><a id="l01248" name="l01248"></a><span class="lineno"> 1248</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01249" name="l01249"></a><span class="lineno"> 1249</span>            {</div>
<div class="line"><a id="l01250" name="l01250"></a><span class="lineno"> 1250</span>                <span class="comment">// authenticate immediately</span></div>
<div class="line"><a id="l01251" name="l01251"></a><span class="lineno"> 1251</span>                OnClientAuthenticated();</div>
<div class="line"><a id="l01252" name="l01252"></a><span class="lineno"> 1252</span>            }</div>
<div class="line"><a id="l01253" name="l01253"></a><span class="lineno"> 1253</span>        }</div>
<div class="line"><a id="l01254" name="l01254"></a><span class="lineno"> 1254</span> </div>
<div class="line"><a id="l01255" name="l01255"></a><span class="lineno"> 1255</span>        <span class="comment">// called after successful authentication</span></div>
<div class="line"><a id="l01256" name="l01256"></a><span class="lineno"> 1256</span>        <span class="keywordtype">void</span> OnClientAuthenticated()</div>
<div class="line"><a id="l01257" name="l01257"></a><span class="lineno"> 1257</span>        {</div>
<div class="line"><a id="l01258" name="l01258"></a><span class="lineno"> 1258</span>            <span class="comment">//Debug.Log(&quot;NetworkManager.OnClientAuthenticated&quot;);</span></div>
<div class="line"><a id="l01259" name="l01259"></a><span class="lineno"> 1259</span> </div>
<div class="line"><a id="l01260" name="l01260"></a><span class="lineno"> 1260</span>            <span class="comment">// set connection to authenticated</span></div>
<div class="line"><a id="l01261" name="l01261"></a><span class="lineno"> 1261</span>            NetworkClient.connection.isAuthenticated = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01262" name="l01262"></a><span class="lineno"> 1262</span> </div>
<div class="line"><a id="l01263" name="l01263"></a><span class="lineno"> 1263</span>            <span class="comment">// Set flag to wait for scene change?</span></div>
<div class="line"><a id="l01264" name="l01264"></a><span class="lineno"> 1264</span>            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>.IsNullOrWhiteSpace(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a94a71162ac38d4c83fc528c27bbd934f">onlineScene</a>) || <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a94a71162ac38d4c83fc528c27bbd934f">onlineScene</a> == <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a> || Utils.IsSceneActive(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a94a71162ac38d4c83fc528c27bbd934f">onlineScene</a>))</div>
<div class="line"><a id="l01265" name="l01265"></a><span class="lineno"> 1265</span>            {</div>
<div class="line"><a id="l01266" name="l01266"></a><span class="lineno"> 1266</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7079cb91ab3aca157345929081f7bd63">clientLoadedScene</a> = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01267" name="l01267"></a><span class="lineno"> 1267</span>            }</div>
<div class="line"><a id="l01268" name="l01268"></a><span class="lineno"> 1268</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01269" name="l01269"></a><span class="lineno"> 1269</span>            {</div>
<div class="line"><a id="l01270" name="l01270"></a><span class="lineno"> 1270</span>                <span class="comment">// Scene message expected from server.</span></div>
<div class="line"><a id="l01271" name="l01271"></a><span class="lineno"> 1271</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7079cb91ab3aca157345929081f7bd63">clientLoadedScene</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l01272" name="l01272"></a><span class="lineno"> 1272</span>                clientReadyConnection = NetworkClient.connection;</div>
<div class="line"><a id="l01273" name="l01273"></a><span class="lineno"> 1273</span>            }</div>
<div class="line"><a id="l01274" name="l01274"></a><span class="lineno"> 1274</span> </div>
<div class="line"><a id="l01275" name="l01275"></a><span class="lineno"> 1275</span>            <span class="comment">// Call virtual method regardless of whether a scene change is expected or not.</span></div>
<div class="line"><a id="l01276" name="l01276"></a><span class="lineno"> 1276</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a00afc51b7c8508cad790356d31793cce">OnClientConnect</a>();</div>
<div class="line"><a id="l01277" name="l01277"></a><span class="lineno"> 1277</span>        }</div>
<div class="line"><a id="l01278" name="l01278"></a><span class="lineno"> 1278</span> </div>
<div class="line"><a id="l01279" name="l01279"></a><span class="lineno"> 1279</span>        <span class="comment">// Transport callback, invoked after client fully disconnected.</span></div>
<div class="line"><a id="l01280" name="l01280"></a><span class="lineno"> 1280</span>        <span class="comment">// the call order should always be:</span></div>
<div class="line"><a id="l01281" name="l01281"></a><span class="lineno"> 1281</span>        <span class="comment">//   Disconnect() -&gt; ask Transport -&gt; Transport.OnDisconnected -&gt; Cleanup</span></div>
<div class="line"><a id="l01282" name="l01282"></a><span class="lineno"> 1282</span>        <span class="keywordtype">void</span> OnClientDisconnectInternal()</div>
<div class="line"><a id="l01283" name="l01283"></a><span class="lineno"> 1283</span>        {</div>
<div class="line"><a id="l01284" name="l01284"></a><span class="lineno"> 1284</span>            <span class="comment">//Debug.Log(&quot;NetworkManager.OnClientDisconnectInternal&quot;);</span></div>
<div class="line"><a id="l01285" name="l01285"></a><span class="lineno"> 1285</span> </div>
<div class="line"><a id="l01286" name="l01286"></a><span class="lineno"> 1286</span>            <span class="comment">// Only let this run once. StopClient in Host mode changes to ServerOnly</span></div>
<div class="line"><a id="l01287" name="l01287"></a><span class="lineno"> 1287</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.ServerOnly || <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.Offline)</div>
<div class="line"><a id="l01288" name="l01288"></a><span class="lineno"> 1288</span>                <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01289" name="l01289"></a><span class="lineno"> 1289</span> </div>
<div class="line"><a id="l01290" name="l01290"></a><span class="lineno"> 1290</span>            <span class="comment">// user callback</span></div>
<div class="line"><a id="l01291" name="l01291"></a><span class="lineno"> 1291</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a97acbe5e20334a1b3591241c8a7f8e0f">OnClientDisconnect</a>();</div>
<div class="line"><a id="l01292" name="l01292"></a><span class="lineno"> 1292</span> </div>
<div class="line"><a id="l01293" name="l01293"></a><span class="lineno"> 1293</span>            <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a> != <span class="keyword">null</span>)</div>
<div class="line"><a id="l01294" name="l01294"></a><span class="lineno"> 1294</span>            {</div>
<div class="line"><a id="l01295" name="l01295"></a><span class="lineno"> 1295</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a>.<a class="code hl_variable" href="class_mirror_1_1_network_authenticator.html#a2cda88ca8c624d1118e5b7e5bc88360b">OnClientAuthenticated</a>.RemoveListener(OnClientAuthenticated);</div>
<div class="line"><a id="l01296" name="l01296"></a><span class="lineno"> 1296</span>                <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">authenticator</a>.<a class="code hl_function" href="class_mirror_1_1_network_authenticator.html#abdc516cb1b1997aa49d5ec46d385aecb">OnStopClient</a>();</div>
<div class="line"><a id="l01297" name="l01297"></a><span class="lineno"> 1297</span>            }</div>
<div class="line"><a id="l01298" name="l01298"></a><span class="lineno"> 1298</span> </div>
<div class="line"><a id="l01299" name="l01299"></a><span class="lineno"> 1299</span>            <span class="comment">// set mode BEFORE changing scene so FinishStartScene doesn&#39;t re-initialize anything.</span></div>
<div class="line"><a id="l01300" name="l01300"></a><span class="lineno"> 1300</span>            <span class="comment">// set mode BEFORE NetworkClient.Disconnect so StopClient only runs once.</span></div>
<div class="line"><a id="l01301" name="l01301"></a><span class="lineno"> 1301</span>            <span class="comment">// set mode BEFORE OnStopClient so StopClient only runs once.</span></div>
<div class="line"><a id="l01302" name="l01302"></a><span class="lineno"> 1302</span>            <span class="comment">// If we got here from StopClient in Host mode, change to ServerOnly.</span></div>
<div class="line"><a id="l01303" name="l01303"></a><span class="lineno"> 1303</span>            <span class="comment">// - If StopHost was called, StopServer will put us in Offline mode.</span></div>
<div class="line"><a id="l01304" name="l01304"></a><span class="lineno"> 1304</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.Host)</div>
<div class="line"><a id="l01305" name="l01305"></a><span class="lineno"> 1305</span>                <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> = <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.ServerOnly;</div>
<div class="line"><a id="l01306" name="l01306"></a><span class="lineno"> 1306</span>            <span class="keywordflow">else</span></div>
<div class="line"><a id="l01307" name="l01307"></a><span class="lineno"> 1307</span>                <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> = <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.Offline;</div>
<div class="line"><a id="l01308" name="l01308"></a><span class="lineno"> 1308</span> </div>
<div class="line"><a id="l01309" name="l01309"></a><span class="lineno"> 1309</span>            <span class="comment">//Debug.Log(&quot;NetworkManager StopClient&quot;);</span></div>
<div class="line"><a id="l01310" name="l01310"></a><span class="lineno"> 1310</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a4289f8e4a460b810a29fea59cc738f71">OnStopClient</a>();</div>
<div class="line"><a id="l01311" name="l01311"></a><span class="lineno"> 1311</span> </div>
<div class="line"><a id="l01312" name="l01312"></a><span class="lineno"> 1312</span>            <span class="comment">// shutdown client</span></div>
<div class="line"><a id="l01313" name="l01313"></a><span class="lineno"> 1313</span>            NetworkClient.Shutdown();</div>
<div class="line"><a id="l01314" name="l01314"></a><span class="lineno"> 1314</span> </div>
<div class="line"><a id="l01315" name="l01315"></a><span class="lineno"> 1315</span>            <span class="comment">// Exit here if we&#39;re now in ServerOnly mode (StopClient called in Host mode).</span></div>
<div class="line"><a id="l01316" name="l01316"></a><span class="lineno"> 1316</span>            <span class="keywordflow">if</span> (<a class="code hl_property" href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">mode</a> == <a class="code hl_enumeration" href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">NetworkManagerMode</a>.ServerOnly) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01317" name="l01317"></a><span class="lineno"> 1317</span> </div>
<div class="line"><a id="l01318" name="l01318"></a><span class="lineno"> 1318</span>            <span class="comment">// Get Network Manager out of DDOL before going to offline scene</span></div>
<div class="line"><a id="l01319" name="l01319"></a><span class="lineno"> 1319</span>            <span class="comment">// to avoid collision and let a fresh Network Manager be created.</span></div>
<div class="line"><a id="l01320" name="l01320"></a><span class="lineno"> 1320</span>            <span class="comment">// IMPORTANT: .gameObject can be null if StopClient is called from</span></div>
<div class="line"><a id="l01321" name="l01321"></a><span class="lineno"> 1321</span>            <span class="comment">//            OnApplicationQuit or from tests!</span></div>
<div class="line"><a id="l01322" name="l01322"></a><span class="lineno"> 1322</span>            <span class="keywordflow">if</span> (gameObject != <span class="keyword">null</span></div>
<div class="line"><a id="l01323" name="l01323"></a><span class="lineno"> 1323</span>                &amp;&amp; gameObject.scene.name == <span class="stringliteral">&quot;DontDestroyOnLoad&quot;</span></div>
<div class="line"><a id="l01324" name="l01324"></a><span class="lineno"> 1324</span>                &amp;&amp; !<span class="keywordtype">string</span>.IsNullOrWhiteSpace(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>)</div>
<div class="line"><a id="l01325" name="l01325"></a><span class="lineno"> 1325</span>                &amp;&amp; SceneManager.GetActiveScene().path != <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>)</div>
<div class="line"><a id="l01326" name="l01326"></a><span class="lineno"> 1326</span>                SceneManager.MoveGameObjectToScene(gameObject, SceneManager.GetActiveScene());</div>
<div class="line"><a id="l01327" name="l01327"></a><span class="lineno"> 1327</span> </div>
<div class="line"><a id="l01328" name="l01328"></a><span class="lineno"> 1328</span>            <span class="comment">// If StopHost called in Host mode, StopServer will change scenes after this.</span></div>
<div class="line"><a id="l01329" name="l01329"></a><span class="lineno"> 1329</span>            <span class="comment">// Check loadingSceneAsync to ensure we don&#39;t double-invoke the scene change.</span></div>
<div class="line"><a id="l01330" name="l01330"></a><span class="lineno"> 1330</span>            <span class="comment">// Check if NetworkServer.active because we can get here via Disconnect before server has started to change scenes.</span></div>
<div class="line"><a id="l01331" name="l01331"></a><span class="lineno"> 1331</span>            <span class="keywordflow">if</span> (!<span class="keywordtype">string</span>.IsNullOrWhiteSpace(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>) &amp;&amp; !Utils.IsSceneActive(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>) &amp;&amp; <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">loadingSceneAsync</a> == <span class="keyword">null</span> &amp;&amp; !NetworkServer.active)</div>
<div class="line"><a id="l01332" name="l01332"></a><span class="lineno"> 1332</span>            {</div>
<div class="line"><a id="l01333" name="l01333"></a><span class="lineno"> 1333</span>                ClientChangeScene(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">offlineScene</a>, <a class="code hl_enumeration" href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">SceneOperation</a>.Normal);</div>
<div class="line"><a id="l01334" name="l01334"></a><span class="lineno"> 1334</span>            }</div>
<div class="line"><a id="l01335" name="l01335"></a><span class="lineno"> 1335</span> </div>
<div class="line"><a id="l01336" name="l01336"></a><span class="lineno"> 1336</span>            <a class="code hl_property" href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">networkSceneName</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a id="l01337" name="l01337"></a><span class="lineno"> 1337</span>        }</div>
<div class="line"><a id="l01338" name="l01338"></a><span class="lineno"> 1338</span> </div>
<div class="line"><a id="l01339" name="l01339"></a><span class="lineno"> 1339</span>        <span class="keywordtype">void</span> OnClientNotReadyMessageInternal(NotReadyMessage msg)</div>
<div class="line"><a id="l01340" name="l01340"></a><span class="lineno"> 1340</span>        {</div>
<div class="line"><a id="l01341" name="l01341"></a><span class="lineno"> 1341</span>            <span class="comment">//Debug.Log(&quot;NetworkManager.OnClientNotReadyMessageInternal&quot;);</span></div>
<div class="line"><a id="l01342" name="l01342"></a><span class="lineno"> 1342</span>            NetworkClient.ready = <span class="keyword">false</span>;</div>
<div class="line"><a id="l01343" name="l01343"></a><span class="lineno"> 1343</span>            <a class="code hl_function" href="class_mirror_1_1_network_manager.html#ad42a88330b573a1380a14c6eb9074b38">OnClientNotReady</a>();</div>
<div class="line"><a id="l01344" name="l01344"></a><span class="lineno"> 1344</span> </div>
<div class="line"><a id="l01345" name="l01345"></a><span class="lineno"> 1345</span>            <span class="comment">// NOTE: clientReadyConnection is not set here! don&#39;t want OnClientConnect to be invoked again after scene changes.</span></div>
<div class="line"><a id="l01346" name="l01346"></a><span class="lineno"> 1346</span>        }</div>
<div class="line"><a id="l01347" name="l01347"></a><span class="lineno"> 1347</span> </div>
<div class="line"><a id="l01348" name="l01348"></a><span class="lineno"> 1348</span>        <span class="keywordtype">void</span> OnClientSceneInternal(SceneMessage msg)</div>
<div class="line"><a id="l01349" name="l01349"></a><span class="lineno"> 1349</span>        {</div>
<div class="line"><a id="l01350" name="l01350"></a><span class="lineno"> 1350</span>            <span class="comment">//Debug.Log(&quot;NetworkManager.OnClientSceneInternal&quot;);</span></div>
<div class="line"><a id="l01351" name="l01351"></a><span class="lineno"> 1351</span> </div>
<div class="line"><a id="l01352" name="l01352"></a><span class="lineno"> 1352</span>            <span class="comment">// This needs to run for host client too. NetworkServer.active is checked there</span></div>
<div class="line"><a id="l01353" name="l01353"></a><span class="lineno"> 1353</span>            <span class="keywordflow">if</span> (NetworkClient.isConnected)</div>
<div class="line"><a id="l01354" name="l01354"></a><span class="lineno"> 1354</span>            {</div>
<div class="line"><a id="l01355" name="l01355"></a><span class="lineno"> 1355</span>                ClientChangeScene(msg.sceneName, msg.sceneOperation, msg.customHandling);</div>
<div class="line"><a id="l01356" name="l01356"></a><span class="lineno"> 1356</span>            }</div>
<div class="line"><a id="l01357" name="l01357"></a><span class="lineno"> 1357</span>        }</div>
<div class="line"><a id="l01358" name="l01358"></a><span class="lineno"> 1358</span> </div>
<div class="line"><a id="l01360" name="l01360"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#ad0147810e5a4fbb5deb8ff7083f72e4b"> 1360</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#ad0147810e5a4fbb5deb8ff7083f72e4b">OnServerConnect</a>(<a class="code hl_class" href="class_mirror_1_1_network_connection_to_client.html">NetworkConnectionToClient</a> conn) { }</div>
<div class="line"><a id="l01361" name="l01361"></a><span class="lineno"> 1361</span> </div>
<div class="line"><a id="l01363" name="l01363"></a><span class="lineno"> 1363</span>        <span class="comment">// Called by NetworkServer.OnTransportDisconnect!</span></div>
<div class="foldopen" id="foldopen01364" data-start="{" data-end="}">
<div class="line"><a id="l01364" name="l01364"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a5a8b2aec8ce3a330b3a683ce64f24ef5"> 1364</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a5a8b2aec8ce3a330b3a683ce64f24ef5">OnServerDisconnect</a>(<a class="code hl_class" href="class_mirror_1_1_network_connection_to_client.html">NetworkConnectionToClient</a> conn)</div>
<div class="line"><a id="l01365" name="l01365"></a><span class="lineno"> 1365</span>        {</div>
<div class="line"><a id="l01366" name="l01366"></a><span class="lineno"> 1366</span>            <span class="comment">// by default, this function destroys the connection&#39;s player.</span></div>
<div class="line"><a id="l01367" name="l01367"></a><span class="lineno"> 1367</span>            <span class="comment">// can be overwritten for cases like delayed logouts in MMOs to</span></div>
<div class="line"><a id="l01368" name="l01368"></a><span class="lineno"> 1368</span>            <span class="comment">// avoid players escaping from PvP situations by logging out.</span></div>
<div class="line"><a id="l01369" name="l01369"></a><span class="lineno"> 1369</span>            NetworkServer.DestroyPlayerForConnection(conn);</div>
<div class="line"><a id="l01370" name="l01370"></a><span class="lineno"> 1370</span>            <span class="comment">//Debug.Log(&quot;OnServerDisconnect: Client disconnected.&quot;);</span></div>
<div class="line"><a id="l01371" name="l01371"></a><span class="lineno"> 1371</span>        }</div>
</div>
<div class="line"><a id="l01372" name="l01372"></a><span class="lineno"> 1372</span> </div>
<div class="foldopen" id="foldopen01374" data-start="{" data-end="}">
<div class="line"><a id="l01374" name="l01374"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#aaca5496d1641eb1eab14d0b8b34a9c0e"> 1374</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#aaca5496d1641eb1eab14d0b8b34a9c0e">OnServerReady</a>(<a class="code hl_class" href="class_mirror_1_1_network_connection_to_client.html">NetworkConnectionToClient</a> conn)</div>
<div class="line"><a id="l01375" name="l01375"></a><span class="lineno"> 1375</span>        {</div>
<div class="line"><a id="l01376" name="l01376"></a><span class="lineno"> 1376</span>            <span class="keywordflow">if</span> (conn.<a class="code hl_property" href="class_mirror_1_1_network_connection.html#a1d2489f176006bf19fd9bb9850967c76">identity</a> == <span class="keyword">null</span>)</div>
<div class="line"><a id="l01377" name="l01377"></a><span class="lineno"> 1377</span>            {</div>
<div class="line"><a id="l01378" name="l01378"></a><span class="lineno"> 1378</span>                <span class="comment">// this is now allowed (was not for a while)</span></div>
<div class="line"><a id="l01379" name="l01379"></a><span class="lineno"> 1379</span>                <span class="comment">//Debug.Log(&quot;Ready with no player object&quot;);</span></div>
<div class="line"><a id="l01380" name="l01380"></a><span class="lineno"> 1380</span>            }</div>
<div class="line"><a id="l01381" name="l01381"></a><span class="lineno"> 1381</span>            NetworkServer.SetClientReady(conn);</div>
<div class="line"><a id="l01382" name="l01382"></a><span class="lineno"> 1382</span>        }</div>
</div>
<div class="line"><a id="l01383" name="l01383"></a><span class="lineno"> 1383</span> </div>
<div class="line"><a id="l01385" name="l01385"></a><span class="lineno"> 1385</span>        <span class="comment">// The default implementation for this function creates a new player object from the playerPrefab.</span></div>
<div class="foldopen" id="foldopen01386" data-start="{" data-end="}">
<div class="line"><a id="l01386" name="l01386"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#acfa046ec2fa84cebc9fc267b77bd9bc6"> 1386</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#acfa046ec2fa84cebc9fc267b77bd9bc6">OnServerAddPlayer</a>(<a class="code hl_class" href="class_mirror_1_1_network_connection_to_client.html">NetworkConnectionToClient</a> conn)</div>
<div class="line"><a id="l01387" name="l01387"></a><span class="lineno"> 1387</span>        {</div>
<div class="line"><a id="l01388" name="l01388"></a><span class="lineno"> 1388</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Transform</a> startPos = <a class="code hl_function" href="class_mirror_1_1_network_manager.html#acf2e32b2b01150fa5867161fbe514e98">GetStartPosition</a>();</div>
<div class="line"><a id="l01389" name="l01389"></a><span class="lineno"> 1389</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">GameObject</a> player = startPos != <span class="keyword">null</span></div>
<div class="line"><a id="l01390" name="l01390"></a><span class="lineno"> 1390</span>                ? <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Instantiate</a>(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a>, startPos.position, startPos.rotation)</div>
<div class="line"><a id="l01391" name="l01391"></a><span class="lineno"> 1391</span>                : <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Instantiate</a>(<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">playerPrefab</a>);</div>
<div class="line"><a id="l01392" name="l01392"></a><span class="lineno"> 1392</span> </div>
<div class="line"><a id="l01393" name="l01393"></a><span class="lineno"> 1393</span>            <span class="comment">// instantiating a &quot;Player&quot; prefab gives it the name &quot;Player(clone)&quot;</span></div>
<div class="line"><a id="l01394" name="l01394"></a><span class="lineno"> 1394</span>            <span class="comment">// =&gt; appending the connectionId is WAY more useful for debugging!</span></div>
<div class="line"><a id="l01395" name="l01395"></a><span class="lineno"> 1395</span>            player.name = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;{playerPrefab.name} [connId={conn.connectionId}]&quot;</span>;</div>
<div class="line"><a id="l01396" name="l01396"></a><span class="lineno"> 1396</span>            NetworkServer.AddPlayerForConnection(conn, player);</div>
<div class="line"><a id="l01397" name="l01397"></a><span class="lineno"> 1397</span>        }</div>
</div>
<div class="line"><a id="l01398" name="l01398"></a><span class="lineno"> 1398</span> </div>
<div class="line"><a id="l01400" name="l01400"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a817a61e453d4dce70a2e5aac33315f85"> 1400</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a817a61e453d4dce70a2e5aac33315f85">OnServerError</a>(<a class="code hl_class" href="class_mirror_1_1_network_connection_to_client.html">NetworkConnectionToClient</a> conn, <a class="code hl_enumeration" href="namespace_mirror.html#a1d7b45007a6d8ba5bbfd968066eb9625">TransportError</a> error, <span class="keywordtype">string</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">reason</a>) { }</div>
<div class="line"><a id="l01401" name="l01401"></a><span class="lineno"> 1401</span> </div>
<div class="line"><a id="l01403" name="l01403"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a328c8da98050688b524106c828bafdb8"> 1403</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a328c8da98050688b524106c828bafdb8">OnServerChangeScene</a>(<span class="keywordtype">string</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a>) { }</div>
<div class="line"><a id="l01404" name="l01404"></a><span class="lineno"> 1404</span> </div>
<div class="line"><a id="l01406" name="l01406"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a93ae8a9ca02afa60598d464779e1bca5"> 1406</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a93ae8a9ca02afa60598d464779e1bca5">OnServerSceneChanged</a>(<span class="keywordtype">string</span> sceneName) { }</div>
<div class="line"><a id="l01407" name="l01407"></a><span class="lineno"> 1407</span> </div>
<div class="foldopen" id="foldopen01409" data-start="{" data-end="}">
<div class="line"><a id="l01409" name="l01409"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a00afc51b7c8508cad790356d31793cce"> 1409</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a00afc51b7c8508cad790356d31793cce">OnClientConnect</a>()</div>
<div class="line"><a id="l01410" name="l01410"></a><span class="lineno"> 1410</span>        {</div>
<div class="line"><a id="l01411" name="l01411"></a><span class="lineno"> 1411</span>            <span class="comment">// OnClientConnect by default calls AddPlayer but it should not do</span></div>
<div class="line"><a id="l01412" name="l01412"></a><span class="lineno"> 1412</span>            <span class="comment">// that when we have online/offline scenes. so we need the</span></div>
<div class="line"><a id="l01413" name="l01413"></a><span class="lineno"> 1413</span>            <span class="comment">// clientLoadedScene flag to prevent it.</span></div>
<div class="line"><a id="l01414" name="l01414"></a><span class="lineno"> 1414</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a7079cb91ab3aca157345929081f7bd63">clientLoadedScene</a>)</div>
<div class="line"><a id="l01415" name="l01415"></a><span class="lineno"> 1415</span>            {</div>
<div class="line"><a id="l01416" name="l01416"></a><span class="lineno"> 1416</span>                <span class="comment">// Ready/AddPlayer is usually triggered by a scene load completing.</span></div>
<div class="line"><a id="l01417" name="l01417"></a><span class="lineno"> 1417</span>                <span class="comment">// if no scene was loaded, then Ready/AddPlayer it here instead.</span></div>
<div class="line"><a id="l01418" name="l01418"></a><span class="lineno"> 1418</span>                <span class="keywordflow">if</span> (!NetworkClient.ready)</div>
<div class="line"><a id="l01419" name="l01419"></a><span class="lineno"> 1419</span>                    NetworkClient.Ready();</div>
<div class="line"><a id="l01420" name="l01420"></a><span class="lineno"> 1420</span> </div>
<div class="line"><a id="l01421" name="l01421"></a><span class="lineno"> 1421</span>                <span class="keywordflow">if</span> (<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a5feedb04fce427328f8b0b2fdc4aaecf">autoCreatePlayer</a>)</div>
<div class="line"><a id="l01422" name="l01422"></a><span class="lineno"> 1422</span>                    NetworkClient.AddPlayer();</div>
<div class="line"><a id="l01423" name="l01423"></a><span class="lineno"> 1423</span>            }</div>
<div class="line"><a id="l01424" name="l01424"></a><span class="lineno"> 1424</span>        }</div>
</div>
<div class="line"><a id="l01425" name="l01425"></a><span class="lineno"> 1425</span> </div>
<div class="line"><a id="l01427" name="l01427"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a97acbe5e20334a1b3591241c8a7f8e0f"> 1427</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a97acbe5e20334a1b3591241c8a7f8e0f">OnClientDisconnect</a>() { }</div>
<div class="line"><a id="l01428" name="l01428"></a><span class="lineno"> 1428</span> </div>
<div class="line"><a id="l01429" name="l01429"></a><span class="lineno"> 1429</span>        <span class="comment">// Deprecated 2023-12-05</span></div>
<div class="line"><a id="l01431" name="l01431"></a><span class="lineno"> 1431</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Obsolete</a>(<span class="stringliteral">&quot;NetworkClient handles this now.&quot;</span>)]</div>
<div class="foldopen" id="foldopen01432" data-start="{" data-end="}">
<div class="line"><a id="l01432" name="l01432"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a59693c8a98f11975ec721405fb4d6afd"> 1432</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a59693c8a98f11975ec721405fb4d6afd">CalculateConnectionQuality</a>()</div>
<div class="line"><a id="l01433" name="l01433"></a><span class="lineno"> 1433</span>        {</div>
<div class="line"><a id="l01434" name="l01434"></a><span class="lineno"> 1434</span>            <span class="comment">// Moved to NetworkClient</span></div>
<div class="line"><a id="l01435" name="l01435"></a><span class="lineno"> 1435</span>        }</div>
</div>
<div class="line"><a id="l01436" name="l01436"></a><span class="lineno"> 1436</span> </div>
<div class="line"><a id="l01437" name="l01437"></a><span class="lineno"> 1437</span>        <span class="comment">// Deprecated 2023-12-05</span></div>
<div class="line"><a id="l01439" name="l01439"></a><span class="lineno"> 1439</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Obsolete</a>(<span class="stringliteral">&quot;This will be removed. Subscribe to NetworkClient.onConnectionQualityChanged in your own code&quot;</span>)]</div>
<div class="foldopen" id="foldopen01440" data-start="{" data-end="}">
<div class="line"><a id="l01440" name="l01440"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#afc488979b7da5f02a603c26d638d61ac"> 1440</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#afc488979b7da5f02a603c26d638d61ac">OnConnectionQualityChanged</a>(<a class="code hl_enumeration" href="namespace_mirror.html#ac59c83f92a2065c6327ace451c3c4c49">ConnectionQuality</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">previous</a>, <a class="code hl_enumeration" href="namespace_mirror.html#ac59c83f92a2065c6327ace451c3c4c49">ConnectionQuality</a> current)</div>
<div class="line"><a id="l01441" name="l01441"></a><span class="lineno"> 1441</span>        {</div>
<div class="line"><a id="l01442" name="l01442"></a><span class="lineno"> 1442</span>            <span class="comment">// logging the change is very useful to track down user&#39;s lag reports.</span></div>
<div class="line"><a id="l01443" name="l01443"></a><span class="lineno"> 1443</span>            <span class="comment">// we want to include as much detail as possible for debugging.</span></div>
<div class="line"><a id="l01444" name="l01444"></a><span class="lineno"> 1444</span>            <span class="comment">//Debug.Log($&quot;[Mirror] Connection Quality changed from {previous} to {current}:\n  rtt={(NetworkTime.rtt * 1000):F1}ms\n  rttVar={(NetworkTime.rttVariance * 1000):F1}ms\n  bufferTime={(NetworkClient.bufferTime * 1000):F1}ms&quot;);</span></div>
<div class="line"><a id="l01445" name="l01445"></a><span class="lineno"> 1445</span>        }</div>
</div>
<div class="line"><a id="l01446" name="l01446"></a><span class="lineno"> 1446</span> </div>
<div class="line"><a id="l01448" name="l01448"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a5e61ad5943fe34defb07b3cc1edb959e"> 1448</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a5e61ad5943fe34defb07b3cc1edb959e">OnClientError</a>(<a class="code hl_enumeration" href="namespace_mirror.html#a1d7b45007a6d8ba5bbfd968066eb9625">TransportError</a> error, <span class="keywordtype">string</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">reason</a>) { }</div>
<div class="line"><a id="l01449" name="l01449"></a><span class="lineno"> 1449</span> </div>
<div class="line"><a id="l01451" name="l01451"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#ad42a88330b573a1380a14c6eb9074b38"> 1451</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#ad42a88330b573a1380a14c6eb9074b38">OnClientNotReady</a>() { }</div>
<div class="line"><a id="l01452" name="l01452"></a><span class="lineno"> 1452</span> </div>
<div class="line"><a id="l01454" name="l01454"></a><span class="lineno"> 1454</span>        <span class="comment">// customHandling: indicates if scene loading will be handled through overrides</span></div>
<div class="line"><a id="l01455" name="l01455"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a114a2174636b05f12f69de6499fcce89"> 1455</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a114a2174636b05f12f69de6499fcce89">OnClientChangeScene</a>(<span class="keywordtype">string</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">newSceneName</a>, <a class="code hl_enumeration" href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">SceneOperation</a> sceneOperation, <span class="keywordtype">bool</span> customHandling) { }</div>
<div class="line"><a id="l01456" name="l01456"></a><span class="lineno"> 1456</span> </div>
<div class="line"><a id="l01458" name="l01458"></a><span class="lineno"> 1458</span>        <span class="comment">// Scene changes can cause player objects to be destroyed. The default</span></div>
<div class="line"><a id="l01459" name="l01459"></a><span class="lineno"> 1459</span>        <span class="comment">// implementation of OnClientSceneChanged in the NetworkManager is to</span></div>
<div class="line"><a id="l01460" name="l01460"></a><span class="lineno"> 1460</span>        <span class="comment">// add a player object for the connection if no player object exists.</span></div>
<div class="foldopen" id="foldopen01461" data-start="{" data-end="}">
<div class="line"><a id="l01461" name="l01461"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a70c44f1bb14574f27ffb5b1c8bfecde3"> 1461</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a70c44f1bb14574f27ffb5b1c8bfecde3">OnClientSceneChanged</a>()</div>
<div class="line"><a id="l01462" name="l01462"></a><span class="lineno"> 1462</span>        {</div>
<div class="line"><a id="l01463" name="l01463"></a><span class="lineno"> 1463</span>            <span class="comment">// always become ready.</span></div>
<div class="line"><a id="l01464" name="l01464"></a><span class="lineno"> 1464</span>            <span class="keywordflow">if</span> (NetworkClient.connection.isAuthenticated &amp;&amp; !NetworkClient.ready) NetworkClient.Ready();</div>
<div class="line"><a id="l01465" name="l01465"></a><span class="lineno"> 1465</span> </div>
<div class="line"><a id="l01466" name="l01466"></a><span class="lineno"> 1466</span>            <span class="comment">// Only call AddPlayer for normal scene changes, not additive load/unload</span></div>
<div class="line"><a id="l01467" name="l01467"></a><span class="lineno"> 1467</span>            <span class="keywordflow">if</span> (NetworkClient.connection.isAuthenticated &amp;&amp; clientSceneOperation == <a class="code hl_enumeration" href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">SceneOperation</a>.Normal &amp;&amp; <a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a5feedb04fce427328f8b0b2fdc4aaecf">autoCreatePlayer</a> &amp;&amp; NetworkClient.localPlayer == <span class="keyword">null</span>)</div>
<div class="line"><a id="l01468" name="l01468"></a><span class="lineno"> 1468</span>            {</div>
<div class="line"><a id="l01469" name="l01469"></a><span class="lineno"> 1469</span>                <span class="comment">// add player if existing one is null</span></div>
<div class="line"><a id="l01470" name="l01470"></a><span class="lineno"> 1470</span>                NetworkClient.AddPlayer();</div>
<div class="line"><a id="l01471" name="l01471"></a><span class="lineno"> 1471</span>            }</div>
<div class="line"><a id="l01472" name="l01472"></a><span class="lineno"> 1472</span>        }</div>
</div>
<div class="line"><a id="l01473" name="l01473"></a><span class="lineno"> 1473</span> </div>
<div class="line"><a id="l01474" name="l01474"></a><span class="lineno"> 1474</span>        <span class="comment">// Since there are multiple versions of StartServer, StartClient and</span></div>
<div class="line"><a id="l01475" name="l01475"></a><span class="lineno"> 1475</span>        <span class="comment">// StartHost, to reliably customize their functionality, users would</span></div>
<div class="line"><a id="l01476" name="l01476"></a><span class="lineno"> 1476</span>        <span class="comment">// need override all the versions. Instead these callbacks are invoked</span></div>
<div class="line"><a id="l01477" name="l01477"></a><span class="lineno"> 1477</span>        <span class="comment">// from all versions, so users only need to implement this one case.</span></div>
<div class="line"><a id="l01478" name="l01478"></a><span class="lineno"> 1478</span> </div>
<div class="line"><a id="l01480" name="l01480"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a29b5da074510538134ac587a05b30180"> 1480</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a29b5da074510538134ac587a05b30180">OnStartHost</a>() { }</div>
<div class="line"><a id="l01481" name="l01481"></a><span class="lineno"> 1481</span> </div>
<div class="line"><a id="l01483" name="l01483"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a0226295e867fd77ad9aef32d32d6ca88"> 1483</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a0226295e867fd77ad9aef32d32d6ca88">OnStartServer</a>() { }</div>
<div class="line"><a id="l01484" name="l01484"></a><span class="lineno"> 1484</span> </div>
<div class="line"><a id="l01486" name="l01486"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a989b4a0365dd627ac963656a786ae69d"> 1486</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a989b4a0365dd627ac963656a786ae69d">OnStartClient</a>() { }</div>
<div class="line"><a id="l01487" name="l01487"></a><span class="lineno"> 1487</span> </div>
<div class="line"><a id="l01489" name="l01489"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a60970702dbcd39e7c1e64a1417cc73af"> 1489</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a60970702dbcd39e7c1e64a1417cc73af">OnStopServer</a>() { }</div>
<div class="line"><a id="l01490" name="l01490"></a><span class="lineno"> 1490</span> </div>
<div class="line"><a id="l01492" name="l01492"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a4289f8e4a460b810a29fea59cc738f71"> 1492</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a4289f8e4a460b810a29fea59cc738f71">OnStopClient</a>() { }</div>
<div class="line"><a id="l01493" name="l01493"></a><span class="lineno"> 1493</span> </div>
<div class="line"><a id="l01495" name="l01495"></a><span class="lineno"><a class="line" href="class_mirror_1_1_network_manager.html#a09a36f56cc95fcb5b0f4b7fdcde7fc69"> 1495</a></span>        <span class="keyword">public</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_network_manager.html#a09a36f56cc95fcb5b0f4b7fdcde7fc69">OnStopHost</a>() { }</div>
<div class="line"><a id="l01496" name="l01496"></a><span class="lineno"> 1496</span> </div>
<div class="line"><a id="l01497" name="l01497"></a><span class="lineno"> 1497</span>        <span class="comment">// keep OnGUI even in builds. useful to debug snap interp.</span></div>
<div class="line"><a id="l01498" name="l01498"></a><span class="lineno"> 1498</span>        <span class="keywordtype">void</span> OnGUI()</div>
<div class="line"><a id="l01499" name="l01499"></a><span class="lineno"> 1499</span>        {</div>
<div class="line"><a id="l01500" name="l01500"></a><span class="lineno"> 1500</span>            <span class="keywordflow">if</span> (!<a class="code hl_variable" href="class_mirror_1_1_network_manager.html#a067cc9e9f2eec4f522084af31c4799d3">timeInterpolationGui</a>) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l01501" name="l01501"></a><span class="lineno"> 1501</span>            NetworkClient.OnGUI();</div>
<div class="line"><a id="l01502" name="l01502"></a><span class="lineno"> 1502</span>        }</div>
<div class="line"><a id="l01503" name="l01503"></a><span class="lineno"> 1503</span>    }</div>
</div>
<div class="line"><a id="l01504" name="l01504"></a><span class="lineno"> 1504</span>}</div>
<div class="ttc" id="aclass_mirror_1_1_network_authenticator_html"><div class="ttname"><a href="class_mirror_1_1_network_authenticator.html">Mirror.NetworkAuthenticator</a></div><div class="ttdoc">Base class for implementing component-based authentication during the Connect phase.</div><div class="ttdef"><b>Definition</b> <a href="_network_authenticator_8cs_source.html#l00011">NetworkAuthenticator.cs:12</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_authenticator_html_a1d291ecc227ccdc3cdff6d6471d3295a"><div class="ttname"><a href="class_mirror_1_1_network_authenticator.html#a1d291ecc227ccdc3cdff6d6471d3295a">Mirror.NetworkAuthenticator.OnClientAuthenticate</a></div><div class="ttdeci">virtual void OnClientAuthenticate()</div><div class="ttdoc">Called on client from OnClientConnectInternal when a client needs to authenticate.</div><div class="ttdef"><b>Definition</b> <a href="_network_authenticator_8cs_source.html#l00048">NetworkAuthenticator.cs:48</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_authenticator_html_a2cda88ca8c624d1118e5b7e5bc88360b"><div class="ttname"><a href="class_mirror_1_1_network_authenticator.html#a2cda88ca8c624d1118e5b7e5bc88360b">Mirror.NetworkAuthenticator.OnClientAuthenticated</a></div><div class="ttdeci">UnityEvent OnClientAuthenticated</div><div class="ttdoc">Notify subscribers on the client when the client is authenticated.</div><div class="ttdef"><b>Definition</b> <a href="_network_authenticator_8cs_source.html#l00020">NetworkAuthenticator.cs:20</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_authenticator_html_a2faad501b13797328bf0283c77c19fb3"><div class="ttname"><a href="class_mirror_1_1_network_authenticator.html#a2faad501b13797328bf0283c77c19fb3">Mirror.NetworkAuthenticator.OnServerAuthenticate</a></div><div class="ttdeci">virtual void OnServerAuthenticate(NetworkConnectionToClient conn)</div><div class="ttdoc">Called on server from OnServerConnectInternal when a client needs to authenticate.</div><div class="ttdef"><b>Definition</b> <a href="_network_authenticator_8cs_source.html#l00029">NetworkAuthenticator.cs:29</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_authenticator_html_a70801a0c9f66f62e3273a60d4d8a9edc"><div class="ttname"><a href="class_mirror_1_1_network_authenticator.html#a70801a0c9f66f62e3273a60d4d8a9edc">Mirror.NetworkAuthenticator.OnStartClient</a></div><div class="ttdeci">virtual void OnStartClient()</div><div class="ttdoc">Called when client starts, used to register message handlers if needed.</div><div class="ttdef"><b>Definition</b> <a href="_network_authenticator_8cs_source.html#l00042">NetworkAuthenticator.cs:42</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_authenticator_html_abdc516cb1b1997aa49d5ec46d385aecb"><div class="ttname"><a href="class_mirror_1_1_network_authenticator.html#abdc516cb1b1997aa49d5ec46d385aecb">Mirror.NetworkAuthenticator.OnStopClient</a></div><div class="ttdeci">virtual void OnStopClient()</div><div class="ttdoc">Called when client stops, used to unregister message handlers if needed.</div><div class="ttdef"><b>Definition</b> <a href="_network_authenticator_8cs_source.html#l00045">NetworkAuthenticator.cs:45</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_authenticator_html_ac2106a4b670a75135e22e9f7ce5e3583"><div class="ttname"><a href="class_mirror_1_1_network_authenticator.html#ac2106a4b670a75135e22e9f7ce5e3583">Mirror.NetworkAuthenticator.OnServerAuthenticated</a></div><div class="ttdeci">UnityEventNetworkConnection OnServerAuthenticated</div><div class="ttdoc">Notify subscribers on the server when a client is authenticated.</div><div class="ttdef"><b>Definition</b> <a href="_network_authenticator_8cs_source.html#l00016">NetworkAuthenticator.cs:16</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_authenticator_html_adb61ff2a0351bdad0fff2072cefb56e4"><div class="ttname"><a href="class_mirror_1_1_network_authenticator.html#adb61ff2a0351bdad0fff2072cefb56e4">Mirror.NetworkAuthenticator.OnStopServer</a></div><div class="ttdeci">virtual void OnStopServer()</div><div class="ttdoc">Called when server stops, used to unregister message handlers if needed.</div><div class="ttdef"><b>Definition</b> <a href="_network_authenticator_8cs_source.html#l00026">NetworkAuthenticator.cs:26</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_authenticator_html_af84e9666b24912a841ef3621b637516b"><div class="ttname"><a href="class_mirror_1_1_network_authenticator.html#af84e9666b24912a841ef3621b637516b">Mirror.NetworkAuthenticator.OnStartServer</a></div><div class="ttdeci">virtual void OnStartServer()</div><div class="ttdoc">Called when server starts, used to register message handlers if needed.</div><div class="ttdef"><b>Definition</b> <a href="_network_authenticator_8cs_source.html#l00023">NetworkAuthenticator.cs:23</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_connection_html"><div class="ttname"><a href="class_mirror_1_1_network_connection.html">Mirror.NetworkConnection</a></div><div class="ttdoc">Base NetworkConnection class for server-to-client and client-to-server connection.</div><div class="ttdef"><b>Definition</b> <a href="_mirror_2_core_2_network_connection_8cs_source.html#l00009">NetworkConnection.cs:10</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_connection_html_a1d2489f176006bf19fd9bb9850967c76"><div class="ttname"><a href="class_mirror_1_1_network_connection.html#a1d2489f176006bf19fd9bb9850967c76">Mirror.NetworkConnection.identity</a></div><div class="ttdeci">NetworkIdentity identity</div><div class="ttdoc">This connection's main object (usually the player object).</div><div class="ttdef"><b>Definition</b> <a href="_mirror_2_core_2_network_connection_8cs_source.html#l00034">NetworkConnection.cs:34</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_connection_to_client_html"><div class="ttname"><a href="class_mirror_1_1_network_connection_to_client.html">Mirror.NetworkConnectionToClient</a></div><div class="ttdef"><b>Definition</b> <a href="_network_connection_to_client_8cs_source.html#l00008">NetworkConnectionToClient.cs:9</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_identity_html"><div class="ttname"><a href="class_mirror_1_1_network_identity.html">Mirror.NetworkIdentity</a></div><div class="ttdoc">NetworkIdentity identifies objects across the network.</div><div class="ttdef"><b>Definition</b> <a href="_network_identity_8cs_source.html#l00041">NetworkIdentity.cs:42</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html"><div class="ttname"><a href="class_mirror_1_1_network_manager.html">Mirror.NetworkManager</a></div><div class="ttdef"><b>Definition</b> <a href="#l00017">NetworkManager.cs:18</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a00afc51b7c8508cad790356d31793cce"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a00afc51b7c8508cad790356d31793cce">Mirror.NetworkManager.OnClientConnect</a></div><div class="ttdeci">virtual void OnClientConnect()</div><div class="ttdoc">Called on the client when connected to a server. By default it sets client as ready and adds a player...</div><div class="ttdef"><b>Definition</b> <a href="#l01409">NetworkManager.cs:1409</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a0226295e867fd77ad9aef32d32d6ca88"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a0226295e867fd77ad9aef32d32d6ca88">Mirror.NetworkManager.OnStartServer</a></div><div class="ttdeci">virtual void OnStartServer()</div><div class="ttdoc">This is invoked when a server is started - including when a host is started.</div><div class="ttdef"><b>Definition</b> <a href="#l01483">NetworkManager.cs:1483</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a067cc9e9f2eec4f522084af31c4799d3"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a067cc9e9f2eec4f522084af31c4799d3">Mirror.NetworkManager.timeInterpolationGui</a></div><div class="ttdeci">bool timeInterpolationGui</div><div class="ttdef"><b>Definition</b> <a href="#l00150">NetworkManager.cs:150</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a09a36f56cc95fcb5b0f4b7fdcde7fc69"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a09a36f56cc95fcb5b0f4b7fdcde7fc69">Mirror.NetworkManager.OnStopHost</a></div><div class="ttdeci">virtual void OnStopHost()</div><div class="ttdoc">This is called when a host is stopped.</div><div class="ttdef"><b>Definition</b> <a href="#l01495">NetworkManager.cs:1495</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a0a8603e11759317ca078ef8afabc08e3"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a0a8603e11759317ca078ef8afabc08e3">Mirror.NetworkManager.spawnPrefabs</a></div><div class="ttdeci">List&lt; GameObject &gt; spawnPrefabs</div><div class="ttdoc">Prefabs that can be spawned over the network need to be registered here.</div><div class="ttdef"><b>Definition</b> <a href="#l00127">NetworkManager.cs:127</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a0ab5ae25070df683a829610b367d3c4b"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a0ab5ae25070df683a829610b367d3c4b">Mirror.NetworkManager.ResetStatics</a></div><div class="ttdeci">static void ResetStatics()</div><div class="ttdef"><b>Definition</b> <a href="#l00801">NetworkManager.cs:801</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a0dc0e754c367029d89e54af0f6af5c15"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a0dc0e754c367029d89e54af0f6af5c15">Mirror.NetworkManager.mode</a></div><div class="ttdeci">NetworkManagerMode mode</div><div class="ttdef"><b>Definition</b> <a href="#l00176">NetworkManager.cs:176</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a0fda8121f67f6c13e153c7391bbad2bd"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a0fda8121f67f6c13e153c7391bbad2bd">Mirror.NetworkManager.singleton</a></div><div class="ttdeci">static NetworkManager singleton</div><div class="ttdoc">The one and only NetworkManager.</div><div class="ttdef"><b>Definition</b> <a href="#l00153">NetworkManager.cs:153</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a114a2174636b05f12f69de6499fcce89"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a114a2174636b05f12f69de6499fcce89">Mirror.NetworkManager.OnClientChangeScene</a></div><div class="ttdeci">virtual void OnClientChangeScene(string newSceneName, SceneOperation sceneOperation, bool customHandling)</div><div class="ttdoc">Called from ClientChangeScene immediately before SceneManager.LoadSceneAsync is executed.</div><div class="ttdef"><b>Definition</b> <a href="#l01455">NetworkManager.cs:1455</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a11d6e6b2fc33560bc2e79278652c2b4a"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a11d6e6b2fc33560bc2e79278652c2b4a">Mirror.NetworkManager.Reset</a></div><div class="ttdeci">virtual void Reset()</div><div class="ttdef"><b>Definition</b> <a href="#l00220">NetworkManager.cs:220</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a1a0047cfbf0952c7ead67192b8f8ae7d"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a1a0047cfbf0952c7ead67192b8f8ae7d">Mirror.NetworkManager.sendRate</a></div><div class="ttdeci">int sendRate</div><div class="ttdoc">Server Update frequency, per second. Use around 60Hz for fast paced games like Counter-Strike to mini...</div><div class="ttdef"><b>Definition</b> <a href="#l00043">NetworkManager.cs:43</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a1a28ec0b06891f2b0907958df67ee42b"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a1a28ec0b06891f2b0907958df67ee42b">Mirror.NetworkManager.startPositionIndex</a></div><div class="ttdeci">static int startPositionIndex</div><div class="ttdef"><b>Definition</b> <a href="#l00131">NetworkManager.cs:131</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a1f569b676d7a9cc3b05e3e1d37039ff1"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a1f569b676d7a9cc3b05e3e1d37039ff1">Mirror.NetworkManager.isNetworkActive</a></div><div class="ttdeci">bool isNetworkActive</div><div class="ttdoc">True if the server is running or client is connected/connecting.</div><div class="ttdef"><b>Definition</b> <a href="#l00159">NetworkManager.cs:159</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a20aa81bd18677e958645bfd2af78455e"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a20aa81bd18677e958645bfd2af78455e">Mirror.NetworkManager.disconnectInactiveTimeout</a></div><div class="ttdeci">float disconnectInactiveTimeout</div><div class="ttdef"><b>Definition</b> <a href="#l00101">NetworkManager.cs:101</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a21755bebf114e5fb026b1834de6b4c73"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a21755bebf114e5fb026b1834de6b4c73">Mirror.NetworkManager.StartClient</a></div><div class="ttdeci">void StartClient()</div><div class="ttdoc">Starts the client, connects it to the server with networkAddress.</div><div class="ttdef"><b>Definition</b> <a href="#l00421">NetworkManager.cs:421</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a29b5da074510538134ac587a05b30180"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a29b5da074510538134ac587a05b30180">Mirror.NetworkManager.OnStartHost</a></div><div class="ttdeci">virtual void OnStartHost()</div><div class="ttdoc">This is invoked when a host is started.</div><div class="ttdef"><b>Definition</b> <a href="#l01480">NetworkManager.cs:1480</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a328c8da98050688b524106c828bafdb8"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a328c8da98050688b524106c828bafdb8">Mirror.NetworkManager.OnServerChangeScene</a></div><div class="ttdeci">virtual void OnServerChangeScene(string newSceneName)</div><div class="ttdoc">Called from ServerChangeScene immediately before SceneManager.LoadSceneAsync is executed.</div><div class="ttdef"><b>Definition</b> <a href="#l01403">NetworkManager.cs:1403</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a38cf1737bb408c021c0c2dcb56c837ba"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a38cf1737bb408c021c0c2dcb56c837ba">Mirror.NetworkManager.StopHost</a></div><div class="ttdeci">void StopHost()</div><div class="ttdoc">This stops both the client and the server that the manager is using.</div><div class="ttdef"><b>Definition</b> <a href="#l00599">NetworkManager.cs:599</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a3a40b9ca73b07e223bdd57e1e89a3e82"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a3a40b9ca73b07e223bdd57e1e89a3e82">Mirror.NetworkManager.StopServer</a></div><div class="ttdeci">void StopServer()</div><div class="ttdoc">Stops the server from listening and simulating the game.</div><div class="ttdef"><b>Definition</b> <a href="#l00607">NetworkManager.cs:607</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a3c6e80626c62d6c27ba9c36336264a20"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a3c6e80626c62d6c27ba9c36336264a20">Mirror.NetworkManager.snapshotSettings</a></div><div class="ttdeci">SnapshotInterpolationSettings snapshotSettings</div><div class="ttdef"><b>Definition</b> <a href="#l00138">NetworkManager.cs:138</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a41ab4aece51e9c6b905a5f72b3a7eb3c"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a41ab4aece51e9c6b905a5f72b3a7eb3c">Mirror.NetworkManager.StartHost</a></div><div class="ttdeci">void StartHost()</div><div class="ttdoc">Starts a network &quot;host&quot; - a server and client in the same application.</div><div class="ttdef"><b>Definition</b> <a href="#l00475">NetworkManager.cs:475</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a4289f8e4a460b810a29fea59cc738f71"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a4289f8e4a460b810a29fea59cc738f71">Mirror.NetworkManager.OnStopClient</a></div><div class="ttdeci">virtual void OnStopClient()</div><div class="ttdoc">This is called when a client is stopped.</div><div class="ttdef"><b>Definition</b> <a href="#l01492">NetworkManager.cs:1492</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a44753113feef2e4f0bec30dde393f966"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a44753113feef2e4f0bec30dde393f966">Mirror.NetworkManager.RegisterStartPosition</a></div><div class="ttdeci">static void RegisterStartPosition(Transform start)</div><div class="ttdoc">Registers the transform of a game object as a player spawn location.</div><div class="ttdef"><b>Definition</b> <a href="#l01128">NetworkManager.cs:1128</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a4c2342055a3ecd644ba2332eb919c09e"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a4c2342055a3ecd644ba2332eb919c09e">Mirror.NetworkManager.autoConnectClientBuild</a></div><div class="ttdeci">bool autoConnectClientBuild</div><div class="ttdef"><b>Definition</b> <a href="#l00059">NetworkManager.cs:59</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a5823aa0ee6c9711f8000ab4988a19a19"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a5823aa0ee6c9711f8000ab4988a19a19">Mirror.NetworkManager.Start</a></div><div class="ttdeci">virtual void Start()</div><div class="ttdef"><b>Definition</b> <a href="#l00255">NetworkManager.cs:255</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a59693c8a98f11975ec721405fb4d6afd"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a59693c8a98f11975ec721405fb4d6afd">Mirror.NetworkManager.CalculateConnectionQuality</a></div><div class="ttdeci">virtual void CalculateConnectionQuality()</div><div class="ttdoc">Deprecated: NetworkClient handles this now.</div><div class="ttdef"><b>Definition</b> <a href="#l01432">NetworkManager.cs:1432</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a5a1b3d80829a261fbf4977d934257524"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a5a1b3d80829a261fbf4977d934257524">Mirror.NetworkManager.ConfigureHeadlessFrameRate</a></div><div class="ttdeci">virtual void ConfigureHeadlessFrameRate()</div><div class="ttdoc">Set the frame rate for a headless builds. Override to disable or modify.</div><div class="ttdef"><b>Definition</b> <a href="#l00711">NetworkManager.cs:711</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a5a8b2aec8ce3a330b3a683ce64f24ef5"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a5a8b2aec8ce3a330b3a683ce64f24ef5">Mirror.NetworkManager.OnServerDisconnect</a></div><div class="ttdeci">virtual void OnServerDisconnect(NetworkConnectionToClient conn)</div><div class="ttdoc">Called on the server when a client disconnects.</div><div class="ttdef"><b>Definition</b> <a href="#l01364">NetworkManager.cs:1364</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a5bf39246bf796ae839815eb799431e0a"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a5bf39246bf796ae839815eb799431e0a">Mirror.NetworkManager.networkAddress</a></div><div class="ttdeci">string networkAddress</div><div class="ttdoc">Server's address for clients to connect to.</div><div class="ttdef"><b>Definition</b> <a href="#l00087">NetworkManager.cs:87</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a5e61ad5943fe34defb07b3cc1edb959e"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a5e61ad5943fe34defb07b3cc1edb959e">Mirror.NetworkManager.OnClientError</a></div><div class="ttdeci">virtual void OnClientError(TransportError error, string reason)</div><div class="ttdoc">Called on client when transport raises an exception.</div><div class="ttdef"><b>Definition</b> <a href="#l01448">NetworkManager.cs:1448</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a5e8f384938821366e4512ede3ae96c27"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a5e8f384938821366e4512ede3ae96c27">Mirror.NetworkManager.Update</a></div><div class="ttdeci">virtual void Update()</div><div class="ttdef"><b>Definition</b> <a href="#l00280">NetworkManager.cs:280</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a5feedb04fce427328f8b0b2fdc4aaecf"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a5feedb04fce427328f8b0b2fdc4aaecf">Mirror.NetworkManager.autoCreatePlayer</a></div><div class="ttdeci">bool autoCreatePlayer</div><div class="ttdoc">Enable to automatically create player objects on connect and on scene change.</div><div class="ttdef"><b>Definition</b> <a href="#l00118">NetworkManager.cs:118</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a60970702dbcd39e7c1e64a1417cc73af"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a60970702dbcd39e7c1e64a1417cc73af">Mirror.NetworkManager.OnStopServer</a></div><div class="ttdeci">virtual void OnStopServer()</div><div class="ttdoc">This is called when a server is stopped - including when a host is stopped.</div><div class="ttdef"><b>Definition</b> <a href="#l01489">NetworkManager.cs:1489</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a647cb7a86c0cd91fea090a047b914793"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a647cb7a86c0cd91fea090a047b914793">Mirror.NetworkManager.maxConnections</a></div><div class="ttdeci">int maxConnections</div><div class="ttdoc">The maximum number of concurrent network connections to support.</div><div class="ttdef"><b>Definition</b> <a href="#l00092">NetworkManager.cs:92</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a658ae89160589db3caf74014c83f5cf4"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a658ae89160589db3caf74014c83f5cf4">Mirror.NetworkManager.exceptionsDisconnect</a></div><div class="ttdeci">bool exceptionsDisconnect</div><div class="ttdef"><b>Definition</b> <a href="#l00135">NetworkManager.cs:135</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a6a3e05a7d69da725d5096c259e8588d9"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a6a3e05a7d69da725d5096c259e8588d9">Mirror.NetworkManager.disconnectInactiveConnections</a></div><div class="ttdeci">bool disconnectInactiveConnections</div><div class="ttdef"><b>Definition</b> <a href="#l00098">NetworkManager.cs:98</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a6ae0ef1c6575b8658ea975a7fc60ef72"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a6ae0ef1c6575b8658ea975a7fc60ef72">Mirror.NetworkManager.Awake</a></div><div class="ttdeci">virtual void Awake()</div><div class="ttdef"><b>Definition</b> <a href="#l00238">NetworkManager.cs:238</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a6c3233bb576b12f916bb1c3644141ddc"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a6c3233bb576b12f916bb1c3644141ddc">Mirror.NetworkManager.autoStartServerBuild</a></div><div class="ttdeci">bool autoStartServerBuild</div><div class="ttdef"><b>Definition</b> <a href="#l00051">NetworkManager.cs:51</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a6e127fabdafd35b09e9e58698a27b244"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a6e127fabdafd35b09e9e58698a27b244">Mirror.NetworkManager.StopClient</a></div><div class="ttdeci">void StopClient()</div><div class="ttdoc">Stops and disconnects the client.</div><div class="ttdef"><b>Definition</b> <a href="#l00649">NetworkManager.cs:649</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a7007bd753d6da4fd8b9ad945b8ab6c86"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a7007bd753d6da4fd8b9ad945b8ab6c86">Mirror.NetworkManager.transport</a></div><div class="ttdeci">Transport transport</div><div class="ttdef"><b>Definition</b> <a href="#l00082">NetworkManager.cs:82</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a7079cb91ab3aca157345929081f7bd63"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a7079cb91ab3aca157345929081f7bd63">Mirror.NetworkManager.clientLoadedScene</a></div><div class="ttdeci">bool clientLoadedScene</div><div class="ttdoc">True if the client loaded a new scene when connecting to the server.</div><div class="ttdef"><b>Definition</b> <a href="#l00168">NetworkManager.cs:168</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a70c44f1bb14574f27ffb5b1c8bfecde3"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a70c44f1bb14574f27ffb5b1c8bfecde3">Mirror.NetworkManager.OnClientSceneChanged</a></div><div class="ttdeci">virtual void OnClientSceneChanged()</div><div class="ttdoc">Called on clients when a scene has completed loaded, when the scene load was initiated by the server.</div><div class="ttdef"><b>Definition</b> <a href="#l01461">NetworkManager.cs:1461</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a7d659b2c87f79a99e7faaf3d015e49e7"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a7d659b2c87f79a99e7faaf3d015e49e7">Mirror.NetworkManager.OnValidate</a></div><div class="ttdeci">virtual void OnValidate()</div><div class="ttdef"><b>Definition</b> <a href="#l00179">NetworkManager.cs:179</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a7eead27d999ad760024d785c4b94f707"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a7eead27d999ad760024d785c4b94f707">Mirror.NetworkManager.evaluationInterval</a></div><div class="ttdeci">float evaluationInterval</div><div class="ttdef"><b>Definition</b> <a href="#l00147">NetworkManager.cs:147</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a817a61e453d4dce70a2e5aac33315f85"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a817a61e453d4dce70a2e5aac33315f85">Mirror.NetworkManager.OnServerError</a></div><div class="ttdeci">virtual void OnServerError(NetworkConnectionToClient conn, TransportError error, string reason)</div><div class="ttdoc">Called on server when transport raises an exception. NetworkConnection may be null.</div><div class="ttdef"><b>Definition</b> <a href="#l01400">NetworkManager.cs:1400</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a81bcbc73d62c047faf0e9c73fb6ffd63"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a81bcbc73d62c047faf0e9c73fb6ffd63">Mirror.NetworkManager.playerPrefab</a></div><div class="ttdeci">GameObject playerPrefab</div><div class="ttdoc">The default prefab to be used to create player objects on the server.</div><div class="ttdef"><b>Definition</b> <a href="#l00113">NetworkManager.cs:113</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a8358ad89e84ccb31cc96598b4e03d709"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a8358ad89e84ccb31cc96598b4e03d709">Mirror.NetworkManager.OnDestroy</a></div><div class="ttdeci">virtual void OnDestroy()</div><div class="ttdef"><b>Definition</b> <a href="#l00819">NetworkManager.cs:819</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a88c1f01355e89fef92ca90a64729220b"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a88c1f01355e89fef92ca90a64729220b">Mirror.NetworkManager.evaluationMethod</a></div><div class="ttdeci">ConnectionQualityMethod evaluationMethod</div><div class="ttdef"><b>Definition</b> <a href="#l00142">NetworkManager.cs:142</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a8956209ed00207528d3c66c6278fc47f"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a8956209ed00207528d3c66c6278fc47f">Mirror.NetworkManager.FinishLoadScene</a></div><div class="ttdeci">void FinishLoadScene()</div><div class="ttdef"><b>Definition</b> <a href="#l01015">NetworkManager.cs:1015</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a901aa08efc421a658176d407147272ab"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a901aa08efc421a658176d407147272ab">Mirror.NetworkManager.networkSceneName</a></div><div class="ttdeci">static string networkSceneName</div><div class="ttdoc">The name of the current network scene.</div><div class="ttdef"><b>Definition</b> <a href="#l00828">NetworkManager.cs:828</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a93ae8a9ca02afa60598d464779e1bca5"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a93ae8a9ca02afa60598d464779e1bca5">Mirror.NetworkManager.OnServerSceneChanged</a></div><div class="ttdeci">virtual void OnServerSceneChanged(string sceneName)</div><div class="ttdoc">Called on server after a scene load with ServerChangeScene() is completed.</div><div class="ttdef"><b>Definition</b> <a href="#l01406">NetworkManager.cs:1406</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a94a71162ac38d4c83fc528c27bbd934f"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a94a71162ac38d4c83fc528c27bbd934f">Mirror.NetworkManager.onlineScene</a></div><div class="ttdeci">string onlineScene</div><div class="ttdoc">Automatically switch to this scene upon going online (after connect/startserver).</div><div class="ttdef"><b>Definition</b> <a href="#l00077">NetworkManager.cs:77</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a97acbe5e20334a1b3591241c8a7f8e0f"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a97acbe5e20334a1b3591241c8a7f8e0f">Mirror.NetworkManager.OnClientDisconnect</a></div><div class="ttdeci">virtual void OnClientDisconnect()</div><div class="ttdoc">Called on clients when disconnected from a server.</div><div class="ttdef"><b>Definition</b> <a href="#l01427">NetworkManager.cs:1427</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a989b4a0365dd627ac963656a786ae69d"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a989b4a0365dd627ac963656a786ae69d">Mirror.NetworkManager.OnStartClient</a></div><div class="ttdeci">virtual void OnStartClient()</div><div class="ttdoc">This is invoked when the client is started.</div><div class="ttdef"><b>Definition</b> <a href="#l01486">NetworkManager.cs:1486</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a9a27bfac207d46188c6940155800c4ba"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a9a27bfac207d46188c6940155800c4ba">Mirror.NetworkManager.dontDestroyOnLoad</a></div><div class="ttdeci">bool dontDestroyOnLoad</div><div class="ttdoc">Enable to keep NetworkManager alive when changing scenes.</div><div class="ttdef"><b>Definition</b> <a href="#l00024">NetworkManager.cs:24</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a9afe15bd60cdc9e1a1bd266ccbfe1fe9"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a9afe15bd60cdc9e1a1bd266ccbfe1fe9">Mirror.NetworkManager.LateUpdate</a></div><div class="ttdeci">virtual void LateUpdate()</div><div class="ttdef"><b>Definition</b> <a href="#l00286">NetworkManager.cs:286</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_a9ea7ee41ec27cfb8a8ec06938b0ef63c"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#a9ea7ee41ec27cfb8a8ec06938b0ef63c">Mirror.NetworkManager.startPositions</a></div><div class="ttdeci">static List&lt; Transform &gt; startPositions</div><div class="ttdoc">List of transforms populated by NetworkStartPositions.</div><div class="ttdef"><b>Definition</b> <a href="#l00130">NetworkManager.cs:130</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_aaca5496d1641eb1eab14d0b8b34a9c0e"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#aaca5496d1641eb1eab14d0b8b34a9c0e">Mirror.NetworkManager.OnServerReady</a></div><div class="ttdeci">virtual void OnServerReady(NetworkConnectionToClient conn)</div><div class="ttdoc">Called on the server when a client is ready (= loaded the scene)</div><div class="ttdef"><b>Definition</b> <a href="#l01374">NetworkManager.cs:1374</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_abf44b9cdc538229e5a900060673ac281"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#abf44b9cdc538229e5a900060673ac281">Mirror.NetworkManager.OnApplicationQuit</a></div><div class="ttdeci">virtual void OnApplicationQuit()</div><div class="ttdef"><b>Definition</b> <a href="#l00686">NetworkManager.cs:686</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_ac2295dcd5454f7dd2f30c9648abd5abe"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#ac2295dcd5454f7dd2f30c9648abd5abe">Mirror.NetworkManager.UnRegisterStartPosition</a></div><div class="ttdeci">static void UnRegisterStartPosition(Transform start)</div><div class="ttdoc">Unregister a Transform from start positions.</div><div class="ttdef"><b>Definition</b> <a href="#l01143">NetworkManager.cs:1143</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_ac3bbfc101e99f8a857f6dfa584f6156f"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#ac3bbfc101e99f8a857f6dfa584f6156f">Mirror.NetworkManager.runInBackground</a></div><div class="ttdeci">bool runInBackground</div><div class="ttdoc">Multiplayer games should always run in the background so the network doesn't time out.</div><div class="ttdef"><b>Definition</b> <a href="#l00029">NetworkManager.cs:29</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_ac91758c48cf3bfb8c9a22df4d43325ec"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#ac91758c48cf3bfb8c9a22df4d43325ec">Mirror.NetworkManager.editorAutoStart</a></div><div class="ttdeci">bool editorAutoStart</div><div class="ttdef"><b>Definition</b> <a href="#l00038">NetworkManager.cs:38</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_ac994cd3aa4b4d7a5265db22225b813f2"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#ac994cd3aa4b4d7a5265db22225b813f2">Mirror.NetworkManager.authenticator</a></div><div class="ttdeci">NetworkAuthenticator authenticator</div><div class="ttdef"><b>Definition</b> <a href="#l00105">NetworkManager.cs:105</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_acf2e32b2b01150fa5867161fbe514e98"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#acf2e32b2b01150fa5867161fbe514e98">Mirror.NetworkManager.GetStartPosition</a></div><div class="ttdeci">virtual Transform GetStartPosition()</div><div class="ttdoc">Get the next NetworkStartPosition based on the selected PlayerSpawnMethod.</div><div class="ttdef"><b>Definition</b> <a href="#l01150">NetworkManager.cs:1150</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_acf951becaaa4d612814d92676eb241a8"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#acf951becaaa4d612814d92676eb241a8">Mirror.NetworkManager.StartServer</a></div><div class="ttdeci">void StartServer()</div><div class="ttdoc">Starts the server, listening for incoming connections.</div><div class="ttdef"><b>Definition</b> <a href="#l00346">NetworkManager.cs:346</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_acfa046ec2fa84cebc9fc267b77bd9bc6"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#acfa046ec2fa84cebc9fc267b77bd9bc6">Mirror.NetworkManager.OnServerAddPlayer</a></div><div class="ttdeci">virtual void OnServerAddPlayer(NetworkConnectionToClient conn)</div><div class="ttdoc">Called on server when a client requests to add the player. Adds playerPrefab by default....</div><div class="ttdef"><b>Definition</b> <a href="#l01386">NetworkManager.cs:1386</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_ad0147810e5a4fbb5deb8ff7083f72e4b"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#ad0147810e5a4fbb5deb8ff7083f72e4b">Mirror.NetworkManager.OnServerConnect</a></div><div class="ttdeci">virtual void OnServerConnect(NetworkConnectionToClient conn)</div><div class="ttdoc">Called on the server when a new client connects.</div><div class="ttdef"><b>Definition</b> <a href="#l01360">NetworkManager.cs:1360</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_ad06f34fe911525eeb922c1227f9161a0"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#ad06f34fe911525eeb922c1227f9161a0">Mirror.NetworkManager.headlessStartMode</a></div><div class="ttdeci">HeadlessStartOptions headlessStartMode</div><div class="ttdoc">Should the server auto-start when 'Server Build' is checked in build settings.</div><div class="ttdef"><b>Definition</b> <a href="#l00035">NetworkManager.cs:35</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_ad42a88330b573a1380a14c6eb9074b38"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#ad42a88330b573a1380a14c6eb9074b38">Mirror.NetworkManager.OnClientNotReady</a></div><div class="ttdeci">virtual void OnClientNotReady()</div><div class="ttdoc">Called on clients when a servers tells the client it is no longer ready, e.g. when switching scenes.</div><div class="ttdef"><b>Definition</b> <a href="#l01451">NetworkManager.cs:1451</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_ada9f6a63e9816755bb437b29c4bbfa1d"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#ada9f6a63e9816755bb437b29c4bbfa1d">Mirror.NetworkManager.StartClient</a></div><div class="ttdeci">void StartClient(Uri uri)</div><div class="ttdoc">Starts the client, connects it to the server via Uri.</div><div class="ttdef"><b>Definition</b> <a href="#l00452">NetworkManager.cs:452</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_adc204fa81ca9ecbc6c2ac6471b7f71c5"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#adc204fa81ca9ecbc6c2ac6471b7f71c5">Mirror.NetworkManager.loadingSceneAsync</a></div><div class="ttdeci">static AsyncOperation loadingSceneAsync</div><div class="ttdef"><b>Definition</b> <a href="#l00830">NetworkManager.cs:830</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_ae428a9f79881585ef5fef880f6c923ad"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#ae428a9f79881585ef5fef880f6c923ad">Mirror.NetworkManager.ServerChangeScene</a></div><div class="ttdeci">virtual void ServerChangeScene(string newSceneName)</div><div class="ttdoc">Change the server scene and all client's scenes across the network.</div><div class="ttdef"><b>Definition</b> <a href="#l00837">NetworkManager.cs:837</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_ae6167e3960b1a34e09ea97868d1cc60e"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#ae6167e3960b1a34e09ea97868d1cc60e">Mirror.NetworkManager.playerSpawnMethod</a></div><div class="ttdeci">PlayerSpawnMethod playerSpawnMethod</div><div class="ttdoc">Where to spawn players.</div><div class="ttdef"><b>Definition</b> <a href="#l00123">NetworkManager.cs:123</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_ae8ea1665e8b5401a65f23e9a168b6a89"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#ae8ea1665e8b5401a65f23e9a168b6a89">Mirror.NetworkManager.numPlayers</a></div><div class="ttdeci">int numPlayers</div><div class="ttdoc">Number of active player objects across all connections on the server.</div><div class="ttdef"><b>Definition</b> <a href="#l00156">NetworkManager.cs:156</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_afbf241fc215908b6705f9e9792bde2d4"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#afbf241fc215908b6705f9e9792bde2d4">Mirror.NetworkManager.offlineScene</a></div><div class="ttdeci">string offlineScene</div><div class="ttdoc">Client Update frequency, per second. Use around 60Hz for fast paced games like Counter-Strike to mini...</div><div class="ttdef"><b>Definition</b> <a href="#l00071">NetworkManager.cs:71</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_network_manager_html_afc488979b7da5f02a603c26d638d61ac"><div class="ttname"><a href="class_mirror_1_1_network_manager.html#afc488979b7da5f02a603c26d638d61ac">Mirror.NetworkManager.OnConnectionQualityChanged</a></div><div class="ttdeci">virtual void OnConnectionQualityChanged(ConnectionQuality previous, ConnectionQuality current)</div><div class="ttdoc">Deprecated: NetworkClient handles this now.</div><div class="ttdef"><b>Definition</b> <a href="#l01440">NetworkManager.cs:1440</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_snapshot_interpolation_settings_html"><div class="ttname"><a href="class_mirror_1_1_snapshot_interpolation_settings.html">Mirror.SnapshotInterpolationSettings</a></div><div class="ttdef"><b>Definition</b> <a href="_snapshot_interpolation_settings_8cs_source.html#l00010">SnapshotInterpolationSettings.cs:11</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_transport_html"><div class="ttname"><a href="class_mirror_1_1_transport.html">Mirror.Transport</a></div><div class="ttdoc">Abstract transport layer component.</div><div class="ttdef"><b>Definition</b> <a href="_transport_8cs_source.html#l00031">Transport.cs:32</a></div></div>
<div class="ttc" id="anamespace_mirror_html"><div class="ttname"><a href="namespace_mirror.html">Mirror</a></div><div class="ttdef"><b>Definition</b> <a href="_basic_authenticator_8cs_source.html#l00005">BasicAuthenticator.cs:6</a></div></div>
<div class="ttc" id="anamespace_mirror_html_a1956ffe54926cf889f04ff03d248009b"><div class="ttname"><a href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009b">Mirror.NetworkManagerMode</a></div><div class="ttdeci">NetworkManagerMode</div><div class="ttdef"><b>Definition</b> <a href="#l00011">NetworkManager.cs:11</a></div></div>
<div class="ttc" id="anamespace_mirror_html_a1956ffe54926cf889f04ff03d248009ba186244edf2711a5111ac0cc3dd007b01"><div class="ttname"><a href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009ba186244edf2711a5111ac0cc3dd007b01">Mirror.NetworkManagerMode.ClientOnly</a></div><div class="ttdeci">@ ClientOnly</div></div>
<div class="ttc" id="anamespace_mirror_html_a1956ffe54926cf889f04ff03d248009ba8d9da4bc0e49a50e09ac9f7e56789d39"><div class="ttname"><a href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009ba8d9da4bc0e49a50e09ac9f7e56789d39">Mirror.NetworkManagerMode.Offline</a></div><div class="ttdeci">@ Offline</div></div>
<div class="ttc" id="anamespace_mirror_html_a1956ffe54926cf889f04ff03d248009baab2bffbd2a02d6b8390aac7945477272"><div class="ttname"><a href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009baab2bffbd2a02d6b8390aac7945477272">Mirror.NetworkManagerMode.ServerOnly</a></div><div class="ttdeci">@ ServerOnly</div></div>
<div class="ttc" id="anamespace_mirror_html_a1956ffe54926cf889f04ff03d248009bac2ca16d048ec66e04bca283eab048ec2"><div class="ttname"><a href="namespace_mirror.html#a1956ffe54926cf889f04ff03d248009bac2ca16d048ec66e04bca283eab048ec2">Mirror.NetworkManagerMode.Host</a></div><div class="ttdeci">@ Host</div></div>
<div class="ttc" id="anamespace_mirror_html_a1d7b45007a6d8ba5bbfd968066eb9625"><div class="ttname"><a href="namespace_mirror.html#a1d7b45007a6d8ba5bbfd968066eb9625">Mirror.TransportError</a></div><div class="ttdeci">TransportError</div><div class="ttdef"><b>Definition</b> <a href="_transport_error_8cs_source.html#l00006">TransportError.cs:7</a></div></div>
<div class="ttc" id="anamespace_mirror_html_a23132665b6a9f18117f09ce19aec9609"><div class="ttname"><a href="namespace_mirror.html#a23132665b6a9f18117f09ce19aec9609">Mirror.PlayerSpawnMethod</a></div><div class="ttdeci">PlayerSpawnMethod</div><div class="ttdef"><b>Definition</b> <a href="#l00010">NetworkManager.cs:10</a></div></div>
<div class="ttc" id="anamespace_mirror_html_a23132665b6a9f18117f09ce19aec9609a64663f4646781c9c0110838b905daa23"><div class="ttname"><a href="namespace_mirror.html#a23132665b6a9f18117f09ce19aec9609a64663f4646781c9c0110838b905daa23">Mirror.PlayerSpawnMethod.Random</a></div><div class="ttdeci">@ Random</div></div>
<div class="ttc" id="anamespace_mirror_html_a23132665b6a9f18117f09ce19aec9609a91a63281bd2e647fe3b92d1d22cd3380"><div class="ttname"><a href="namespace_mirror.html#a23132665b6a9f18117f09ce19aec9609a91a63281bd2e647fe3b92d1d22cd3380">Mirror.PlayerSpawnMethod.RoundRobin</a></div><div class="ttdeci">@ RoundRobin</div></div>
<div class="ttc" id="anamespace_mirror_html_a3ded7157aa2bec42af24321d9fe69c38a83c5ece65aa7713b6fe63060d96b83fc"><div class="ttname"><a href="namespace_mirror.html#a3ded7157aa2bec42af24321d9fe69c38a83c5ece65aa7713b6fe63060d96b83fc">Mirror.ClientMainEventType.OnClientError</a></div><div class="ttdeci">@ OnClientError</div></div>
<div class="ttc" id="anamespace_mirror_html_a572d3e5b154a58a9b2cc7b762f1909ac"><div class="ttname"><a href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909ac">Mirror.HeadlessStartOptions</a></div><div class="ttdeci">HeadlessStartOptions</div><div class="ttdef"><b>Definition</b> <a href="#l00012">NetworkManager.cs:12</a></div></div>
<div class="ttc" id="anamespace_mirror_html_a572d3e5b154a58a9b2cc7b762f1909aca71b7f3fcd4098ebf8a3b387579d90dd7"><div class="ttname"><a href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909aca71b7f3fcd4098ebf8a3b387579d90dd7">Mirror.HeadlessStartOptions.DoNothing</a></div><div class="ttdeci">@ DoNothing</div></div>
<div class="ttc" id="anamespace_mirror_html_a572d3e5b154a58a9b2cc7b762f1909aca77ec788f2a7b1ad97812fff9e21837fa"><div class="ttname"><a href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909aca77ec788f2a7b1ad97812fff9e21837fa">Mirror.HeadlessStartOptions.AutoStartClient</a></div><div class="ttdeci">@ AutoStartClient</div></div>
<div class="ttc" id="anamespace_mirror_html_a572d3e5b154a58a9b2cc7b762f1909acaf8883a8161a4ab27fb36d406117aa0de"><div class="ttname"><a href="namespace_mirror.html#a572d3e5b154a58a9b2cc7b762f1909acaf8883a8161a4ab27fb36d406117aa0de">Mirror.HeadlessStartOptions.AutoStartServer</a></div><div class="ttdeci">@ AutoStartServer</div></div>
<div class="ttc" id="anamespace_mirror_html_a73d30c411a48afc1b18bc409655a7ccda32c8dadfc7f21f87353e506070c77ac5"><div class="ttname"><a href="namespace_mirror.html#a73d30c411a48afc1b18bc409655a7ccda32c8dadfc7f21f87353e506070c77ac5">Mirror.ServerMainEventType.OnServerError</a></div><div class="ttdeci">@ OnServerError</div></div>
<div class="ttc" id="anamespace_mirror_html_a7a51f9c6460df8b7bbbe27394905a80e"><div class="ttname"><a href="namespace_mirror.html#a7a51f9c6460df8b7bbbe27394905a80e">Mirror.SceneOperation</a></div><div class="ttdeci">SceneOperation</div><div class="ttdef"><b>Definition</b> <a href="_messages_8cs_source.html#l00028">Messages.cs:29</a></div></div>
<div class="ttc" id="anamespace_mirror_html_ac59c83f92a2065c6327ace451c3c4c49"><div class="ttname"><a href="namespace_mirror.html#ac59c83f92a2065c6327ace451c3c4c49">Mirror.ConnectionQuality</a></div><div class="ttdeci">ConnectionQuality</div><div class="ttdef"><b>Definition</b> <a href="_connection_quality_8cs_source.html#l00007">ConnectionQuality.cs:8</a></div></div>
<div class="ttc" id="anamespace_mirror_html_ae48547777ff464a8465b6ff4f37ffdf3"><div class="ttname"><a href="namespace_mirror.html#ae48547777ff464a8465b6ff4f37ffdf3">Mirror.ConnectionQualityMethod</a></div><div class="ttdeci">ConnectionQualityMethod</div><div class="ttdef"><b>Definition</b> <a href="_connection_quality_8cs_source.html#l00016">ConnectionQuality.cs:17</a></div></div>
<div class="ttc" id="astruct_mirror_1_1_grid2_d_html"><div class="ttname"><a href="struct_mirror_1_1_grid2_d.html">Mirror.Grid2D</a></div><div class="ttdef"><b>Definition</b> <a href="_grid2_d_8cs_source.html#l00010">Grid2D.cs:11</a></div></div>
<div class="ttc" id="astruct_mirror_1_1_scene_message_html"><div class="ttname"><a href="struct_mirror_1_1_scene_message.html">Mirror.SceneMessage</a></div><div class="ttdef"><b>Definition</b> <a href="_messages_8cs_source.html#l00020">Messages.cs:21</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_84bbf7b3c7f28a5a18725745e1505219.html">Assets</a></li><li class="navelem"><a class="el" href="dir_bf1dd3994e8f933eb733da65a1863113.html">Mirror</a></li><li class="navelem"><a class="el" href="dir_498e799cc6e42a51607844cb305aca07.html">Core</a></li><li class="navelem"><a class="el" href="_network_manager_8cs.html">NetworkManager.cs</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
