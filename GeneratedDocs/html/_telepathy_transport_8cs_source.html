<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>World Conquest: Assets/Mirror/Transports/Telepathy/TelepathyTransport.cs Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">World Conquest
   </div>
   <div id="projectbrief">Implementation of the Risk board game for our Software Engineering module.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('_telepathy_transport_8cs_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">TelepathyTransport.cs</div></div>
</div><!--header-->
<div class="contents">
<a href="_telepathy_transport_8cs.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// wraps Telepathy for use as HLAPI TransportLayer</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="keyword">using </span>System;</div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="keyword">using </span>System.Net;</div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="keyword">using </span>System.Net.Sockets;</div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="keyword">using </span>UnityEngine;</div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="comment">// Replaced by Kcp November 2020</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="keyword">namespace </span><a class="code hl_namespace" href="namespace_mirror.html">Mirror</a></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span>{</div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span>    [HelpURL(<span class="stringliteral">&quot;https://github.com/vis2k/Telepathy/blob/master/README.md&quot;</span>)]</div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span>    [DisallowMultipleComponent]</div>
<div class="foldopen" id="foldopen00012" data-start="{" data-end="};">
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html">   12</a></span>    <span class="keyword">public</span> <span class="keyword">class </span><a class="code hl_class" href="class_mirror_1_1_telepathy_transport.html">TelepathyTransport</a> : <a class="code hl_class" href="class_mirror_1_1_transport.html">Transport</a>, <a class="code hl_interface" href="interface_mirror_1_1_port_transport.html">PortTransport</a></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span>    {</div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span>        <span class="comment">// scheme used by this transport</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span>        <span class="comment">// &quot;tcp4&quot; means tcp with 4 bytes header, network byte order</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a4c3b0b7f38c960b7fd43dfd585b48bc9">   16</a></span>        <span class="keyword">public</span> <span class="keyword">const</span> <span class="keywordtype">string</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a4c3b0b7f38c960b7fd43dfd585b48bc9">Scheme</a> = <span class="stringliteral">&quot;tcp4&quot;</span>;</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a70a9a54307fed1bb56df72002b361e19">   18</a></span>        <span class="keyword">public</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ushort</a> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a70a9a54307fed1bb56df72002b361e19">port</a> = 7777;</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a61a7f17b332bb31f01929eee514d9923">   19</a></span>        <span class="keyword">public</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ushort</a> <a class="code hl_property" href="class_mirror_1_1_telepathy_transport.html#a61a7f17b332bb31f01929eee514d9923">Port</a> { <span class="keyword">get</span> =&gt; <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a70a9a54307fed1bb56df72002b361e19">port</a>; <span class="keyword">set</span> =&gt; <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a70a9a54307fed1bb56df72002b361e19">port</a>=value; }</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span> </div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>        [Header(<span class="stringliteral">&quot;Common&quot;</span>)]</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Nagle Algorithm can be disabled by enabling NoDelay&quot;</span>)]</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#aeeb45aff206763044266619527bd8a6a">   23</a></span>        <span class="keyword">public</span> <span class="keywordtype">bool</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#aeeb45aff206763044266619527bd8a6a">NoDelay</a> = <span class="keyword">true</span>;</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span> </div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Send timeout in milliseconds.&quot;</span>)]</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#aacd4d05cc06a3ddbb40e387cdd1f9fc7">   26</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#aacd4d05cc06a3ddbb40e387cdd1f9fc7">SendTimeout</a> = 5000;</div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span> </div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Receive timeout in milliseconds. High by default so users don&#39;t time out during scene changes.&quot;</span>)]</div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#adc8345a6d13c78799703dd86d2bde952">   29</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#adc8345a6d13c78799703dd86d2bde952">ReceiveTimeout</a> = 30000;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>        [Header(<span class="stringliteral">&quot;Server&quot;</span>)]</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Protect against allocation attacks by keeping the max message size small. Otherwise an attacker might send multiple fake packets with 2GB headers, causing the server to run out of memory after allocating multiple large packets.&quot;</span>)]</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a1977240537e16fb459db371867d0e25f">   33</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a1977240537e16fb459db371867d0e25f">serverMaxMessageSize</a> = 16 * 1024;</div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Server processes a limit amount of messages per tick to avoid a deadlock where it might end up processing forever if messages come in faster than we can process them.&quot;</span>)]</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#ace4cc8b61fe41ac866ad6a2a3ed13f54">   36</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#ace4cc8b61fe41ac866ad6a2a3ed13f54">serverMaxReceivesPerTick</a> = 10000;</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> </div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Server send queue limit per connection for pending messages. Telepathy will disconnect a connection&#39;s queues reach that limit for load balancing. Better to kick one slow client than slowing down the whole server.&quot;</span>)]</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#ab9ec33c29bef4638bda4e5f2de8b469e">   39</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#ab9ec33c29bef4638bda4e5f2de8b469e">serverSendQueueLimitPerConnection</a> = 10000;</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span> </div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Server receive queue limit per connection for pending messages. Telepathy will disconnect a connection&#39;s queues reach that limit for load balancing. Better to kick one slow client than slowing down the whole server.&quot;</span>)]</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a3d9142fc88fdf52302ad68e31b245d29">   42</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a3d9142fc88fdf52302ad68e31b245d29">serverReceiveQueueLimitPerConnection</a> = 10000;</div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span> </div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>        [Header(<span class="stringliteral">&quot;Client&quot;</span>)]</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Protect against allocation attacks by keeping the max message size small. Otherwise an attacker host might send multiple fake packets with 2GB headers, causing the connected clients to run out of memory after allocating multiple large packets.&quot;</span>)]</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a5296efb7fcf9525e840c626ecfe80d04">   46</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a5296efb7fcf9525e840c626ecfe80d04">clientMaxMessageSize</a> = 16 * 1024;</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Client processes a limit amount of messages per tick to avoid a deadlock where it might end up processing forever if messages come in faster than we can process them.&quot;</span>)]</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#af862776645609b71d6cdc99758ae387e">   49</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#af862776645609b71d6cdc99758ae387e">clientMaxReceivesPerTick</a> = 1000;</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span> </div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Client send queue limit for pending messages. Telepathy will disconnect if the connection&#39;s queues reach that limit in order to avoid ever growing latencies.&quot;</span>)]</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a29fe2ecaa79df7cf576345b7185926d5">   52</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a29fe2ecaa79df7cf576345b7185926d5">clientSendQueueLimit</a> = 10000;</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span> </div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>        [<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Tooltip</a>(<span class="stringliteral">&quot;Client receive queue limit for pending messages. Telepathy will disconnect if the connection&#39;s queues reach that limit in order to avoid ever growing latencies.&quot;</span>)]</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#abf4ca459953e5068b2f4ec487eec8521">   55</a></span>        <span class="keyword">public</span> <span class="keywordtype">int</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#abf4ca459953e5068b2f4ec487eec8521">clientReceiveQueueLimit</a> = 10000;</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        <a class="code hl_class" href="class_telepathy_1_1_client.html">Telepathy.Client</a> client;</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>        <a class="code hl_class" href="class_telepathy_1_1_server.html">Telepathy.Server</a> server;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>        <span class="comment">// scene change message needs to halt  message processing immediately</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        <span class="comment">// Telepathy.Tick() has a enabledCheck parameter that we can use, but</span></div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>        <span class="comment">// let&#39;s only allocate it once.</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>        <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Func&lt;bool&gt;</a> enabledCheck;</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span> </div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>        <span class="keywordtype">void</span> Awake()</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>        {</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>            <span class="comment">// tell Telepathy to use Unity&#39;s Debug.Log</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>            Telepathy.Log.Info = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.Log;</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span>            Telepathy.Log.Warning = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogWarning;</div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>            Telepathy.Log.Error = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.LogError;</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span> </div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span>            <span class="comment">// allocate enabled check only once</span></div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>            enabledCheck = () =&gt; enabled;</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span> </div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.Log(<span class="stringliteral">&quot;TelepathyTransport initialized!&quot;</span>);</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>        }</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span> </div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>        <span class="comment">// C#&#39;s built in TCP sockets run everywhere except on WebGL</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>        <span class="comment">// Do not change this back to using Application.platform</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>        <span class="comment">// because that doesn&#39;t work in the Editor!</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#abcdb0e93b24235e9109c6846f1f1c1b6">   81</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#abcdb0e93b24235e9109c6846f1f1c1b6">Available</a>() =&gt;</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span><span class="preprocessor">#if UNITY_WEBGL</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>            <span class="keyword">false</span>;</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span>            <span class="keyword">true</span>;</div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span><span class="preprocessor">#endif</span></div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span> </div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>        <span class="comment">// client</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>        <span class="keyword">private</span> <span class="keywordtype">void</span> CreateClient()</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>        {</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>            <span class="comment">// create client</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>            client = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_telepathy.html">Telepathy</a>.<a class="code hl_class" href="class_telepathy_1_1_client.html">Client</a>(<a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a5296efb7fcf9525e840c626ecfe80d04">clientMaxMessageSize</a>);</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>            <span class="comment">// client hooks</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>            <span class="comment">// other systems hook into transport events in OnCreate or</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>            <span class="comment">// OnStartRunning in no particular order. the only way to avoid</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>            <span class="comment">// race conditions where telepathy uses OnConnected before another</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>            <span class="comment">// system&#39;s hook (e.g. statistics OnData) was added is to wrap</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>            <span class="comment">// them all in a lambda and always call the latest hook.</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>            <span class="comment">// (= lazy call)</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>            client.OnConnected = () =&gt; <a class="code hl_variable" href="class_mirror_1_1_transport.html#a0c118fbbe9a2c95931689299f339ed2a">OnClientConnected</a>.Invoke();</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>            client.OnData = (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">segment</a>) =&gt; <a class="code hl_variable" href="class_mirror_1_1_transport.html#a647488e1cb837f2e08ee01892da813fc">OnClientDataReceived</a>.Invoke(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">segment</a>, Channels.Reliable);</div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>            <span class="comment">// fix: https://github.com/vis2k/Mirror/issues/3287</span></div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>            <span class="comment">// Telepathy may call OnDisconnected twice.</span></div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>            <span class="comment">// Mirror may have cleared the callback already, so use &quot;?.&quot; here.</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>            client.OnDisconnected = () =&gt; <a class="code hl_variable" href="class_mirror_1_1_transport.html#a1e165ace7bfb3eb442e2469a33e4081a">OnClientDisconnected</a>?.Invoke();</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span> </div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>            <span class="comment">// client configuration</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>            client.NoDelay = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#aeeb45aff206763044266619527bd8a6a">NoDelay</a>;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>            client.SendTimeout = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#aacd4d05cc06a3ddbb40e387cdd1f9fc7">SendTimeout</a>;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>            client.ReceiveTimeout = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#adc8345a6d13c78799703dd86d2bde952">ReceiveTimeout</a>;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>            client.SendQueueLimit = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a29fe2ecaa79df7cf576345b7185926d5">clientSendQueueLimit</a>;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>            client.ReceiveQueueLimit = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#abf4ca459953e5068b2f4ec487eec8521">clientReceiveQueueLimit</a>;</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>        }</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a5331c3cab8955c9307f84522ca91b125">  114</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#a5331c3cab8955c9307f84522ca91b125">ClientConnected</a>() =&gt; client != <span class="keyword">null</span> &amp;&amp; client.<a class="code hl_property" href="class_telepathy_1_1_client.html#a7d910fc761c5a2834975a51c07bef37f">Connected</a>;</div>
<div class="foldopen" id="foldopen00115" data-start="{" data-end="}">
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#adadb28cf6672e015d58c5565f491ad71">  115</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#adadb28cf6672e015d58c5565f491ad71">ClientConnect</a>(<span class="keywordtype">string</span> address)</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>        {</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>            CreateClient();</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>            client.<a class="code hl_function" href="class_telepathy_1_1_client.html#a32edf31800fff35062bb8c8d2a8bb609">Connect</a>(address, <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a70a9a54307fed1bb56df72002b361e19">port</a>);</div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>        }</div>
</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span> </div>
<div class="foldopen" id="foldopen00121" data-start="{" data-end="}">
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a4a4122caf208b894ec69f04cbe3918a3">  121</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#a4a4122caf208b894ec69f04cbe3918a3">ClientConnect</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Uri</a> uri)</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>        {</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>            CreateClient();</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>            <span class="keywordflow">if</span> (uri.Scheme != <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a4c3b0b7f38c960b7fd43dfd585b48bc9">Scheme</a>)</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>                <span class="keywordflow">throw</span> <span class="keyword">new</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ArgumentException</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;Invalid url {uri}, use {Scheme}://host:port instead&quot;</span>, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">nameof</a>(uri));</div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span> </div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>            <span class="keywordtype">int</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">serverPort</a> = uri.IsDefaultPort ? <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a70a9a54307fed1bb56df72002b361e19">port</a> : uri.Port;</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>            client.<a class="code hl_function" href="class_telepathy_1_1_client.html#a32edf31800fff35062bb8c8d2a8bb609">Connect</a>(uri.Host, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">serverPort</a>);</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>        }</div>
</div>
<div class="foldopen" id="foldopen00130" data-start="{" data-end="}">
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a2abd054658041fe209c7006dc9f83433">  130</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#a2abd054658041fe209c7006dc9f83433">ClientSend</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ArraySegment&lt;byte&gt;</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">segment</a>, <span class="keywordtype">int</span> channelId)</div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>        {</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>            client?.<a class="code hl_function" href="class_telepathy_1_1_client.html#af54b069da34edba79508455586dc4a6f">Send</a>(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">segment</a>);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>            <span class="comment">// call event. might be null if no statistics are listening etc.</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>            <a class="code hl_variable" href="class_mirror_1_1_transport.html#a71cbd65d3d45c7d1b19a77dcfb1600b9">OnClientDataSent</a>?.Invoke(<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">segment</a>, Channels.Reliable);</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>        }</div>
</div>
<div class="foldopen" id="foldopen00137" data-start="{" data-end="}">
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a08c4ab88612c182eb7c3dd6678e33435">  137</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#a08c4ab88612c182eb7c3dd6678e33435">ClientDisconnect</a>()</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>        {</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>            client?.<a class="code hl_function" href="class_telepathy_1_1_client.html#ace1241514367a306a88deb766e31de7b">Disconnect</a>();</div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>            client = <span class="keyword">null</span>;</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>            <span class="comment">// client triggers the disconnected event in client.Tick() which won&#39;t be run anymore</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>            <a class="code hl_variable" href="class_mirror_1_1_transport.html#a1e165ace7bfb3eb442e2469a33e4081a">OnClientDisconnected</a>?.Invoke();</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>        }</div>
</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>        <span class="comment">// messages should always be processed in early update</span></div>
<div class="foldopen" id="foldopen00146" data-start="{" data-end="}">
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#abdbbe71e75cb7a0ed90cd86677d270da">  146</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#abdbbe71e75cb7a0ed90cd86677d270da">ClientEarlyUpdate</a>()</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>        {</div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>            <span class="comment">// note: we need to check enabled in case we set it to false</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>            <span class="comment">// when LateUpdate already started.</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>            <span class="comment">// (https://github.com/vis2k/Mirror/pull/379)</span></div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>            <span class="keywordflow">if</span> (!enabled) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span> </div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>            <span class="comment">// process a maximum amount of client messages per tick</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>            <span class="comment">// IMPORTANT: check .enabled to stop processing immediately after a</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>            <span class="comment">//            scene change message arrives!</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>            client?.<a class="code hl_function" href="class_telepathy_1_1_client.html#aa32bb85cbda908661ed8df3cb22107de">Tick</a>(<a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#af862776645609b71d6cdc99758ae387e">clientMaxReceivesPerTick</a>, enabledCheck);</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>        }</div>
</div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span> </div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>        <span class="comment">// server</span></div>
<div class="foldopen" id="foldopen00160" data-start="{" data-end="}">
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#ac6e0eff4f1fd72746416a3fa76385009">  160</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Uri</a> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#ac6e0eff4f1fd72746416a3fa76385009">ServerUri</a>()</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        {</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">UriBuilder</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">builder</a> = <span class="keyword">new</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">UriBuilder</a>();</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>            builder.Scheme = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a4c3b0b7f38c960b7fd43dfd585b48bc9">Scheme</a>;</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>            builder.Host = <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Dns</a>.GetHostName();</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>            builder.Port = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a70a9a54307fed1bb56df72002b361e19">port</a>;</div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>            <span class="keywordflow">return</span> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">builder</a>.Uri;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>        }</div>
</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a97c1df1f38e023cb2a37c57b51987066">  168</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">bool</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#a97c1df1f38e023cb2a37c57b51987066">ServerActive</a>() =&gt; server != <span class="keyword">null</span> &amp;&amp; server.<a class="code hl_property" href="class_telepathy_1_1_server.html#a88bb85eff5cb0158798bed088ee057c1">Active</a>;</div>
<div class="foldopen" id="foldopen00169" data-start="{" data-end="}">
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a5a944f452d2869443d8441c1e6dffa4e">  169</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#a5a944f452d2869443d8441c1e6dffa4e">ServerStart</a>()</div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>        {</div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>            <span class="comment">// create server</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>            server = <span class="keyword">new</span> <a class="code hl_namespace" href="namespace_telepathy.html">Telepathy</a>.<a class="code hl_class" href="class_telepathy_1_1_server.html">Server</a>(<a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a1977240537e16fb459db371867d0e25f">serverMaxMessageSize</a>);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span> </div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span>            <span class="comment">// server hooks</span></div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>            <span class="comment">// other systems hook into transport events in OnCreate or</span></div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>            <span class="comment">// OnStartRunning in no particular order. the only way to avoid</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>            <span class="comment">// race conditions where telepathy uses OnConnected before another</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>            <span class="comment">// system&#39;s hook (e.g. statistics OnData) was added is to wrap</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>            <span class="comment">// them all in a lambda and always call the latest hook.</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>            <span class="comment">// (= lazy call)</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>            server.OnConnected = (connectionId) =&gt; <a class="code hl_variable" href="class_mirror_1_1_transport.html#a364bc19a2bf62bdec978e94a5991e3cf">OnServerConnected</a>.Invoke(connectionId);</div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>            server.OnData = (connectionId, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">segment</a>) =&gt; <a class="code hl_variable" href="class_mirror_1_1_transport.html#aad4ccccfc0768f296139033e4d513c98">OnServerDataReceived</a>.Invoke(connectionId, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">segment</a>, Channels.Reliable);</div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>            server.OnDisconnected = (connectionId) =&gt; <a class="code hl_variable" href="class_mirror_1_1_transport.html#a983bfffa0e150880b6f42998a22c69ec">OnServerDisconnected</a>.Invoke(connectionId);</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span> </div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>            <span class="comment">// server configuration</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>            server.NoDelay = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#aeeb45aff206763044266619527bd8a6a">NoDelay</a>;</div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>            server.SendTimeout = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#aacd4d05cc06a3ddbb40e387cdd1f9fc7">SendTimeout</a>;</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>            server.ReceiveTimeout = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#adc8345a6d13c78799703dd86d2bde952">ReceiveTimeout</a>;</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>            server.SendQueueLimit = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#ab9ec33c29bef4638bda4e5f2de8b469e">serverSendQueueLimitPerConnection</a>;</div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>            server.ReceiveQueueLimit = <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a3d9142fc88fdf52302ad68e31b245d29">serverReceiveQueueLimitPerConnection</a>;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span> </div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>            server.<a class="code hl_function" href="class_telepathy_1_1_server.html#a43a27ae15e6baf7da14b7794bd51e228">Start</a>(<a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a70a9a54307fed1bb56df72002b361e19">port</a>);</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>        }</div>
</div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span> </div>
<div class="foldopen" id="foldopen00195" data-start="{" data-end="}">
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#aa0c13f3a90a7b96a0a2b58437855688a">  195</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#aa0c13f3a90a7b96a0a2b58437855688a">ServerSend</a>(<span class="keywordtype">int</span> connectionId, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">ArraySegment&lt;byte&gt;</a> <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">segment</a>, <span class="keywordtype">int</span> channelId)</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>        {</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>            server?.<a class="code hl_function" href="class_telepathy_1_1_server.html#a19ff9f96b64f275735bd46c9771a1377">Send</a>(connectionId, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">segment</a>);</div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span> </div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>            <span class="comment">// call event. might be null if no statistics are listening etc.</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>            <a class="code hl_variable" href="class_mirror_1_1_transport.html#a878632fb01627cd8437ee434effd7bd6">OnServerDataSent</a>?.Invoke(connectionId, <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">segment</a>, Channels.Reliable);</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>        }</div>
</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a1275e767567311a93f1376dd3c08b2a7">  202</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#a1275e767567311a93f1376dd3c08b2a7">ServerDisconnect</a>(<span class="keywordtype">int</span> connectionId) =&gt; server?.<a class="code hl_function" href="class_telepathy_1_1_server.html#ad0af4b1e7587dc30c71f9d87623aee34">Disconnect</a>(connectionId);</div>
<div class="foldopen" id="foldopen00203" data-start="{" data-end="}">
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#ad2a54c4fa5d6c327b2ce5ed9cf060a52">  203</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#ad2a54c4fa5d6c327b2ce5ed9cf060a52">ServerGetClientAddress</a>(<span class="keywordtype">int</span> connectionId)</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        {</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>            <span class="keywordflow">try</span></div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>            {</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>                <span class="keywordflow">return</span> server?.<a class="code hl_function" href="class_telepathy_1_1_server.html#a9a3eef1deed07ea61ab280a262403c7a">GetClientAddress</a>(connectionId);</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>            }</div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>            <span class="keywordflow">catch</span> (<a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">SocketException</a>)</div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>            {</div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>                <span class="comment">// using server.listener.LocalEndpoint causes an Exception</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>                <span class="comment">// in UWP + Unity 2019:</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>                <span class="comment">//   Exception thrown at 0x00007FF9755DA388 in UWF.exe:</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>                <span class="comment">//   Microsoft C++ exception: Il2CppExceptionWrapper at memory</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>                <span class="comment">//   location 0x000000E15A0FCDD0. SocketException: An address</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>                <span class="comment">//   incompatible with the requested protocol was used at</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>                <span class="comment">//   System.Net.Sockets.Socket.get_LocalEndPoint ()</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>                <span class="comment">// so let&#39;s at least catch it and recover</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>                <span class="keywordflow">return</span> <span class="stringliteral">&quot;unknown&quot;</span>;</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>            }</div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        }</div>
</div>
<div class="foldopen" id="foldopen00222" data-start="{" data-end="}">
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a2c09721619ef9e9f0676dbe4bfb9a202">  222</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#a2c09721619ef9e9f0676dbe4bfb9a202">ServerStop</a>()</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>        {</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>            server?.<a class="code hl_function" href="class_telepathy_1_1_server.html#ae52e0c791c61332d1ef0860eae1f6aa6">Stop</a>();</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span>            server = <span class="keyword">null</span>;</div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span>        }</div>
</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span> </div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>        <span class="comment">// messages should always be processed in early update</span></div>
<div class="foldopen" id="foldopen00229" data-start="{" data-end="}">
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#ab863221f59873862103f65913bc414aa">  229</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#ab863221f59873862103f65913bc414aa">ServerEarlyUpdate</a>()</div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>        {</div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>            <span class="comment">// note: we need to check enabled in case we set it to false</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>            <span class="comment">// when LateUpdate already started.</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>            <span class="comment">// (https://github.com/vis2k/Mirror/pull/379)</span></div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span>            <span class="keywordflow">if</span> (!enabled) <span class="keywordflow">return</span>;</div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span> </div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>            <span class="comment">// process a maximum amount of server messages per tick</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>            <span class="comment">// IMPORTANT: check .enabled to stop processing immediately after a</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>            <span class="comment">//            scene change message arrives!</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>            server?.<a class="code hl_function" href="class_telepathy_1_1_server.html#a04cfa874ce5dcf2a42129291a57b1f3e">Tick</a>(<a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#ace4cc8b61fe41ac866ad6a2a3ed13f54">serverMaxReceivesPerTick</a>, enabledCheck);</div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>        }</div>
</div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span> </div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>        <span class="comment">// common</span></div>
<div class="foldopen" id="foldopen00243" data-start="{" data-end="}">
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a884bca48dacd2fe0f1a7bd2ae947bdf9">  243</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">void</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#a884bca48dacd2fe0f1a7bd2ae947bdf9">Shutdown</a>()</div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>        {</div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>            <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">Debug</a>.Log(<span class="stringliteral">&quot;TelepathyTransport Shutdown()&quot;</span>);</div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>            client?.<a class="code hl_function" href="class_telepathy_1_1_client.html#ace1241514367a306a88deb766e31de7b">Disconnect</a>();</div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>            client = <span class="keyword">null</span>;</div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>            server?.<a class="code hl_function" href="class_telepathy_1_1_server.html#ae52e0c791c61332d1ef0860eae1f6aa6">Stop</a>();</div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>            server = <span class="keyword">null</span>;</div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>        }</div>
</div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span> </div>
<div class="foldopen" id="foldopen00252" data-start="{" data-end="}">
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#aed16f9818435d5f26f0a796818a51c39">  252</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">int</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#aed16f9818435d5f26f0a796818a51c39">GetMaxPacketSize</a>(<span class="keywordtype">int</span> channelId)</div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>        {</div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>            <span class="keywordflow">return</span> <a class="code hl_variable" href="class_mirror_1_1_telepathy_transport.html#a1977240537e16fb459db371867d0e25f">serverMaxMessageSize</a>;</div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>        }</div>
</div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span> </div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        <span class="comment">// Keep it short and simple so it looks nice in the HUD.</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>        <span class="comment">//</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>        <span class="comment">// printing server.listener.LocalEndpoint causes an Exception</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        <span class="comment">// in UWP + Unity 2019:</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        <span class="comment">//   Exception thrown at 0x00007FF9755DA388 in UWF.exe:</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>        <span class="comment">//   Microsoft C++ exception: Il2CppExceptionWrapper at memory</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>        <span class="comment">//   location 0x000000E15A0FCDD0. SocketException: An address</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        <span class="comment">//   incompatible with the requested protocol was used at</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        <span class="comment">//   System.Net.Sockets.Socket.get_LocalEndPoint ()</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        <span class="comment">// so just use the regular port instead.</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno"><a class="line" href="class_mirror_1_1_telepathy_transport.html#a2983d00a66d8415f79683ff0f19b1e88">  267</a></span>        <span class="keyword">public</span> <span class="keyword">override</span> <span class="keywordtype">string</span> <a class="code hl_function" href="class_mirror_1_1_telepathy_transport.html#a2983d00a66d8415f79683ff0f19b1e88">ToString</a>() =&gt; <a class="code hl_struct" href="struct_mirror_1_1_grid2_d.html">$</a><span class="stringliteral">&quot;Telepathy [{port}]&quot;</span>;</div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>    }</div>
</div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>}</div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html">Mirror.TelepathyTransport</a></div><div class="ttdef"><b>Definition</b> <a href="#l00012">TelepathyTransport.cs:13</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a08c4ab88612c182eb7c3dd6678e33435"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a08c4ab88612c182eb7c3dd6678e33435">Mirror.TelepathyTransport.ClientDisconnect</a></div><div class="ttdeci">override void ClientDisconnect()</div><div class="ttdef"><b>Definition</b> <a href="#l00137">TelepathyTransport.cs:137</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a1275e767567311a93f1376dd3c08b2a7"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a1275e767567311a93f1376dd3c08b2a7">Mirror.TelepathyTransport.ServerDisconnect</a></div><div class="ttdeci">override void ServerDisconnect(int connectionId)</div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a1977240537e16fb459db371867d0e25f"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a1977240537e16fb459db371867d0e25f">Mirror.TelepathyTransport.serverMaxMessageSize</a></div><div class="ttdeci">int serverMaxMessageSize</div><div class="ttdef"><b>Definition</b> <a href="#l00033">TelepathyTransport.cs:33</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a2983d00a66d8415f79683ff0f19b1e88"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a2983d00a66d8415f79683ff0f19b1e88">Mirror.TelepathyTransport.ToString</a></div><div class="ttdeci">override string ToString()</div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a29fe2ecaa79df7cf576345b7185926d5"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a29fe2ecaa79df7cf576345b7185926d5">Mirror.TelepathyTransport.clientSendQueueLimit</a></div><div class="ttdeci">int clientSendQueueLimit</div><div class="ttdef"><b>Definition</b> <a href="#l00052">TelepathyTransport.cs:52</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a2abd054658041fe209c7006dc9f83433"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a2abd054658041fe209c7006dc9f83433">Mirror.TelepathyTransport.ClientSend</a></div><div class="ttdeci">override void ClientSend(ArraySegment&lt; byte &gt; segment, int channelId)</div><div class="ttdef"><b>Definition</b> <a href="#l00130">TelepathyTransport.cs:130</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a2c09721619ef9e9f0676dbe4bfb9a202"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a2c09721619ef9e9f0676dbe4bfb9a202">Mirror.TelepathyTransport.ServerStop</a></div><div class="ttdeci">override void ServerStop()</div><div class="ttdef"><b>Definition</b> <a href="#l00222">TelepathyTransport.cs:222</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a3d9142fc88fdf52302ad68e31b245d29"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a3d9142fc88fdf52302ad68e31b245d29">Mirror.TelepathyTransport.serverReceiveQueueLimitPerConnection</a></div><div class="ttdeci">int serverReceiveQueueLimitPerConnection</div><div class="ttdef"><b>Definition</b> <a href="#l00042">TelepathyTransport.cs:42</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a4a4122caf208b894ec69f04cbe3918a3"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a4a4122caf208b894ec69f04cbe3918a3">Mirror.TelepathyTransport.ClientConnect</a></div><div class="ttdeci">override void ClientConnect(Uri uri)</div><div class="ttdoc">Connects the client to the server at the Uri.</div><div class="ttdef"><b>Definition</b> <a href="#l00121">TelepathyTransport.cs:121</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a4c3b0b7f38c960b7fd43dfd585b48bc9"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a4c3b0b7f38c960b7fd43dfd585b48bc9">Mirror.TelepathyTransport.Scheme</a></div><div class="ttdeci">const string Scheme</div><div class="ttdef"><b>Definition</b> <a href="#l00016">TelepathyTransport.cs:16</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a5296efb7fcf9525e840c626ecfe80d04"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a5296efb7fcf9525e840c626ecfe80d04">Mirror.TelepathyTransport.clientMaxMessageSize</a></div><div class="ttdeci">int clientMaxMessageSize</div><div class="ttdef"><b>Definition</b> <a href="#l00046">TelepathyTransport.cs:46</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a5331c3cab8955c9307f84522ca91b125"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a5331c3cab8955c9307f84522ca91b125">Mirror.TelepathyTransport.ClientConnected</a></div><div class="ttdeci">override bool ClientConnected()</div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a5a944f452d2869443d8441c1e6dffa4e"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a5a944f452d2869443d8441c1e6dffa4e">Mirror.TelepathyTransport.ServerStart</a></div><div class="ttdeci">override void ServerStart()</div><div class="ttdef"><b>Definition</b> <a href="#l00169">TelepathyTransport.cs:169</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a61a7f17b332bb31f01929eee514d9923"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a61a7f17b332bb31f01929eee514d9923">Mirror.TelepathyTransport.Port</a></div><div class="ttdeci">ushort Port</div><div class="ttdef"><b>Definition</b> <a href="#l00019">TelepathyTransport.cs:19</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a70a9a54307fed1bb56df72002b361e19"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a70a9a54307fed1bb56df72002b361e19">Mirror.TelepathyTransport.port</a></div><div class="ttdeci">ushort port</div><div class="ttdef"><b>Definition</b> <a href="#l00018">TelepathyTransport.cs:18</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a884bca48dacd2fe0f1a7bd2ae947bdf9"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a884bca48dacd2fe0f1a7bd2ae947bdf9">Mirror.TelepathyTransport.Shutdown</a></div><div class="ttdeci">override void Shutdown()</div><div class="ttdef"><b>Definition</b> <a href="#l00243">TelepathyTransport.cs:243</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_a97c1df1f38e023cb2a37c57b51987066"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#a97c1df1f38e023cb2a37c57b51987066">Mirror.TelepathyTransport.ServerActive</a></div><div class="ttdeci">override bool ServerActive()</div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_aa0c13f3a90a7b96a0a2b58437855688a"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#aa0c13f3a90a7b96a0a2b58437855688a">Mirror.TelepathyTransport.ServerSend</a></div><div class="ttdeci">override void ServerSend(int connectionId, ArraySegment&lt; byte &gt; segment, int channelId)</div><div class="ttdef"><b>Definition</b> <a href="#l00195">TelepathyTransport.cs:195</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_aacd4d05cc06a3ddbb40e387cdd1f9fc7"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#aacd4d05cc06a3ddbb40e387cdd1f9fc7">Mirror.TelepathyTransport.SendTimeout</a></div><div class="ttdeci">int SendTimeout</div><div class="ttdef"><b>Definition</b> <a href="#l00026">TelepathyTransport.cs:26</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_ab863221f59873862103f65913bc414aa"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#ab863221f59873862103f65913bc414aa">Mirror.TelepathyTransport.ServerEarlyUpdate</a></div><div class="ttdeci">override void ServerEarlyUpdate()</div><div class="ttdef"><b>Definition</b> <a href="#l00229">TelepathyTransport.cs:229</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_ab9ec33c29bef4638bda4e5f2de8b469e"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#ab9ec33c29bef4638bda4e5f2de8b469e">Mirror.TelepathyTransport.serverSendQueueLimitPerConnection</a></div><div class="ttdeci">int serverSendQueueLimitPerConnection</div><div class="ttdef"><b>Definition</b> <a href="#l00039">TelepathyTransport.cs:39</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_abcdb0e93b24235e9109c6846f1f1c1b6"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#abcdb0e93b24235e9109c6846f1f1c1b6">Mirror.TelepathyTransport.Available</a></div><div class="ttdeci">override bool Available()</div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_abdbbe71e75cb7a0ed90cd86677d270da"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#abdbbe71e75cb7a0ed90cd86677d270da">Mirror.TelepathyTransport.ClientEarlyUpdate</a></div><div class="ttdeci">override void ClientEarlyUpdate()</div><div class="ttdoc">NetworkLoop NetworkEarly/LateUpdate were added for a proper network update order. the goal is to: pro...</div><div class="ttdef"><b>Definition</b> <a href="#l00146">TelepathyTransport.cs:146</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_abf4ca459953e5068b2f4ec487eec8521"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#abf4ca459953e5068b2f4ec487eec8521">Mirror.TelepathyTransport.clientReceiveQueueLimit</a></div><div class="ttdeci">int clientReceiveQueueLimit</div><div class="ttdef"><b>Definition</b> <a href="#l00055">TelepathyTransport.cs:55</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_ac6e0eff4f1fd72746416a3fa76385009"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#ac6e0eff4f1fd72746416a3fa76385009">Mirror.TelepathyTransport.ServerUri</a></div><div class="ttdeci">override Uri ServerUri()</div><div class="ttdef"><b>Definition</b> <a href="#l00160">TelepathyTransport.cs:160</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_ace4cc8b61fe41ac866ad6a2a3ed13f54"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#ace4cc8b61fe41ac866ad6a2a3ed13f54">Mirror.TelepathyTransport.serverMaxReceivesPerTick</a></div><div class="ttdeci">int serverMaxReceivesPerTick</div><div class="ttdef"><b>Definition</b> <a href="#l00036">TelepathyTransport.cs:36</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_ad2a54c4fa5d6c327b2ce5ed9cf060a52"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#ad2a54c4fa5d6c327b2ce5ed9cf060a52">Mirror.TelepathyTransport.ServerGetClientAddress</a></div><div class="ttdeci">override string ServerGetClientAddress(int connectionId)</div><div class="ttdef"><b>Definition</b> <a href="#l00203">TelepathyTransport.cs:203</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_adadb28cf6672e015d58c5565f491ad71"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#adadb28cf6672e015d58c5565f491ad71">Mirror.TelepathyTransport.ClientConnect</a></div><div class="ttdeci">override void ClientConnect(string address)</div><div class="ttdef"><b>Definition</b> <a href="#l00115">TelepathyTransport.cs:115</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_adc8345a6d13c78799703dd86d2bde952"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#adc8345a6d13c78799703dd86d2bde952">Mirror.TelepathyTransport.ReceiveTimeout</a></div><div class="ttdeci">int ReceiveTimeout</div><div class="ttdef"><b>Definition</b> <a href="#l00029">TelepathyTransport.cs:29</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_aed16f9818435d5f26f0a796818a51c39"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#aed16f9818435d5f26f0a796818a51c39">Mirror.TelepathyTransport.GetMaxPacketSize</a></div><div class="ttdeci">override int GetMaxPacketSize(int channelId)</div><div class="ttdef"><b>Definition</b> <a href="#l00252">TelepathyTransport.cs:252</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_aeeb45aff206763044266619527bd8a6a"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#aeeb45aff206763044266619527bd8a6a">Mirror.TelepathyTransport.NoDelay</a></div><div class="ttdeci">bool NoDelay</div><div class="ttdef"><b>Definition</b> <a href="#l00023">TelepathyTransport.cs:23</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_telepathy_transport_html_af862776645609b71d6cdc99758ae387e"><div class="ttname"><a href="class_mirror_1_1_telepathy_transport.html#af862776645609b71d6cdc99758ae387e">Mirror.TelepathyTransport.clientMaxReceivesPerTick</a></div><div class="ttdeci">int clientMaxReceivesPerTick</div><div class="ttdef"><b>Definition</b> <a href="#l00049">TelepathyTransport.cs:49</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_transport_html"><div class="ttname"><a href="class_mirror_1_1_transport.html">Mirror.Transport</a></div><div class="ttdoc">Abstract transport layer component.</div><div class="ttdef"><b>Definition</b> <a href="_transport_8cs_source.html#l00031">Transport.cs:32</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_transport_html_a0c118fbbe9a2c95931689299f339ed2a"><div class="ttname"><a href="class_mirror_1_1_transport.html#a0c118fbbe9a2c95931689299f339ed2a">Mirror.Transport.OnClientConnected</a></div><div class="ttdeci">Action OnClientConnected</div><div class="ttdoc">Called by Transport when the client connected to the server.</div><div class="ttdef"><b>Definition</b> <a href="_transport_8cs_source.html#l00041">Transport.cs:41</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_transport_html_a1e165ace7bfb3eb442e2469a33e4081a"><div class="ttname"><a href="class_mirror_1_1_transport.html#a1e165ace7bfb3eb442e2469a33e4081a">Mirror.Transport.OnClientDisconnected</a></div><div class="ttdeci">Action OnClientDisconnected</div><div class="ttdoc">Called by Transport when the client disconnected from the server.</div><div class="ttdef"><b>Definition</b> <a href="_transport_8cs_source.html#l00057">Transport.cs:57</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_transport_html_a364bc19a2bf62bdec978e94a5991e3cf"><div class="ttname"><a href="class_mirror_1_1_transport.html#a364bc19a2bf62bdec978e94a5991e3cf">Mirror.Transport.OnServerConnected</a></div><div class="ttdeci">Action&lt; int &gt; OnServerConnected</div><div class="ttdoc">Called by Transport when a new client connected to the server.</div><div class="ttdef"><b>Definition</b> <a href="_transport_8cs_source.html#l00061">Transport.cs:61</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_transport_html_a647488e1cb837f2e08ee01892da813fc"><div class="ttname"><a href="class_mirror_1_1_transport.html#a647488e1cb837f2e08ee01892da813fc">Mirror.Transport.OnClientDataReceived</a></div><div class="ttdeci">Action&lt; ArraySegment&lt; byte &gt;, int &gt; OnClientDataReceived</div><div class="ttdoc">Called by Transport when the client received a message from the server.</div><div class="ttdef"><b>Definition</b> <a href="_transport_8cs_source.html#l00044">Transport.cs:44</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_transport_html_a71cbd65d3d45c7d1b19a77dcfb1600b9"><div class="ttname"><a href="class_mirror_1_1_transport.html#a71cbd65d3d45c7d1b19a77dcfb1600b9">Mirror.Transport.OnClientDataSent</a></div><div class="ttdeci">Action&lt; ArraySegment&lt; byte &gt;, int &gt; OnClientDataSent</div><div class="ttdoc">Called by Transport when the client sent a message to the server.</div><div class="ttdef"><b>Definition</b> <a href="_transport_8cs_source.html#l00051">Transport.cs:51</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_transport_html_a878632fb01627cd8437ee434effd7bd6"><div class="ttname"><a href="class_mirror_1_1_transport.html#a878632fb01627cd8437ee434effd7bd6">Mirror.Transport.OnServerDataSent</a></div><div class="ttdeci">Action&lt; int, ArraySegment&lt; byte &gt;, int &gt; OnServerDataSent</div><div class="ttdoc">Called by Transport when the server sent a message to a client.</div><div class="ttdef"><b>Definition</b> <a href="_transport_8cs_source.html#l00071">Transport.cs:71</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_transport_html_a983bfffa0e150880b6f42998a22c69ec"><div class="ttname"><a href="class_mirror_1_1_transport.html#a983bfffa0e150880b6f42998a22c69ec">Mirror.Transport.OnServerDisconnected</a></div><div class="ttdeci">Action&lt; int &gt; OnServerDisconnected</div><div class="ttdoc">Called by Transport when a client disconnected from the server.</div><div class="ttdef"><b>Definition</b> <a href="_transport_8cs_source.html#l00078">Transport.cs:78</a></div></div>
<div class="ttc" id="aclass_mirror_1_1_transport_html_aad4ccccfc0768f296139033e4d513c98"><div class="ttname"><a href="class_mirror_1_1_transport.html#aad4ccccfc0768f296139033e4d513c98">Mirror.Transport.OnServerDataReceived</a></div><div class="ttdeci">Action&lt; int, ArraySegment&lt; byte &gt;, int &gt; OnServerDataReceived</div><div class="ttdoc">Called by Transport when the server received a message from a client.</div><div class="ttdef"><b>Definition</b> <a href="_transport_8cs_source.html#l00064">Transport.cs:64</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_client_html"><div class="ttname"><a href="class_telepathy_1_1_client.html">Telepathy.Client</a></div><div class="ttdef"><b>Definition</b> <a href="_client_8cs_source.html#l00083">Client.cs:84</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_client_html_a32edf31800fff35062bb8c8d2a8bb609"><div class="ttname"><a href="class_telepathy_1_1_client.html#a32edf31800fff35062bb8c8d2a8bb609">Telepathy.Client.Connect</a></div><div class="ttdeci">void Connect(string ip, int port)</div><div class="ttdef"><b>Definition</b> <a href="_client_8cs_source.html#l00198">Client.cs:198</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_client_html_a7d910fc761c5a2834975a51c07bef37f"><div class="ttname"><a href="class_telepathy_1_1_client.html#a7d910fc761c5a2834975a51c07bef37f">Telepathy.Client.Connected</a></div><div class="ttdeci">bool Connected</div><div class="ttdef"><b>Definition</b> <a href="_client_8cs_source.html#l00109">Client.cs:109</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_client_html_aa32bb85cbda908661ed8df3cb22107de"><div class="ttname"><a href="class_telepathy_1_1_client.html#aa32bb85cbda908661ed8df3cb22107de">Telepathy.Client.Tick</a></div><div class="ttdeci">int Tick(int processLimit, Func&lt; bool &gt; checkEnabled=null)</div><div class="ttdef"><b>Definition</b> <a href="_client_8cs_source.html#l00317">Client.cs:317</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_client_html_ace1241514367a306a88deb766e31de7b"><div class="ttname"><a href="class_telepathy_1_1_client.html#ace1241514367a306a88deb766e31de7b">Telepathy.Client.Disconnect</a></div><div class="ttdeci">void Disconnect()</div><div class="ttdef"><b>Definition</b> <a href="_client_8cs_source.html#l00245">Client.cs:245</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_client_html_af54b069da34edba79508455586dc4a6f"><div class="ttname"><a href="class_telepathy_1_1_client.html#af54b069da34edba79508455586dc4a6f">Telepathy.Client.Send</a></div><div class="ttdeci">bool Send(ArraySegment&lt; byte &gt; message)</div><div class="ttdef"><b>Definition</b> <a href="_client_8cs_source.html#l00261">Client.cs:261</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_server_html"><div class="ttname"><a href="class_telepathy_1_1_server.html">Telepathy.Server</a></div><div class="ttdef"><b>Definition</b> <a href="_server_8cs_source.html#l00010">Server.cs:11</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_server_html_a04cfa874ce5dcf2a42129291a57b1f3e"><div class="ttname"><a href="class_telepathy_1_1_server.html#a04cfa874ce5dcf2a42129291a57b1f3e">Telepathy.Server.Tick</a></div><div class="ttdeci">int Tick(int processLimit, Func&lt; bool &gt; checkEnabled=null)</div><div class="ttdef"><b>Definition</b> <a href="_server_8cs_source.html#l00356">Server.cs:356</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_server_html_a19ff9f96b64f275735bd46c9771a1377"><div class="ttname"><a href="class_telepathy_1_1_server.html#a19ff9f96b64f275735bd46c9771a1377">Telepathy.Server.Send</a></div><div class="ttdeci">bool Send(int connectionId, ArraySegment&lt; byte &gt; message)</div><div class="ttdef"><b>Definition</b> <a href="_server_8cs_source.html#l00266">Server.cs:266</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_server_html_a43a27ae15e6baf7da14b7794bd51e228"><div class="ttname"><a href="class_telepathy_1_1_server.html#a43a27ae15e6baf7da14b7794bd51e228">Telepathy.Server.Start</a></div><div class="ttdeci">bool Start(int port)</div><div class="ttdef"><b>Definition</b> <a href="_server_8cs_source.html#l00203">Server.cs:203</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_server_html_a88bb85eff5cb0158798bed088ee057c1"><div class="ttname"><a href="class_telepathy_1_1_server.html#a88bb85eff5cb0158798bed088ee057c1">Telepathy.Server.Active</a></div><div class="ttdeci">bool Active</div><div class="ttdef"><b>Definition</b> <a href="_server_8cs_source.html#l00071">Server.cs:71</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_server_html_a9a3eef1deed07ea61ab280a262403c7a"><div class="ttname"><a href="class_telepathy_1_1_server.html#a9a3eef1deed07ea61ab280a262403c7a">Telepathy.Server.GetClientAddress</a></div><div class="ttdeci">string GetClientAddress(int connectionId)</div><div class="ttdef"><b>Definition</b> <a href="_server_8cs_source.html#l00319">Server.cs:319</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_server_html_ad0af4b1e7587dc30c71f9d87623aee34"><div class="ttname"><a href="class_telepathy_1_1_server.html#ad0af4b1e7587dc30c71f9d87623aee34">Telepathy.Server.Disconnect</a></div><div class="ttdeci">bool Disconnect(int connectionId)</div><div class="ttdef"><b>Definition</b> <a href="_server_8cs_source.html#l00330">Server.cs:330</a></div></div>
<div class="ttc" id="aclass_telepathy_1_1_server_html_ae52e0c791c61332d1ef0860eae1f6aa6"><div class="ttname"><a href="class_telepathy_1_1_server.html#ae52e0c791c61332d1ef0860eae1f6aa6">Telepathy.Server.Stop</a></div><div class="ttdeci">void Stop()</div><div class="ttdef"><b>Definition</b> <a href="_server_8cs_source.html#l00226">Server.cs:226</a></div></div>
<div class="ttc" id="ainterface_mirror_1_1_port_transport_html"><div class="ttname"><a href="interface_mirror_1_1_port_transport.html">Mirror.PortTransport</a></div><div class="ttdef"><b>Definition</b> <a href="_port_transport_8cs_source.html#l00009">PortTransport.cs:10</a></div></div>
<div class="ttc" id="anamespace_mirror_html"><div class="ttname"><a href="namespace_mirror.html">Mirror</a></div><div class="ttdef"><b>Definition</b> <a href="_basic_authenticator_8cs_source.html#l00005">BasicAuthenticator.cs:6</a></div></div>
<div class="ttc" id="anamespace_telepathy_html"><div class="ttname"><a href="namespace_telepathy.html">Telepathy</a></div><div class="ttdef"><b>Definition</b> <a href="_client_8cs_source.html#l00005">Client.cs:6</a></div></div>
<div class="ttc" id="astruct_mirror_1_1_grid2_d_html"><div class="ttname"><a href="struct_mirror_1_1_grid2_d.html">Mirror.Grid2D</a></div><div class="ttdef"><b>Definition</b> <a href="_grid2_d_8cs_source.html#l00010">Grid2D.cs:11</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_84bbf7b3c7f28a5a18725745e1505219.html">Assets</a></li><li class="navelem"><a class="el" href="dir_bf1dd3994e8f933eb733da65a1863113.html">Mirror</a></li><li class="navelem"><a class="el" href="dir_63681ed09a11975d106e3139475fd43f.html">Transports</a></li><li class="navelem"><a class="el" href="dir_50e5f1a5cc41740b032fc898984e1a4c.html">Telepathy</a></li><li class="navelem"><a class="el" href="_telepathy_transport_8cs.html">TelepathyTransport.cs</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0 </li>
  </ul>
</div>
</body>
</html>
